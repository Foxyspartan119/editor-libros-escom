(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();function z_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Rf={exports:{}},Ll={};var dy;function oE(){if(dy)return Ll;dy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var y in o)y!=="key"&&(h[y]=o[y])}else h=o;return o=h.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:h}}return Ll.Fragment=e,Ll.jsx=i,Ll.jsxs=i,Ll}var my;function uE(){return my||(my=1,Rf.exports=oE()),Rf.exports}var F=uE(),wf={exports:{}},Et={};var gy;function cE(){if(gy)return Et;gy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.iterator;function G(N){return N===null||typeof N!="object"?null:(N=O&&N[O]||N["@@iterator"],typeof N=="function"?N:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},et=Object.assign,W={};function dt(N,X,it){this.props=N,this.context=X,this.refs=W,this.updater=it||$}dt.prototype.isReactComponent={},dt.prototype.setState=function(N,X){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,X,"setState")},dt.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function At(){}At.prototype=dt.prototype;function J(N,X,it){this.props=N,this.context=X,this.refs=W,this.updater=it||$}var ut=J.prototype=new At;ut.constructor=J,et(ut,dt.prototype),ut.isPureReactComponent=!0;var vt=Array.isArray;function pt(){}var R={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function D(N,X,it){var st=it.ref;return{$$typeof:s,type:N,key:X,ref:st!==void 0?st:null,props:it}}function M(N,X){return D(N.type,X,N.props)}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function z(N){var X={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(it){return X[it]})}var w=/\/+/g;function Yt(N,X){return typeof N=="object"&&N!==null&&N.key!=null?z(""+N.key):X.toString(36)}function se(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(pt,pt):(N.status="pending",N.then(function(X){N.status==="pending"&&(N.status="fulfilled",N.value=X)},function(X){N.status==="pending"&&(N.status="rejected",N.reason=X)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function P(N,X,it,st,yt){var Rt=typeof N;(Rt==="undefined"||Rt==="boolean")&&(N=null);var zt=!1;if(N===null)zt=!0;else switch(Rt){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(N.$$typeof){case s:case e:zt=!0;break;case A:return zt=N._init,P(zt(N._payload),X,it,st,yt)}}if(zt)return yt=yt(N),zt=st===""?"."+Yt(N,0):st,vt(yt)?(it="",zt!=null&&(it=zt.replace(w,"$&/")+"/"),P(yt,X,it,"",function(La){return La})):yt!=null&&(V(yt)&&(yt=M(yt,it+(yt.key==null||N&&N.key===yt.key?"":(""+yt.key).replace(w,"$&/")+"/")+zt)),X.push(yt)),1;zt=0;var Ve=st===""?".":st+":";if(vt(N))for(var ie=0;ie<N.length;ie++)st=N[ie],Rt=Ve+Yt(st,ie),zt+=P(st,X,it,Rt,yt);else if(ie=G(N),typeof ie=="function")for(N=ie.call(N),ie=0;!(st=N.next()).done;)st=st.value,Rt=Ve+Yt(st,ie++),zt+=P(st,X,it,Rt,yt);else if(Rt==="object"){if(typeof N.then=="function")return P(se(N),X,it,st,yt);throw X=String(N),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return zt}function nt(N,X,it){if(N==null)return N;var st=[],yt=0;return P(N,st,"","",function(Rt){return X.call(it,Rt,yt++)}),st}function ct(N){if(N._status===-1){var X=N._result;X=X(),X.then(function(it){(N._status===0||N._status===-1)&&(N._status=1,N._result=it)},function(it){(N._status===0||N._status===-1)&&(N._status=2,N._result=it)}),N._status===-1&&(N._status=0,N._result=X)}if(N._status===1)return N._result.default;throw N._result}var Ot=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Ht={map:nt,forEach:function(N,X,it){nt(N,function(){X.apply(this,arguments)},it)},count:function(N){var X=0;return nt(N,function(){X++}),X},toArray:function(N){return nt(N,function(X){return X})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Et.Activity=S,Et.Children=Ht,Et.Component=dt,Et.Fragment=i,Et.Profiler=o,Et.PureComponent=J,Et.StrictMode=r,Et.Suspense=v,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Et.__COMPILER_RUNTIME={__proto__:null,c:function(N){return R.H.useMemoCache(N)}},Et.cache=function(N){return function(){return N.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(N,X,it){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var st=et({},N.props),yt=N.key;if(X!=null)for(Rt in X.key!==void 0&&(yt=""+X.key),X)!b.call(X,Rt)||Rt==="key"||Rt==="__self"||Rt==="__source"||Rt==="ref"&&X.ref===void 0||(st[Rt]=X[Rt]);var Rt=arguments.length-2;if(Rt===1)st.children=it;else if(1<Rt){for(var zt=Array(Rt),Ve=0;Ve<Rt;Ve++)zt[Ve]=arguments[Ve+2];st.children=zt}return D(N.type,yt,st)},Et.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:h,_context:N},N},Et.createElement=function(N,X,it){var st,yt={},Rt=null;if(X!=null)for(st in X.key!==void 0&&(Rt=""+X.key),X)b.call(X,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(yt[st]=X[st]);var zt=arguments.length-2;if(zt===1)yt.children=it;else if(1<zt){for(var Ve=Array(zt),ie=0;ie<zt;ie++)Ve[ie]=arguments[ie+2];yt.children=Ve}if(N&&N.defaultProps)for(st in zt=N.defaultProps,zt)yt[st]===void 0&&(yt[st]=zt[st]);return D(N,Rt,yt)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(N){return{$$typeof:y,render:N}},Et.isValidElement=V,Et.lazy=function(N){return{$$typeof:A,_payload:{_status:-1,_result:N},_init:ct}},Et.memo=function(N,X){return{$$typeof:_,type:N,compare:X===void 0?null:X}},Et.startTransition=function(N){var X=R.T,it={};R.T=it;try{var st=N(),yt=R.S;yt!==null&&yt(it,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(pt,Ot)}catch(Rt){Ot(Rt)}finally{X!==null&&it.types!==null&&(X.types=it.types),R.T=X}},Et.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Et.use=function(N){return R.H.use(N)},Et.useActionState=function(N,X,it){return R.H.useActionState(N,X,it)},Et.useCallback=function(N,X){return R.H.useCallback(N,X)},Et.useContext=function(N){return R.H.useContext(N)},Et.useDebugValue=function(){},Et.useDeferredValue=function(N,X){return R.H.useDeferredValue(N,X)},Et.useEffect=function(N,X){return R.H.useEffect(N,X)},Et.useEffectEvent=function(N){return R.H.useEffectEvent(N)},Et.useId=function(){return R.H.useId()},Et.useImperativeHandle=function(N,X,it){return R.H.useImperativeHandle(N,X,it)},Et.useInsertionEffect=function(N,X){return R.H.useInsertionEffect(N,X)},Et.useLayoutEffect=function(N,X){return R.H.useLayoutEffect(N,X)},Et.useMemo=function(N,X){return R.H.useMemo(N,X)},Et.useOptimistic=function(N,X){return R.H.useOptimistic(N,X)},Et.useReducer=function(N,X,it){return R.H.useReducer(N,X,it)},Et.useRef=function(N){return R.H.useRef(N)},Et.useState=function(N){return R.H.useState(N)},Et.useSyncExternalStore=function(N,X,it){return R.H.useSyncExternalStore(N,X,it)},Et.useTransition=function(){return R.H.useTransition()},Et.version="19.2.3",Et}var py;function cd(){return py||(py=1,wf.exports=cE()),wf.exports}var le=cd();const hE=z_(le);var Cf={exports:{}},jl={},Df={exports:{}},Vf={};var yy;function fE(){return yy||(yy=1,(function(s){function e(P,nt){var ct=P.length;P.push(nt);t:for(;0<ct;){var Ot=ct-1>>>1,Ht=P[Ot];if(0<o(Ht,nt))P[Ot]=nt,P[ct]=Ht,ct=Ot;else break t}}function i(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var nt=P[0],ct=P.pop();if(ct!==nt){P[0]=ct;t:for(var Ot=0,Ht=P.length,N=Ht>>>1;Ot<N;){var X=2*(Ot+1)-1,it=P[X],st=X+1,yt=P[st];if(0>o(it,ct))st<Ht&&0>o(yt,it)?(P[Ot]=yt,P[st]=ct,Ot=st):(P[Ot]=it,P[X]=ct,Ot=X);else if(st<Ht&&0>o(yt,ct))P[Ot]=yt,P[st]=ct,Ot=st;else break t}}return nt}function o(P,nt){var ct=P.sortIndex-nt.sortIndex;return ct!==0?ct:P.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var d=Date,y=d.now();s.unstable_now=function(){return d.now()-y}}var v=[],_=[],A=1,S=null,O=3,G=!1,$=!1,et=!1,W=!1,dt=typeof setTimeout=="function"?setTimeout:null,At=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ut(P){for(var nt=i(_);nt!==null;){if(nt.callback===null)r(_);else if(nt.startTime<=P)r(_),nt.sortIndex=nt.expirationTime,e(v,nt);else break;nt=i(_)}}function vt(P){if(et=!1,ut(P),!$)if(i(v)!==null)$=!0,pt||(pt=!0,z());else{var nt=i(_);nt!==null&&se(vt,nt.startTime-P)}}var pt=!1,R=-1,b=5,D=-1;function M(){return W?!0:!(s.unstable_now()-D<b)}function V(){if(W=!1,pt){var P=s.unstable_now();D=P;var nt=!0;try{t:{$=!1,et&&(et=!1,At(R),R=-1),G=!0;var ct=O;try{e:{for(ut(P),S=i(v);S!==null&&!(S.expirationTime>P&&M());){var Ot=S.callback;if(typeof Ot=="function"){S.callback=null,O=S.priorityLevel;var Ht=Ot(S.expirationTime<=P);if(P=s.unstable_now(),typeof Ht=="function"){S.callback=Ht,ut(P),nt=!0;break e}S===i(v)&&r(v),ut(P)}else r(v);S=i(v)}if(S!==null)nt=!0;else{var N=i(_);N!==null&&se(vt,N.startTime-P),nt=!1}}break t}finally{S=null,O=ct,G=!1}nt=void 0}}finally{nt?z():pt=!1}}}var z;if(typeof J=="function")z=function(){J(V)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Yt=w.port2;w.port1.onmessage=V,z=function(){Yt.postMessage(null)}}else z=function(){dt(V,0)};function se(P,nt){R=dt(function(){P(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return O},s.unstable_next=function(P){switch(O){case 1:case 2:case 3:var nt=3;break;default:nt=O}var ct=O;O=nt;try{return P()}finally{O=ct}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(P,nt){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ct=O;O=P;try{return nt()}finally{O=ct}},s.unstable_scheduleCallback=function(P,nt,ct){var Ot=s.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Ot+ct:Ot):ct=Ot,P){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=ct+Ht,P={id:A++,callback:nt,priorityLevel:P,startTime:ct,expirationTime:Ht,sortIndex:-1},ct>Ot?(P.sortIndex=ct,e(_,P),i(v)===null&&P===i(_)&&(et?(At(R),R=-1):et=!0,se(vt,ct-Ot))):(P.sortIndex=Ht,e(v,P),$||G||($=!0,pt||(pt=!0,z()))),P},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(P){var nt=O;return function(){var ct=O;O=nt;try{return P.apply(this,arguments)}finally{O=ct}}}})(Vf)),Vf}var _y;function dE(){return _y||(_y=1,Df.exports=fE()),Df.exports}var If={exports:{}},Ye={};var vy;function mE(){if(vy)return Ye;vy=1;var s=cd();function e(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(v,_,A){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:v,containerInfo:_,implementation:A}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ye.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ye.createPortal=function(v,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return h(v,_,null,A)},Ye.flushSync=function(v){var _=d.T,A=r.p;try{if(d.T=null,r.p=2,v)return v()}finally{d.T=_,r.p=A,r.d.f()}},Ye.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(v,_))},Ye.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},Ye.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var A=_.as,S=y(A,_.crossOrigin),O=typeof _.integrity=="string"?_.integrity:void 0,G=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?r.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:O,fetchPriority:G}):A==="script"&&r.d.X(v,{crossOrigin:S,integrity:O,fetchPriority:G,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ye.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=y(_.as,_.crossOrigin);r.d.M(v,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(v)},Ye.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,S=y(A,_.crossOrigin);r.d.L(v,A,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ye.preloadModule=function(v,_){if(typeof v=="string")if(_){var A=y(_.as,_.crossOrigin);r.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(v)},Ye.requestFormReset=function(v){r.d.r(v)},Ye.unstable_batchedUpdates=function(v,_){return v(_)},Ye.useFormState=function(v,_,A){return d.H.useFormState(v,_,A)},Ye.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ye.version="19.2.3",Ye}var Ey;function gE(){if(Ey)return If.exports;Ey=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),If.exports=mE(),If.exports}var Ty;function pE(){if(Ty)return jl;Ty=1;var s=dE(),e=cd(),i=gE();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(h(t)!==t)throw Error(r(188))}function _(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return v(c),t;if(f===l)return v(c),n;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=c,l=f;else{for(var g=!1,E=c.child;E;){if(E===a){g=!0,a=c,l=f;break}if(E===l){g=!0,l=c,a=f;break}E=E.sibling}if(!g){for(E=f.child;E;){if(E===a){g=!0,a=f,l=c;break}if(E===l){g=!0,l=f,a=c;break}E=E.sibling}if(!g)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function A(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=A(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,O=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),et=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),dt=Symbol.for("react.profiler"),At=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function Yt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case et:return"Fragment";case dt:return"Profiler";case W:return"StrictMode";case vt:return"Suspense";case pt:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $:return"Portal";case J:return t.displayName||"Context";case At:return(t._context.displayName||"Context")+".Consumer";case ut:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:Yt(t.type)||"Memo";case b:n=t._payload,t=t._init;try{return Yt(t(n))}catch{}}return null}var se=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Ot=[],Ht=-1;function N(t){return{current:t}}function X(t){0>Ht||(t.current=Ot[Ht],Ot[Ht]=null,Ht--)}function it(t,n){Ht++,Ot[Ht]=t.current,t.current=n}var st=N(null),yt=N(null),Rt=N(null),zt=N(null);function Ve(t,n){switch(it(Rt,n),it(yt,t),it(st,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Up(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Up(n),t=Lp(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(st),it(st,t)}function ie(){X(st),X(yt),X(Rt)}function La(t){t.memoizedState!==null&&it(zt,t);var n=st.current,a=Lp(n,t.type);n!==a&&(it(yt,t),it(st,a))}function Rr(t){yt.current===t&&(X(st),X(yt)),zt.current===t&&(X(zt),Ol._currentValue=ct)}var wr,Cr;function Yn(t){if(wr===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);wr=n&&n[1]||"",Cr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wr+t+Cr}var Os=!1;function ja(t,n){if(!t||Os)return"";Os=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(q){var B=q}Reflect.construct(t,[],Y)}else{try{Y.call()}catch(q){B=q}t.call(Y.prototype)}}else{try{throw Error()}catch(q){B=q}(Y=t())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),g=f[0],E=f[1];if(g&&E){var C=g.split(`
`),j=E.split(`
`);for(c=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;if(l===C.length||c===j.length)for(l=C.length-1,c=j.length-1;1<=l&&0<=c&&C[l]!==j[c];)c--;for(;1<=l&&0<=c;l--,c--)if(C[l]!==j[c]){if(l!==1||c!==1)do if(l--,c--,0>c||C[l]!==j[c]){var H=`
`+C[l].replace(" at new "," at ");return t.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",t.displayName)),H}while(1<=l&&0<=c);break}}}finally{Os=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Yn(a):""}function xs(t,n){switch(t.tag){case 26:case 27:case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return t.child!==n&&n!==null?Yn("Suspense Fallback"):Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return ja(t.type,!1);case 11:return ja(t.type.render,!1);case 1:return ja(t.type,!0);case 31:return Yn("Activity");default:return""}}function zs(t){try{var n="",a=null;do n+=xs(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pe=Object.prototype.hasOwnProperty,Ie=s.unstable_scheduleCallback,Gi=s.unstable_cancelCallback,wc=s.unstable_shouldYield,uo=s.unstable_requestPaint,Je=s.unstable_now,Ba=s.unstable_getCurrentPriorityLevel,Us=s.unstable_ImmediatePriority,Ls=s.unstable_UserBlockingPriority,Qi=s.unstable_NormalPriority,Cc=s.unstable_LowPriority,co=s.unstable_IdlePriority,ho=s.log,fo=s.unstable_setDisableYieldValue,On=null,Le=null;function _n(t){if(typeof ho=="function"&&fo(t),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(On,t)}catch{}}var he=Math.clz32?Math.clz32:go,mo=Math.log,Dr=Math.LN2;function go(t){return t>>>=0,t===0?32:31-(mo(t)/Dr|0)|0}var Xn=256,ka=262144,ye=4194304;function Kn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zn(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?c=Kn(l):(g&=E,g!==0?c=Kn(g):a||(a=E&~t,a!==0&&(c=Kn(a))))):(E=l&~f,E!==0?c=Kn(E):g!==0?c=Kn(g):a||(a=l&~t,a!==0&&(c=Kn(a)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:c}function xn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Dc(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(){var t=ye;return ye<<=1,(ye&62914560)===0&&(ye=4194304),t}function Jn(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function qa(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vc(t,n,a,l,c,f){var g=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,C=t.expirationTimes,j=t.hiddenUpdates;for(a=g&~a;0<a;){var H=31-he(a),Y=1<<H;E[H]=0,C[H]=-1;var B=j[H];if(B!==null)for(j[H]=null,H=0;H<B.length;H++){var q=B[H];q!==null&&(q.lane&=-536870913)}a&=~Y}l!==0&&Pa(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(g&~n))}function Pa(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-he(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function js(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-he(a),c=1<<l;c&n|t[l]&n&&(t[l]|=n),a&=~c}}function Bs(t,n){var a=n&-n;return a=(a&42)!==0?1:Ha(a),(a&(t.suspendedLanes|n))!==0?0:a}function Ha(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ti(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yo(){var t=nt.p;return t!==0?t:(t=window.event,t===void 0?32:sy(t.type))}function zn(t,n){var a=nt.p;try{return nt.p=t,n()}finally{nt.p=a}}var Un=Math.random().toString(36).slice(2),_e="__reactFiber$"+Un,Oe="__reactProps$"+Un,$n="__reactContainer$"+Un,Vr="__reactEvents$"+Un,Ic="__reactListeners$"+Un,_o="__reactHandles$"+Un,vo="__reactResources$"+Un,Wn="__reactMarker$"+Un;function Ir(t){delete t[_e],delete t[Oe],delete t[Vr],delete t[Ic],delete t[_o]}function ti(t){var n=t[_e];if(n)return n;for(var a=t.parentNode;a;){if(n=a[$n]||a[_e]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Gp(t);t!==null;){if(a=t[_e])return a;t=Gp(t)}return n}t=a,a=t.parentNode}return null}function vn(t){if(t=t[_e]||t[$n]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function un(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function ei(t){var n=t[vo];return n||(n=t[vo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ve(t){t[Wn]=!0}var ks=new Set,qs={};function ni(t,n){ii(t,n),ii(t+"Capture",n)}function ii(t,n){for(qs[t]=n,t=0;t<n.length;t++)ks.add(n[t])}var Ps=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hs={},Gs={};function Eo(t){return pe.call(Gs,t)?!0:pe.call(Hs,t)?!1:Ps.test(t)?Gs[t]=!0:(Hs[t]=!0,!1)}function Nr(t,n,a){if(Eo(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function cn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Ee(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function xe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Qs(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,f=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Gt(t){if(!t._valueTracker){var n=Fi(t)?"checked":"value";t._valueTracker=Qs(t,n,""+t[n])}}function Ga(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Fi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qa=/[\n"\\]/g;function tn(t){return t.replace(Qa,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Mr(t,n,a,l,c,f,g,E){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),n!=null?g==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+xe(n)):t.value!==""+xe(n)&&(t.value=""+xe(n)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),n!=null?Fs(t,g,xe(n)):a!=null?Fs(t,g,xe(a)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+xe(E):t.removeAttribute("name")}function To(t,n,a,l,c,f,g,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Gt(t);return}a=a!=null?""+xe(a):"",n=n!=null?""+xe(n):a,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g),Gt(t)}function Fs(t,n,a){n==="number"&&ai(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yi(t,n,a,l){if(t=t.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<t.length;a++)c=n.hasOwnProperty("$"+t[a].value),t[a].selected!==c&&(t[a].selected=c),c&&l&&(t[a].defaultSelected=!0)}else{for(a=""+xe(a),n=null,c=0;c<t.length;c++){if(t[c].value===a){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Ao(t,n,a){if(n!=null&&(n=""+xe(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+xe(a):""}function Xi(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(se(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=xe(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Gt(t)}function en(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var So=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ys(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||So.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Xs(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&a[c]!==l&&Ys(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&Ys(t,f,n[f])}function Or(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(t){return Ki.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ln(){}var Ks=null;function En(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,ri=null;function Fa(t){var n=vn(t);if(n&&(t=n.stateNode)){var a=t[Oe]||null;t:switch(t=n.stateNode,n.type){case"input":if(Mr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+tn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var c=l[Oe]||null;if(!c)throw Error(r(90));Mr(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Ga(l)}break t;case"textarea":Ao(t,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Yi(t,!!a.multiple,n,!1)}}}var zr=!1;function Ji(t,n,a){if(zr)return t(n,a);zr=!0;try{var l=t(n);return l}finally{if(zr=!1,(Zi!==null||ri!==null)&&(yu(),Zi&&(n=Zi,t=ri,ri=Zi=null,Fa(n),t)))for(n=0;n<t.length;n++)Fa(t[n])}}function jn(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Oe]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(Tn)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{Ya=!1}var si=null,Zs=null,Xa=null;function Js(){if(Xa)return Xa;var t,n=Zs,a=n.length,l,c="value"in si?si.value:si.textContent,f=c.length;for(t=0;t<a&&n[t]===c[t];t++);var g=a-t;for(l=1;l<=g&&n[a-l]===c[f-l];l++);return Xa=c.slice(t,1<l?1-l:void 0)}function Ka(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ai(){return!0}function Bn(){return!1}function je(t){function n(a,l,c,f,g){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ai:Bn,this.isPropagationStopped=Bn,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),n}var Si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=je(Si),$i=S({},Si,{view:0,detail:0}),$s=je($i),Wi,Ur,oi,Lr=S({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oi&&(oi&&t.type==="mousemove"?(Wi=t.screenX-oi.screenX,Ur=t.screenY-oi.screenY):Ur=Wi=0,oi=t),Wi)},movementY:function(t){return"movementY"in t?t.movementY:Ur}}),Ws=je(Lr),Za=S({},Lr,{dataTransfer:0}),Ro=je(Za),wo=S({},$i,{relatedTarget:0}),Ja=je(wo),tl=S({},Si,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=je(tl),jr=S({},Si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Do=je(jr),Vo=S({},Si,{data:0}),ui=je(Vo),Io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},No={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Mo[t])?!!n[t]:!1}function ta(){return Oo}var $e=S({},$i,{key:function(t){if(t.key){var n=Io[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ka(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?No[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(t){return t.type==="keypress"?Ka(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ka(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xo=je($e),zo=S({},Lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bi=je(zo),u=S({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),m=je(u),p=S({},Si,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=je(p),U=S({},Lr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),k=je(U),tt=S({},Si,{newState:0,oldState:0}),St=je(tt),fe=[9,13,27,32],kt=Tn&&"CompositionEvent"in window,ae=null;Tn&&"documentMode"in document&&(ae=document.documentMode);var An=Tn&&"TextEvent"in window&&!ae,ci=Tn&&(!kt||ae&&8<ae&&11>=ae),kn=" ",qn=!1;function $a(t,n){switch(t){case"keyup":return fe.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kr=!1;function M0(t,n){switch(t){case"compositionend":return Br(n);case"keypress":return n.which!==32?null:(qn=!0,kn);case"textInput":return t=n.data,t===kn&&qn?null:t;default:return null}}function O0(t,n){if(kr)return t==="compositionend"||!kt&&$a(t,n)?(t=Js(),Xa=Zs=si=null,kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ci&&n.locale!=="ko"?null:n.data;default:return null}}var x0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!x0[t.type]:n==="textarea"}function Xd(t,n,a,l){Zi?ri?ri.push(l):ri=[l]:Zi=l,n=bu(n,"onChange"),0<n.length&&(a=new li("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var el=null,nl=null;function z0(t){Ip(t,0)}function Uo(t){var n=un(t);if(Ga(n))return t}function Kd(t,n){if(t==="change")return n}var Zd=!1;if(Tn){var Nc;if(Tn){var Mc="oninput"in document;if(!Mc){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),Mc=typeof Jd.oninput=="function"}Nc=Mc}else Nc=!1;Zd=Nc&&(!document.documentMode||9<document.documentMode)}function $d(){el&&(el.detachEvent("onpropertychange",Wd),nl=el=null)}function Wd(t){if(t.propertyName==="value"&&Uo(nl)){var n=[];Xd(n,nl,t,En(t)),Ji(z0,n)}}function U0(t,n,a){t==="focusin"?($d(),el=n,nl=a,el.attachEvent("onpropertychange",Wd)):t==="focusout"&&$d()}function L0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uo(nl)}function j0(t,n){if(t==="click")return Uo(n)}function B0(t,n){if(t==="input"||t==="change")return Uo(n)}function k0(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var hn=typeof Object.is=="function"?Object.is:k0;function il(t,n){if(hn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!pe.call(n,c)||!hn(t[c],n[c]))return!1}return!0}function tm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function em(t,n){var a=tm(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=tm(a)}}function nm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?nm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function im(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=ai(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=ai(t.document)}return n}function Oc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var q0=Tn&&"documentMode"in document&&11>=document.documentMode,qr=null,xc=null,al=null,zc=!1;function am(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zc||qr==null||qr!==ai(l)||(l=qr,"selectionStart"in l&&Oc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),al&&il(al,l)||(al=l,l=bu(xc,"onSelect"),0<l.length&&(n=new li("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=qr)))}function Wa(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Pr={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Uc={},rm={};Tn&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function tr(t){if(Uc[t])return Uc[t];if(!Pr[t])return t;var n=Pr[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in rm)return Uc[t]=n[a];return t}var sm=tr("animationend"),lm=tr("animationiteration"),om=tr("animationstart"),P0=tr("transitionrun"),H0=tr("transitionstart"),G0=tr("transitioncancel"),um=tr("transitionend"),cm=new Map,Lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lc.push("scrollEnd");function Pn(t,n){cm.set(t,n),ni(n,[t])}var Lo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Sn=[],Hr=0,jc=0;function jo(){for(var t=Hr,n=jc=Hr=0;n<t;){var a=Sn[n];Sn[n++]=null;var l=Sn[n];Sn[n++]=null;var c=Sn[n];Sn[n++]=null;var f=Sn[n];if(Sn[n++]=null,l!==null&&c!==null){var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}f!==0&&hm(a,c,f)}}function Bo(t,n,a,l){Sn[Hr++]=t,Sn[Hr++]=n,Sn[Hr++]=a,Sn[Hr++]=l,jc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Bc(t,n,a,l){return Bo(t,n,a,l),ko(t)}function er(t,n){return Bo(t,null,null,n),ko(t)}function hm(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var c=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-he(a),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=a|536870912),f):null}function ko(t){if(50<wl)throw wl=0,Xh=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Gr={};function Q0(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,n,a,l){return new Q0(t,n,a,l)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ri(t,n){var a=t.alternate;return a===null?(a=fn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function fm(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function qo(t,n,a,l,c,f){var g=0;if(l=t,typeof t=="function")kc(t)&&(g=1);else if(typeof t=="string")g=Z1(t,a,st.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case D:return t=fn(31,a,n,c),t.elementType=D,t.lanes=f,t;case et:return nr(a.children,c,f,n);case W:g=8,c|=24;break;case dt:return t=fn(12,a,n,c|2),t.elementType=dt,t.lanes=f,t;case vt:return t=fn(13,a,n,c),t.elementType=vt,t.lanes=f,t;case pt:return t=fn(19,a,n,c),t.elementType=pt,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:g=10;break t;case At:g=9;break t;case ut:g=11;break t;case R:g=14;break t;case b:g=16,l=null;break t}g=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=fn(g,a,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function nr(t,n,a,l){return t=fn(7,t,l,n),t.lanes=a,t}function qc(t,n,a){return t=fn(6,t,null,n),t.lanes=a,t}function dm(t){var n=fn(18,null,null,0);return n.stateNode=t,n}function Pc(t,n,a){return n=fn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var mm=new WeakMap;function bn(t,n){if(typeof t=="object"&&t!==null){var a=mm.get(t);return a!==void 0?a:(n={value:t,source:n,stack:zs(n)},mm.set(t,n),n)}return{value:t,source:n,stack:zs(n)}}var Qr=[],Fr=0,Po=null,rl=0,Rn=[],wn=0,ea=null,hi=1,fi="";function wi(t,n){Qr[Fr++]=rl,Qr[Fr++]=Po,Po=t,rl=n}function gm(t,n,a){Rn[wn++]=hi,Rn[wn++]=fi,Rn[wn++]=ea,ea=t;var l=hi;t=fi;var c=32-he(l)-1;l&=~(1<<c),a+=1;var f=32-he(n)+c;if(30<f){var g=c-c%5;f=(l&(1<<g)-1).toString(32),l>>=g,c-=g,hi=1<<32-he(n)+c|a<<c|l,fi=f+t}else hi=1<<f|a<<c|l,fi=t}function Hc(t){t.return!==null&&(wi(t,1),gm(t,1,0))}function Gc(t){for(;t===Po;)Po=Qr[--Fr],Qr[Fr]=null,rl=Qr[--Fr],Qr[Fr]=null;for(;t===ea;)ea=Rn[--wn],Rn[wn]=null,fi=Rn[--wn],Rn[wn]=null,hi=Rn[--wn],Rn[wn]=null}function pm(t,n){Rn[wn++]=hi,Rn[wn++]=fi,Rn[wn++]=ea,hi=n.id,fi=n.overflow,ea=t}var Be=null,te=null,xt=!1,na=null,Cn=!1,Qc=Error(r(519));function ia(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sl(bn(n,t)),Qc}function ym(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[_e]=t,n[Oe]=l,a){case"dialog":Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":case"embed":Dt("load",n);break;case"video":case"audio":for(a=0;a<Dl.length;a++)Dt(Dl[a],n);break;case"source":Dt("error",n);break;case"img":case"image":case"link":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"input":Dt("invalid",n),To(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Dt("invalid",n);break;case"textarea":Dt("invalid",n),Xi(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||xp(n.textContent,a)?(l.popover!=null&&(Dt("beforetoggle",n),Dt("toggle",n)),l.onScroll!=null&&Dt("scroll",n),l.onScrollEnd!=null&&Dt("scrollend",n),l.onClick!=null&&(n.onclick=Ln),n=!0):n=!1,n||ia(t,!0)}function _m(t){for(Be=t.return;Be;)switch(Be.tag){case 5:case 31:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Be=Be.return}}function Yr(t){if(t!==Be)return!1;if(!xt)return _m(t),xt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||cf(t.type,t.memoizedProps)),a=!a),a&&te&&ia(t),_m(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));te=Hp(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));te=Hp(t)}else n===27?(n=te,ya(t.type)?(t=gf,gf=null,te=t):te=n):te=Be?Vn(t.stateNode.nextSibling):null;return!0}function ir(){te=Be=null,xt=!1}function Fc(){var t=na;return t!==null&&(sn===null?sn=t:sn.push.apply(sn,t),na=null),t}function sl(t){na===null?na=[t]:na.push(t)}var Yc=N(null),ar=null,Ci=null;function aa(t,n,a){it(Yc,n._currentValue),n._currentValue=a}function Di(t){t._currentValue=Yc.current,X(Yc)}function Xc(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Kc(t,n,a,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var g=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var C=0;C<n.length;C++)if(E.context===n[C]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Xc(f.return,a,t),l||(g=null);break t}f=E.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(r(341));g.lanes|=a,f=g.alternate,f!==null&&(f.lanes|=a),Xc(g,a,t),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===t){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Xr(t,n,a,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var E=c.type;hn(c.pendingProps.value,g.value)||(t!==null?t.push(E):t=[E])}}else if(c===zt.current){if(g=c.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Ol):t=[Ol])}c=c.return}t!==null&&Kc(n,t,a,l),n.flags|=262144}function Ho(t){for(t=t.firstContext;t!==null;){if(!hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function rr(t){ar=t,Ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ke(t){return vm(ar,t)}function Go(t,n){return ar===null&&rr(t),vm(t,n)}function vm(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Ci===null){if(t===null)throw Error(r(308));Ci=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ci=Ci.next=n;return a}var F0=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},Y0=s.unstable_scheduleCallback,X0=s.unstable_NormalPriority,Te={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zc(){return{controller:new F0,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&Y0(X0,function(){t.controller.abort()})}var ol=null,Jc=0,Kr=0,Zr=null;function K0(t,n){if(ol===null){var a=ol=[];Jc=0,Kr=tf(),Zr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Jc++,n.then(Em,Em),n}function Em(){if(--Jc===0&&ol!==null){Zr!==null&&(Zr.status="fulfilled");var t=ol;ol=null,Kr=0,Zr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Z0(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Tm=P.S;P.S=function(t,n){ap=Je(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&K0(t,n),Tm!==null&&Tm(t,n)};var sr=N(null);function $c(){var t=sr.current;return t!==null?t:$t.pooledCache}function Qo(t,n){n===null?it(sr,sr.current):it(sr,n.pool)}function Am(){var t=$c();return t===null?null:{parent:Te._currentValue,pool:t}}var Jr=Error(r(460)),Wc=Error(r(474)),Fo=Error(r(542)),Yo={then:function(){}};function Sm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bm(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Ln,Ln),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,wm(t),t;default:if(typeof n.status=="string")n.then(Ln,Ln);else{if(t=$t,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,wm(t),t}throw or=n,Jr}}function lr(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(or=a,Jr):a}}var or=null;function Rm(){if(or===null)throw Error(r(459));var t=or;return or=null,t}function wm(t){if(t===Jr||t===Fo)throw Error(r(483))}var $r=null,ul=0;function Xo(t){var n=ul;return ul+=1,$r===null&&($r=[]),bm($r,t,n)}function cl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Ko(t,n){throw n.$$typeof===O?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Cm(t){function n(x,I){if(t){var L=x.deletions;L===null?(x.deletions=[I],x.flags|=16):L.push(I)}}function a(x,I){if(!t)return null;for(;I!==null;)n(x,I),I=I.sibling;return null}function l(x){for(var I=new Map;x!==null;)x.key!==null?I.set(x.key,x):I.set(x.index,x),x=x.sibling;return I}function c(x,I){return x=Ri(x,I),x.index=0,x.sibling=null,x}function f(x,I,L){return x.index=L,t?(L=x.alternate,L!==null?(L=L.index,L<I?(x.flags|=67108866,I):L):(x.flags|=67108866,I)):(x.flags|=1048576,I)}function g(x){return t&&x.alternate===null&&(x.flags|=67108866),x}function E(x,I,L,Q){return I===null||I.tag!==6?(I=qc(L,x.mode,Q),I.return=x,I):(I=c(I,L),I.return=x,I)}function C(x,I,L,Q){var ht=L.type;return ht===et?H(x,I,L.props.children,Q,L.key):I!==null&&(I.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&lr(ht)===I.type)?(I=c(I,L.props),cl(I,L),I.return=x,I):(I=qo(L.type,L.key,L.props,null,x.mode,Q),cl(I,L),I.return=x,I)}function j(x,I,L,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==L.containerInfo||I.stateNode.implementation!==L.implementation?(I=Pc(L,x.mode,Q),I.return=x,I):(I=c(I,L.children||[]),I.return=x,I)}function H(x,I,L,Q,ht){return I===null||I.tag!==7?(I=nr(L,x.mode,Q,ht),I.return=x,I):(I=c(I,L),I.return=x,I)}function Y(x,I,L){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=qc(""+I,x.mode,L),I.return=x,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case G:return L=qo(I.type,I.key,I.props,null,x.mode,L),cl(L,I),L.return=x,L;case $:return I=Pc(I,x.mode,L),I.return=x,I;case b:return I=lr(I),Y(x,I,L)}if(se(I)||z(I))return I=nr(I,x.mode,L,null),I.return=x,I;if(typeof I.then=="function")return Y(x,Xo(I),L);if(I.$$typeof===J)return Y(x,Go(x,I),L);Ko(x,I)}return null}function B(x,I,L,Q){var ht=I!==null?I.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ht!==null?null:E(x,I,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case G:return L.key===ht?C(x,I,L,Q):null;case $:return L.key===ht?j(x,I,L,Q):null;case b:return L=lr(L),B(x,I,L,Q)}if(se(L)||z(L))return ht!==null?null:H(x,I,L,Q,null);if(typeof L.then=="function")return B(x,I,Xo(L),Q);if(L.$$typeof===J)return B(x,I,Go(x,L),Q);Ko(x,L)}return null}function q(x,I,L,Q,ht){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return x=x.get(L)||null,E(I,x,""+Q,ht);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case G:return x=x.get(Q.key===null?L:Q.key)||null,C(I,x,Q,ht);case $:return x=x.get(Q.key===null?L:Q.key)||null,j(I,x,Q,ht);case b:return Q=lr(Q),q(x,I,L,Q,ht)}if(se(Q)||z(Q))return x=x.get(L)||null,H(I,x,Q,ht,null);if(typeof Q.then=="function")return q(x,I,L,Xo(Q),ht);if(Q.$$typeof===J)return q(x,I,L,Go(I,Q),ht);Ko(I,Q)}return null}function lt(x,I,L,Q){for(var ht=null,jt=null,ot=I,wt=I=0,It=null;ot!==null&&wt<L.length;wt++){ot.index>wt?(It=ot,ot=null):It=ot.sibling;var Bt=B(x,ot,L[wt],Q);if(Bt===null){ot===null&&(ot=It);break}t&&ot&&Bt.alternate===null&&n(x,ot),I=f(Bt,I,wt),jt===null?ht=Bt:jt.sibling=Bt,jt=Bt,ot=It}if(wt===L.length)return a(x,ot),xt&&wi(x,wt),ht;if(ot===null){for(;wt<L.length;wt++)ot=Y(x,L[wt],Q),ot!==null&&(I=f(ot,I,wt),jt===null?ht=ot:jt.sibling=ot,jt=ot);return xt&&wi(x,wt),ht}for(ot=l(ot);wt<L.length;wt++)It=q(ot,x,wt,L[wt],Q),It!==null&&(t&&It.alternate!==null&&ot.delete(It.key===null?wt:It.key),I=f(It,I,wt),jt===null?ht=It:jt.sibling=It,jt=It);return t&&ot.forEach(function(Aa){return n(x,Aa)}),xt&&wi(x,wt),ht}function mt(x,I,L,Q){if(L==null)throw Error(r(151));for(var ht=null,jt=null,ot=I,wt=I=0,It=null,Bt=L.next();ot!==null&&!Bt.done;wt++,Bt=L.next()){ot.index>wt?(It=ot,ot=null):It=ot.sibling;var Aa=B(x,ot,Bt.value,Q);if(Aa===null){ot===null&&(ot=It);break}t&&ot&&Aa.alternate===null&&n(x,ot),I=f(Aa,I,wt),jt===null?ht=Aa:jt.sibling=Aa,jt=Aa,ot=It}if(Bt.done)return a(x,ot),xt&&wi(x,wt),ht;if(ot===null){for(;!Bt.done;wt++,Bt=L.next())Bt=Y(x,Bt.value,Q),Bt!==null&&(I=f(Bt,I,wt),jt===null?ht=Bt:jt.sibling=Bt,jt=Bt);return xt&&wi(x,wt),ht}for(ot=l(ot);!Bt.done;wt++,Bt=L.next())Bt=q(ot,x,wt,Bt.value,Q),Bt!==null&&(t&&Bt.alternate!==null&&ot.delete(Bt.key===null?wt:Bt.key),I=f(Bt,I,wt),jt===null?ht=Bt:jt.sibling=Bt,jt=Bt);return t&&ot.forEach(function(lE){return n(x,lE)}),xt&&wi(x,wt),ht}function Jt(x,I,L,Q){if(typeof L=="object"&&L!==null&&L.type===et&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case G:t:{for(var ht=L.key;I!==null;){if(I.key===ht){if(ht=L.type,ht===et){if(I.tag===7){a(x,I.sibling),Q=c(I,L.props.children),Q.return=x,x=Q;break t}}else if(I.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&lr(ht)===I.type){a(x,I.sibling),Q=c(I,L.props),cl(Q,L),Q.return=x,x=Q;break t}a(x,I);break}else n(x,I);I=I.sibling}L.type===et?(Q=nr(L.props.children,x.mode,Q,L.key),Q.return=x,x=Q):(Q=qo(L.type,L.key,L.props,null,x.mode,Q),cl(Q,L),Q.return=x,x=Q)}return g(x);case $:t:{for(ht=L.key;I!==null;){if(I.key===ht)if(I.tag===4&&I.stateNode.containerInfo===L.containerInfo&&I.stateNode.implementation===L.implementation){a(x,I.sibling),Q=c(I,L.children||[]),Q.return=x,x=Q;break t}else{a(x,I);break}else n(x,I);I=I.sibling}Q=Pc(L,x.mode,Q),Q.return=x,x=Q}return g(x);case b:return L=lr(L),Jt(x,I,L,Q)}if(se(L))return lt(x,I,L,Q);if(z(L)){if(ht=z(L),typeof ht!="function")throw Error(r(150));return L=ht.call(L),mt(x,I,L,Q)}if(typeof L.then=="function")return Jt(x,I,Xo(L),Q);if(L.$$typeof===J)return Jt(x,I,Go(x,L),Q);Ko(x,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,I!==null&&I.tag===6?(a(x,I.sibling),Q=c(I,L),Q.return=x,x=Q):(a(x,I),Q=qc(L,x.mode,Q),Q.return=x,x=Q),g(x)):a(x,I)}return function(x,I,L,Q){try{ul=0;var ht=Jt(x,I,L,Q);return $r=null,ht}catch(ot){if(ot===Jr||ot===Fo)throw ot;var jt=fn(29,ot,null,x.mode);return jt.lanes=Q,jt.return=x,jt}}}var ur=Cm(!0),Dm=Cm(!1),ra=!1;function th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function sa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function la(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(qt&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=ko(t),hm(t,null,a),n}return Bo(t,l,n,a),ko(t)}function hl(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,js(t,a)}}function nh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=g:f=f.next=g,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var ih=!1;function fl(){if(ih){var t=Zr;if(t!==null)throw t}}function dl(t,n,a,l){ih=!1;var c=t.updateQueue;ra=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var C=E,j=C.next;C.next=null,g===null?f=j:g.next=j,g=C;var H=t.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==g&&(E===null?H.firstBaseUpdate=j:E.next=j,H.lastBaseUpdate=C))}if(f!==null){var Y=c.baseState;g=0,H=j=C=null,E=f;do{var B=E.lane&-536870913,q=B!==E.lane;if(q?(Vt&B)===B:(l&B)===B){B!==0&&B===Kr&&(ih=!0),H!==null&&(H=H.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var lt=t,mt=E;B=n;var Jt=a;switch(mt.tag){case 1:if(lt=mt.payload,typeof lt=="function"){Y=lt.call(Jt,Y,B);break t}Y=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=mt.payload,B=typeof lt=="function"?lt.call(Jt,Y,B):lt,B==null)break t;Y=S({},Y,B);break t;case 2:ra=!0}}B=E.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=c.callbacks,q===null?c.callbacks=[B]:q.push(B))}else q={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(j=H=q,C=Y):H=H.next=q,g|=B;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;q=E,E=q.next,q.next=null,c.lastBaseUpdate=q,c.shared.pending=null}}while(!0);H===null&&(C=Y),c.baseState=C,c.firstBaseUpdate=j,c.lastBaseUpdate=H,f===null&&(c.shared.lanes=0),fa|=g,t.lanes=g,t.memoizedState=Y}}function Vm(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Im(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Vm(a[t],n)}var Wr=N(null),Zo=N(0);function Nm(t,n){t=Li,it(Zo,t),it(Wr,n),Li=t|n.baseLanes}function ah(){it(Zo,Li),it(Wr,Wr.current)}function rh(){Li=Zo.current,X(Wr),X(Zo)}var dn=N(null),Dn=null;function oa(t){var n=t.alternate;it(de,de.current&1),it(dn,t),Dn===null&&(n===null||Wr.current!==null||n.memoizedState!==null)&&(Dn=t)}function sh(t){it(de,de.current),it(dn,t),Dn===null&&(Dn=t)}function Mm(t){t.tag===22?(it(de,de.current),it(dn,t),Dn===null&&(Dn=t)):ua()}function ua(){it(de,de.current),it(dn,dn.current)}function mn(t){X(dn),Dn===t&&(Dn=null),X(de)}var de=N(0);function Jo(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||df(a)||mf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vi=0,bt=null,Kt=null,Ae=null,$o=!1,ts=!1,cr=!1,Wo=0,ml=0,es=null,J0=0;function ue(){throw Error(r(321))}function lh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!hn(t[a],n[a]))return!1;return!0}function oh(t,n,a,l,c,f){return Vi=f,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=t===null||t.memoizedState===null?gg:Sh,cr=!1,f=a(l,c),cr=!1,ts&&(f=xm(n,a,l,c)),Om(t),f}function Om(t){P.H=yl;var n=Kt!==null&&Kt.next!==null;if(Vi=0,Ae=Kt=bt=null,$o=!1,ml=0,es=null,n)throw Error(r(300));t===null||Se||(t=t.dependencies,t!==null&&Ho(t)&&(Se=!0))}function xm(t,n,a,l){bt=t;var c=0;do{if(ts&&(es=null),ml=0,ts=!1,25<=c)throw Error(r(301));if(c+=1,Ae=Kt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}P.H=pg,f=n(a,l)}while(ts);return f}function $0(){var t=P.H,n=t.useState()[0];return n=typeof n.then=="function"?gl(n):n,t=t.useState()[0],(Kt!==null?Kt.memoizedState:null)!==t&&(bt.flags|=1024),n}function uh(){var t=Wo!==0;return Wo=0,t}function ch(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function hh(t){if($o){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}$o=!1}Vi=0,Ae=Kt=bt=null,ts=!1,ml=Wo=0,es=null}function We(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?bt.memoizedState=Ae=t:Ae=Ae.next=t,Ae}function me(){if(Kt===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var n=Ae===null?bt.memoizedState:Ae.next;if(n!==null)Ae=n,Kt=t;else{if(t===null)throw bt.alternate===null?Error(r(467)):Error(r(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Ae===null?bt.memoizedState=Ae=t:Ae=Ae.next=t}return Ae}function tu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var n=ml;return ml+=1,es===null&&(es=[]),t=bm(es,t,n),n=bt,(Ae===null?n.memoizedState:Ae.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?gg:Sh),t}function eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===J)return ke(t)}throw Error(r(438,String(t)))}function fh(t){var n=null,a=bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=bt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=tu(),bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=M;return n.index++,a}function Ii(t,n){return typeof n=="function"?n(t):n}function nu(t){var n=me();return dh(n,Kt,t)}function dh(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var E=g=null,C=null,j=n,H=!1;do{var Y=j.lane&-536870913;if(Y!==j.lane?(Vt&Y)===Y:(Vi&Y)===Y){var B=j.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Y===Kr&&(H=!0);else if((Vi&B)===B){j=j.next,B===Kr&&(H=!0);continue}else Y={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(E=C=Y,g=f):C=C.next=Y,bt.lanes|=B,fa|=B;Y=j.action,cr&&a(f,Y),f=j.hasEagerState?j.eagerState:a(f,Y)}else B={lane:Y,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(E=C=B,g=f):C=C.next=B,bt.lanes|=Y,fa|=Y;j=j.next}while(j!==null&&j!==n);if(C===null?g=f:C.next=E,!hn(f,t.memoizedState)&&(Se=!0,H&&(a=Zr,a!==null)))throw a;t.memoizedState=f,t.baseState=g,t.baseQueue=C,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function mh(t){var n=me(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var g=c=c.next;do f=t(f,g.action),g=g.next;while(g!==c);hn(f,n.memoizedState)||(Se=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,l]}function zm(t,n,a){var l=bt,c=me(),f=xt;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var g=!hn((Kt||c).memoizedState,a);if(g&&(c.memoizedState=a,Se=!0),c=c.queue,yh(jm.bind(null,l,c,t),[t]),c.getSnapshot!==n||g||Ae!==null&&Ae.memoizedState.tag&1){if(l.flags|=2048,ns(9,{destroy:void 0},Lm.bind(null,l,c,a,n),null),$t===null)throw Error(r(349));f||(Vi&127)!==0||Um(l,n,a)}return a}function Um(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=bt.updateQueue,n===null?(n=tu(),bt.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Lm(t,n,a,l){n.value=a,n.getSnapshot=l,Bm(n)&&km(t)}function jm(t,n,a){return a(function(){Bm(n)&&km(t)})}function Bm(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!hn(t,a)}catch{return!0}}function km(t){var n=er(t,2);n!==null&&ln(n,t,2)}function gh(t){var n=We();if(typeof t=="function"){var a=t;if(t=a(),cr){_n(!0);try{a()}finally{_n(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},n}function qm(t,n,a,l){return t.baseState=a,dh(t,Kt,typeof l=="function"?l:Ii)}function W0(t,n,a,l,c){if(ru(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};P.T!==null?a(!0):f.isTransition=!1,l(f),a=n.pending,a===null?(f.next=n.pending=f,Pm(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Pm(t,n){var a=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=P.T,g={};P.T=g;try{var E=a(c,l),C=P.S;C!==null&&C(g,E),Hm(t,n,E)}catch(j){ph(t,n,j)}finally{f!==null&&g.types!==null&&(f.types=g.types),P.T=f}}else try{f=a(c,l),Hm(t,n,f)}catch(j){ph(t,n,j)}}function Hm(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Gm(t,n,l)},function(l){return ph(t,n,l)}):Gm(t,n,a)}function Gm(t,n,a){n.status="fulfilled",n.value=a,Qm(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Pm(t,a)))}function ph(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Qm(n),n=n.next;while(n!==l)}t.action=null}function Qm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Fm(t,n){return n}function Ym(t,n){if(xt){var a=$t.formState;if(a!==null){t:{var l=bt;if(xt){if(te){e:{for(var c=te,f=Cn;c.nodeType!==8;){if(!f){c=null;break e}if(c=Vn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){te=Vn(c.nextSibling),l=c.data==="F!";break t}}ia(l)}l=!1}l&&(n=a[0])}}return a=We(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:n},a.queue=l,a=fg.bind(null,bt,l),l.dispatch=a,l=gh(!1),f=Ah.bind(null,bt,!1,l.queue),l=We(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,a=W0.bind(null,bt,c,f,a),c.dispatch=a,l.memoizedState=t,[n,a,!1]}function Xm(t){var n=me();return Km(n,Kt,t)}function Km(t,n,a){if(n=dh(t,n,Fm)[0],t=nu(Ii)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=gl(n)}catch(g){throw g===Jr?Fo:g}else l=n;n=me();var c=n.queue,f=c.dispatch;return a!==n.memoizedState&&(bt.flags|=2048,ns(9,{destroy:void 0},t1.bind(null,c,a),null)),[l,f,t]}function t1(t,n){t.action=n}function Zm(t){var n=me(),a=Kt;if(a!==null)return Km(n,a,t);me(),n=n.memoizedState,a=me();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function ns(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=bt.updateQueue,n===null&&(n=tu(),bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Jm(){return me().memoizedState}function iu(t,n,a,l){var c=We();bt.flags|=t,c.memoizedState=ns(1|n,{destroy:void 0},a,l===void 0?null:l)}function au(t,n,a,l){var c=me();l=l===void 0?null:l;var f=c.memoizedState.inst;Kt!==null&&l!==null&&lh(l,Kt.memoizedState.deps)?c.memoizedState=ns(n,f,a,l):(bt.flags|=t,c.memoizedState=ns(1|n,f,a,l))}function $m(t,n){iu(8390656,8,t,n)}function yh(t,n){au(2048,8,t,n)}function e1(t){bt.flags|=4;var n=bt.updateQueue;if(n===null)n=tu(),bt.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Wm(t){var n=me().memoizedState;return e1({ref:n,nextImpl:t}),function(){if((qt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function tg(t,n){return au(4,2,t,n)}function eg(t,n){return au(4,4,t,n)}function ng(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ig(t,n,a){a=a!=null?a.concat([t]):null,au(4,4,ng.bind(null,n,t),a)}function _h(){}function ag(t,n){var a=me();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&lh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function rg(t,n){var a=me();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&lh(n,l[1]))return l[0];if(l=t(),cr){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,n],l}function vh(t,n,a){return a===void 0||(Vi&1073741824)!==0&&(Vt&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=sp(),bt.lanes|=t,fa|=t,a)}function sg(t,n,a,l){return hn(a,n)?a:Wr.current!==null?(t=vh(t,a,l),hn(t,n)||(Se=!0),t):(Vi&42)===0||(Vi&1073741824)!==0&&(Vt&261930)===0?(Se=!0,t.memoizedState=a):(t=sp(),bt.lanes|=t,fa|=t,n)}function lg(t,n,a,l,c){var f=nt.p;nt.p=f!==0&&8>f?f:8;var g=P.T,E={};P.T=E,Ah(t,!1,n,a);try{var C=c(),j=P.S;if(j!==null&&j(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var H=Z0(C,l);pl(t,n,H,yn(t))}else pl(t,n,l,yn(t))}catch(Y){pl(t,n,{then:function(){},status:"rejected",reason:Y},yn())}finally{nt.p=f,g!==null&&E.types!==null&&(g.types=E.types),P.T=g}}function n1(){}function Eh(t,n,a,l){if(t.tag!==5)throw Error(r(476));var c=og(t).queue;lg(t,c,n,ct,a===null?n1:function(){return ug(t),a(l)})}function og(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:ct},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ug(t){var n=og(t);n.next===null&&(n=t.alternate.memoizedState),pl(t,n.next.queue,{},yn())}function Th(){return ke(Ol)}function cg(){return me().memoizedState}function hg(){return me().memoizedState}function i1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=yn();t=sa(a);var l=la(n,t,a);l!==null&&(ln(l,n,a),hl(l,n,a)),n={cache:Zc()},t.payload=n;return}n=n.return}}function a1(t,n,a){var l=yn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ru(t)?dg(n,a):(a=Bc(t,n,a,l),a!==null&&(ln(a,t,l),mg(a,n,l)))}function fg(t,n,a){var l=yn();pl(t,n,a,l)}function pl(t,n,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ru(t))dg(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var g=n.lastRenderedState,E=f(g,a);if(c.hasEagerState=!0,c.eagerState=E,hn(E,g))return Bo(t,n,c,0),$t===null&&jo(),!1}catch{}if(a=Bc(t,n,c,l),a!==null)return ln(a,t,l),mg(a,n,l),!0}return!1}function Ah(t,n,a,l){if(l={lane:2,revertLane:tf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ru(t)){if(n)throw Error(r(479))}else n=Bc(t,a,l,2),n!==null&&ln(n,t,2)}function ru(t){var n=t.alternate;return t===bt||n!==null&&n===bt}function dg(t,n){ts=$o=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function mg(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,js(t,a)}}var yl={readContext:ke,use:eu,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue,useHostTransitionStatus:ue,useFormState:ue,useActionState:ue,useOptimistic:ue,useMemoCache:ue,useCacheRefresh:ue};yl.useEffectEvent=ue;var gg={readContext:ke,use:eu,useCallback:function(t,n){return We().memoizedState=[t,n===void 0?null:n],t},useContext:ke,useEffect:$m,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,iu(4194308,4,ng.bind(null,n,t),a)},useLayoutEffect:function(t,n){return iu(4194308,4,t,n)},useInsertionEffect:function(t,n){iu(4,2,t,n)},useMemo:function(t,n){var a=We();n=n===void 0?null:n;var l=t();if(cr){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=We();if(a!==void 0){var c=a(n);if(cr){_n(!0);try{a(n)}finally{_n(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=a1.bind(null,bt,t),[l.memoizedState,t]},useRef:function(t){var n=We();return t={current:t},n.memoizedState=t},useState:function(t){t=gh(t);var n=t.queue,a=fg.bind(null,bt,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:_h,useDeferredValue:function(t,n){var a=We();return vh(a,t,n)},useTransition:function(){var t=gh(!1);return t=lg.bind(null,bt,t.queue,!0,!1),We().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=bt,c=We();if(xt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),$t===null)throw Error(r(349));(Vt&127)!==0||Um(l,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,$m(jm.bind(null,l,f,t),[t]),l.flags|=2048,ns(9,{destroy:void 0},Lm.bind(null,l,f,a,n),null),a},useId:function(){var t=We(),n=$t.identifierPrefix;if(xt){var a=fi,l=hi;a=(l&~(1<<32-he(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Wo++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=J0++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Th,useFormState:Ym,useActionState:Ym,useOptimistic:function(t){var n=We();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ah.bind(null,bt,!0,a),a.dispatch=n,[t,n]},useMemoCache:fh,useCacheRefresh:function(){return We().memoizedState=i1.bind(null,bt)},useEffectEvent:function(t){var n=We(),a={impl:t};return n.memoizedState=a,function(){if((qt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Sh={readContext:ke,use:eu,useCallback:ag,useContext:ke,useEffect:yh,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:eg,useMemo:rg,useReducer:nu,useRef:Jm,useState:function(){return nu(Ii)},useDebugValue:_h,useDeferredValue:function(t,n){var a=me();return sg(a,Kt.memoizedState,t,n)},useTransition:function(){var t=nu(Ii)[0],n=me().memoizedState;return[typeof t=="boolean"?t:gl(t),n]},useSyncExternalStore:zm,useId:cg,useHostTransitionStatus:Th,useFormState:Xm,useActionState:Xm,useOptimistic:function(t,n){var a=me();return qm(a,Kt,t,n)},useMemoCache:fh,useCacheRefresh:hg};Sh.useEffectEvent=Wm;var pg={readContext:ke,use:eu,useCallback:ag,useContext:ke,useEffect:yh,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:eg,useMemo:rg,useReducer:mh,useRef:Jm,useState:function(){return mh(Ii)},useDebugValue:_h,useDeferredValue:function(t,n){var a=me();return Kt===null?vh(a,t,n):sg(a,Kt.memoizedState,t,n)},useTransition:function(){var t=mh(Ii)[0],n=me().memoizedState;return[typeof t=="boolean"?t:gl(t),n]},useSyncExternalStore:zm,useId:cg,useHostTransitionStatus:Th,useFormState:Zm,useActionState:Zm,useOptimistic:function(t,n){var a=me();return Kt!==null?qm(a,Kt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:fh,useCacheRefresh:hg};pg.useEffectEvent=Wm;function bh(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:S({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Rh={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=yn(),c=sa(l);c.payload=n,a!=null&&(c.callback=a),n=la(t,c,l),n!==null&&(ln(n,t,l),hl(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=yn(),c=sa(l);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=la(t,c,l),n!==null&&(ln(n,t,l),hl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=yn(),l=sa(a);l.tag=2,n!=null&&(l.callback=n),n=la(t,l,a),n!==null&&(ln(n,t,a),hl(n,t,a))}};function yg(t,n,a,l,c,f,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,g):n.prototype&&n.prototype.isPureReactComponent?!il(a,l)||!il(c,f):!0}function _g(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&Rh.enqueueReplaceState(n,n.state,null)}function hr(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=S({},a));for(var c in t)a[c]===void 0&&(a[c]=t[c])}return a}function vg(t){Lo(t)}function Eg(t){console.error(t)}function Tg(t){Lo(t)}function su(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Ag(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function wh(t,n,a){return a=sa(a),a.tag=3,a.payload={element:null},a.callback=function(){su(t,n)},a}function Sg(t){return t=sa(t),t.tag=3,t}function bg(t,n,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){Ag(n,a,l)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){Ag(n,a,l),typeof c!="function"&&(da===null?da=new Set([this]):da.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function r1(t,n,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Xr(n,a,c,!0),a=dn.current,a!==null){switch(a.tag){case 31:case 13:return Dn===null?_u():a.alternate===null&&ce===0&&(ce=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===Yo?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Jh(t,l,c)),!1;case 22:return a.flags|=65536,l===Yo?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Jh(t,l,c)),!1}throw Error(r(435,a.tag))}return Jh(t,l,c),_u(),!1}if(xt)return n=dn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==Qc&&(t=Error(r(422),{cause:l}),sl(bn(t,a)))):(l!==Qc&&(n=Error(r(423),{cause:l}),sl(bn(n,a))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=bn(l,a),c=wh(t.stateNode,l,c),nh(t,c),ce!==4&&(ce=2)),!1;var f=Error(r(520),{cause:l});if(f=bn(f,a),Rl===null?Rl=[f]:Rl.push(f),ce!==4&&(ce=2),n===null)return!0;l=bn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=c&-c,a.lanes|=t,t=wh(a.stateNode,l,t),nh(a,t),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(da===null||!da.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Sg(c),bg(c,t,a,l),nh(a,c),!1}a=a.return}while(a!==null);return!1}var Ch=Error(r(461)),Se=!1;function qe(t,n,a,l){n.child=t===null?Dm(n,null,a,l):ur(n,t.child,a,l)}function Rg(t,n,a,l,c){a=a.render;var f=n.ref;if("ref"in l){var g={};for(var E in l)E!=="ref"&&(g[E]=l[E])}else g=l;return rr(n),l=oh(t,n,a,g,f,c),E=uh(),t!==null&&!Se?(ch(t,n,c),Ni(t,n,c)):(xt&&E&&Hc(n),n.flags|=1,qe(t,n,l,c),n.child)}function wg(t,n,a,l,c){if(t===null){var f=a.type;return typeof f=="function"&&!kc(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,Cg(t,n,f,l,c)):(t=qo(a.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!zh(t,c)){var g=f.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(g,l)&&t.ref===n.ref)return Ni(t,n,c)}return n.flags|=1,t=Ri(f,l),t.ref=n.ref,t.return=n,n.child=t}function Cg(t,n,a,l,c){if(t!==null){var f=t.memoizedProps;if(il(f,l)&&t.ref===n.ref)if(Se=!1,n.pendingProps=l=f,zh(t,c))(t.flags&131072)!==0&&(Se=!0);else return n.lanes=t.lanes,Ni(t,n,c)}return Dh(t,n,a,l,c)}function Dg(t,n,a,l){var c=l.children,f=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=n.child=t.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~f}else l=0,n.child=null;return Vg(t,n,f,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qo(n,f!==null?f.cachePool:null),f!==null?Nm(n,f):ah(),Mm(n);else return l=n.lanes=536870912,Vg(t,n,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(Qo(n,f.cachePool),Nm(n,f),ua(),n.memoizedState=null):(t!==null&&Qo(n,null),ah(),ua());return qe(t,n,c,a),n.child}function _l(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Vg(t,n,a,l,c){var f=$c();return f=f===null?null:{parent:Te._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},t!==null&&Qo(n,null),ah(),Mm(n),t!==null&&Xr(t,n,l,!0),n.childLanes=c,null}function lu(t,n){return n=uu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Ig(t,n,a){return ur(n,t.child,null,a),t=lu(n,n.pendingProps),t.flags|=2,mn(n),n.memoizedState=null,t}function s1(t,n,a){var l=n.pendingProps,c=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(xt){if(l.mode==="hidden")return t=lu(n,l),n.lanes=536870912,_l(null,t);if(sh(n),(t=te)?(t=Pp(t,Cn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ea!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},a=dm(t),a.return=n,n.child=a,Be=n,te=null)):t=null,t===null)throw ia(n);return n.lanes=536870912,null}return lu(n,l)}var f=t.memoizedState;if(f!==null){var g=f.dehydrated;if(sh(n),c)if(n.flags&256)n.flags&=-257,n=Ig(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(Se||Xr(t,n,a,!1),c=(a&t.childLanes)!==0,Se||c){if(l=$t,l!==null&&(g=Bs(l,a),g!==0&&g!==f.retryLane))throw f.retryLane=g,er(t,g),ln(l,t,g),Ch;_u(),n=Ig(t,n,a)}else t=f.treeContext,te=Vn(g.nextSibling),Be=n,xt=!0,na=null,Cn=!1,t!==null&&pm(n,t),n=lu(n,l),n.flags|=4096;return n}return t=Ri(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function ou(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Dh(t,n,a,l,c){return rr(n),a=oh(t,n,a,l,void 0,c),l=uh(),t!==null&&!Se?(ch(t,n,c),Ni(t,n,c)):(xt&&l&&Hc(n),n.flags|=1,qe(t,n,a,c),n.child)}function Ng(t,n,a,l,c,f){return rr(n),n.updateQueue=null,a=xm(n,l,a,c),Om(t),l=uh(),t!==null&&!Se?(ch(t,n,f),Ni(t,n,f)):(xt&&l&&Hc(n),n.flags|=1,qe(t,n,a,f),n.child)}function Mg(t,n,a,l,c){if(rr(n),n.stateNode===null){var f=Gr,g=a.contextType;typeof g=="object"&&g!==null&&(f=ke(g)),f=new a(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Rh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},th(n),g=a.contextType,f.context=typeof g=="object"&&g!==null?ke(g):Gr,f.state=n.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(bh(n,a,g,l),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&Rh.enqueueReplaceState(f,f.state,null),dl(n,l,f,c),fl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var E=n.memoizedProps,C=hr(a,E);f.props=C;var j=f.context,H=a.contextType;g=Gr,typeof H=="object"&&H!==null&&(g=ke(H));var Y=a.getDerivedStateFromProps;H=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,H||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||j!==g)&&_g(n,f,l,g),ra=!1;var B=n.memoizedState;f.state=B,dl(n,l,f,c),fl(),j=n.memoizedState,E||B!==j||ra?(typeof Y=="function"&&(bh(n,a,Y,l),j=n.memoizedState),(C=ra||yg(n,a,C,l,B,j,g))?(H||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=j),f.props=l,f.state=j,f.context=g,l=C):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,eh(t,n),g=n.memoizedProps,H=hr(a,g),f.props=H,Y=n.pendingProps,B=f.context,j=a.contextType,C=Gr,typeof j=="object"&&j!==null&&(C=ke(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==Y||B!==C)&&_g(n,f,l,C),ra=!1,B=n.memoizedState,f.state=B,dl(n,l,f,c),fl();var q=n.memoizedState;g!==Y||B!==q||ra||t!==null&&t.dependencies!==null&&Ho(t.dependencies)?(typeof E=="function"&&(bh(n,a,E,l),q=n.memoizedState),(H=ra||yg(n,a,H,l,B,q,C)||t!==null&&t.dependencies!==null&&Ho(t.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,q,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,q,C)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=q),f.props=l,f.state=q,f.context=C,l=H):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,ou(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=ur(n,t.child,null,c),n.child=ur(n,null,a,c)):qe(t,n,a,c),n.memoizedState=f.state,t=n.child):t=Ni(t,n,c),t}function Og(t,n,a,l){return ir(),n.flags|=256,qe(t,n,a,l),n.child}var Vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ih(t){return{baseLanes:t,cachePool:Am()}}function Nh(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=pn),t}function xg(t,n,a){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,g;if((g=f)||(g=t!==null&&t.memoizedState===null?!1:(de.current&2)!==0),g&&(c=!0,n.flags&=-129),g=(n.flags&32)!==0,n.flags&=-33,t===null){if(xt){if(c?oa(n):ua(),(t=te)?(t=Pp(t,Cn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ea!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},a=dm(t),a.return=n,n.child=a,Be=n,te=null)):t=null,t===null)throw ia(n);return mf(t)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,c?(ua(),c=n.mode,E=uu({mode:"hidden",children:E},c),l=nr(l,c,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=Ih(a),l.childLanes=Nh(t,g,a),n.memoizedState=Vh,_l(null,l)):(oa(n),Mh(n,E))}var C=t.memoizedState;if(C!==null&&(E=C.dehydrated,E!==null)){if(f)n.flags&256?(oa(n),n.flags&=-257,n=Oh(t,n,a)):n.memoizedState!==null?(ua(),n.child=t.child,n.flags|=128,n=null):(ua(),E=l.fallback,c=n.mode,l=uu({mode:"visible",children:l.children},c),E=nr(E,c,a,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,ur(n,t.child,null,a),l=n.child,l.memoizedState=Ih(a),l.childLanes=Nh(t,g,a),n.memoizedState=Vh,n=_l(null,l));else if(oa(n),mf(E)){if(g=E.nextSibling&&E.nextSibling.dataset,g)var j=g.dgst;g=j,l=Error(r(419)),l.stack="",l.digest=g,sl({value:l,source:null,stack:null}),n=Oh(t,n,a)}else if(Se||Xr(t,n,a,!1),g=(a&t.childLanes)!==0,Se||g){if(g=$t,g!==null&&(l=Bs(g,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,er(t,l),ln(g,t,l),Ch;df(E)||_u(),n=Oh(t,n,a)}else df(E)?(n.flags|=192,n.child=t.child,n=null):(t=C.treeContext,te=Vn(E.nextSibling),Be=n,xt=!0,na=null,Cn=!1,t!==null&&pm(n,t),n=Mh(n,l.children),n.flags|=4096);return n}return c?(ua(),E=l.fallback,c=n.mode,C=t.child,j=C.sibling,l=Ri(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,j!==null?E=Ri(j,E):(E=nr(E,c,a,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,_l(null,l),l=n.child,E=t.child.memoizedState,E===null?E=Ih(a):(c=E.cachePool,c!==null?(C=Te._currentValue,c=c.parent!==C?{parent:C,pool:C}:c):c=Am(),E={baseLanes:E.baseLanes|a,cachePool:c}),l.memoizedState=E,l.childLanes=Nh(t,g,a),n.memoizedState=Vh,_l(t.child,l)):(oa(n),a=t.child,t=a.sibling,a=Ri(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(g=n.deletions,g===null?(n.deletions=[t],n.flags|=16):g.push(t)),n.child=a,n.memoizedState=null,a)}function Mh(t,n){return n=uu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function uu(t,n){return t=fn(22,t,null,n),t.lanes=0,t}function Oh(t,n,a){return ur(n,t.child,null,a),t=Mh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function zg(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Xc(t.return,n,a)}function xh(t,n,a,l,c,f){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:f}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=c,g.treeForkCount=f)}function Ug(t,n,a){var l=n.pendingProps,c=l.revealOrder,f=l.tail;l=l.children;var g=de.current,E=(g&2)!==0;if(E?(g=g&1|2,n.flags|=128):g&=1,it(de,g),qe(t,n,l,a),l=xt?rl:0,!E&&t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zg(t,a,n);else if(t.tag===19)zg(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(a=n.child,c=null;a!==null;)t=a.alternate,t!==null&&Jo(t)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),xh(n,!1,c,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&Jo(t)===null){n.child=c;break}t=c.sibling,c.sibling=a,a=c,c=t}xh(n,!0,a,null,f,l);break;case"together":xh(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ni(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),fa|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Xr(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=Ri(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=Ri(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function zh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Ho(t)))}function l1(t,n,a){switch(n.tag){case 3:Ve(n,n.stateNode.containerInfo),aa(n,Te,t.memoizedState.cache),ir();break;case 27:case 5:La(n);break;case 4:Ve(n,n.stateNode.containerInfo);break;case 10:aa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,sh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(oa(n),n.flags|=128,null):(a&n.child.childLanes)!==0?xg(t,n,a):(oa(n),t=Ni(t,n,a),t!==null?t.sibling:null);oa(n);break;case 19:var c=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Xr(t,n,a,!1),l=(a&n.childLanes)!==0),c){if(l)return Ug(t,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),it(de,de.current),l)break;return null;case 22:return n.lanes=0,Dg(t,n,a,n.pendingProps);case 24:aa(n,Te,t.memoizedState.cache)}return Ni(t,n,a)}function Lg(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Se=!0;else{if(!zh(t,a)&&(n.flags&128)===0)return Se=!1,l1(t,n,a);Se=(t.flags&131072)!==0}else Se=!1,xt&&(n.flags&1048576)!==0&&gm(n,rl,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(t=lr(n.elementType),n.type=t,typeof t=="function")kc(t)?(l=hr(t,l),n.tag=1,n=Mg(null,n,t,l,a)):(n.tag=0,n=Dh(null,n,t,l,a));else{if(t!=null){var c=t.$$typeof;if(c===ut){n.tag=11,n=Rg(null,n,t,l,a);break t}else if(c===R){n.tag=14,n=wg(null,n,t,l,a);break t}}throw n=Yt(t)||t,Error(r(306,n,""))}}return n;case 0:return Dh(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,c=hr(l,n.pendingProps),Mg(t,n,l,c,a);case 3:t:{if(Ve(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,eh(t,n),dl(n,l,null,a);var g=n.memoizedState;if(l=g.cache,aa(n,Te,l),l!==f.cache&&Kc(n,[Te],a,!0),fl(),l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Og(t,n,l,a);break t}else if(l!==c){c=bn(Error(r(424)),n),sl(c),n=Og(t,n,l,a);break t}else for(t=n.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,te=Vn(t.firstChild),Be=n,xt=!0,na=null,Cn=!0,a=Dm(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ir(),l===c){n=Ni(t,n,a);break t}qe(t,n,l,a)}n=n.child}return n;case 26:return ou(t,n),t===null?(a=Xp(n.type,null,n.pendingProps,null))?n.memoizedState=a:xt||(a=n.type,t=n.pendingProps,l=Ru(Rt.current).createElement(a),l[_e]=n,l[Oe]=t,Pe(l,a,t),ve(l),n.stateNode=l):n.memoizedState=Xp(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return La(n),t===null&&xt&&(l=n.stateNode=Qp(n.type,n.pendingProps,Rt.current),Be=n,Cn=!0,c=te,ya(n.type)?(gf=c,te=Vn(l.firstChild)):te=c),qe(t,n,n.pendingProps.children,a),ou(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&xt&&((c=l=te)&&(l=L1(l,n.type,n.pendingProps,Cn),l!==null?(n.stateNode=l,Be=n,te=Vn(l.firstChild),Cn=!1,c=!0):c=!1),c||ia(n)),La(n),c=n.type,f=n.pendingProps,g=t!==null?t.memoizedProps:null,l=f.children,cf(c,f)?l=null:g!==null&&cf(c,g)&&(n.flags|=32),n.memoizedState!==null&&(c=oh(t,n,$0,null,null,a),Ol._currentValue=c),ou(t,n),qe(t,n,l,a),n.child;case 6:return t===null&&xt&&((t=a=te)&&(a=j1(a,n.pendingProps,Cn),a!==null?(n.stateNode=a,Be=n,te=null,t=!0):t=!1),t||ia(n)),null;case 13:return xg(t,n,a);case 4:return Ve(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ur(n,null,l,a):qe(t,n,l,a),n.child;case 11:return Rg(t,n,n.type,n.pendingProps,a);case 7:return qe(t,n,n.pendingProps,a),n.child;case 8:return qe(t,n,n.pendingProps.children,a),n.child;case 12:return qe(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,aa(n,n.type,l.value),qe(t,n,l.children,a),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,rr(n),c=ke(c),l=l(c),n.flags|=1,qe(t,n,l,a),n.child;case 14:return wg(t,n,n.type,n.pendingProps,a);case 15:return Cg(t,n,n.type,n.pendingProps,a);case 19:return Ug(t,n,a);case 31:return s1(t,n,a);case 22:return Dg(t,n,a,n.pendingProps);case 24:return rr(n),l=ke(Te),t===null?(c=$c(),c===null&&(c=$t,f=Zc(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:l,cache:c},th(n),aa(n,Te,c)):((t.lanes&a)!==0&&(eh(t,n),dl(n,null,null,a),fl()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),aa(n,Te,l)):(l=f.cache,aa(n,Te,l),l!==c.cache&&Kc(n,[Te],a,!0))),qe(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Mi(t){t.flags|=4}function Uh(t,n,a,l,c){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(c&335544128)===c)if(t.stateNode.complete)t.flags|=8192;else if(cp())t.flags|=8192;else throw or=Yo,Wc}else t.flags&=-16777217}function jg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wp(n))if(cp())t.flags|=8192;else throw or=Yo,Wc}function cu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?po():536870912,t.lanes|=n,ss|=n)}function vl(t,n){if(!xt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ee(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function o1(t,n,a){var l=n.pendingProps;switch(Gc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ee(n),null;case 1:return ee(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Di(Te),ie(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Yr(n)?Mi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Fc())),ee(n),null;case 26:var c=n.type,f=n.memoizedState;return t===null?(Mi(n),f!==null?(ee(n),jg(n,f)):(ee(n),Uh(n,c,null,l,a))):f?f!==t.memoizedState?(Mi(n),ee(n),jg(n,f)):(ee(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&Mi(n),ee(n),Uh(n,c,t,l,a)),null;case 27:if(Rr(n),a=Rt.current,c=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Mi(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ee(n),null}t=st.current,Yr(n)?ym(n):(t=Qp(c,l,a),n.stateNode=t,Mi(n))}return ee(n),null;case 5:if(Rr(n),c=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Mi(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ee(n),null}if(f=st.current,Yr(n))ym(n);else{var g=Ru(Rt.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?g.createElement("select",{is:l.is}):g.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?g.createElement(c,{is:l.is}):g.createElement(c)}}f[_e]=n,f[Oe]=l;t:for(g=n.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===n)break t;for(;g.sibling===null;){if(g.return===null||g.return===n)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}n.stateNode=f;t:switch(Pe(f,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Mi(n)}}return ee(n),Uh(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Mi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=Rt.current,Yr(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,c=Be,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[_e]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||xp(t.nodeValue,a)),t||ia(n,!0)}else t=Ru(t).createTextNode(l),t[_e]=n,n.stateNode=t}return ee(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Yr(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[_e]=n}else ir(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ee(n),t=!1}else a=Fc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(mn(n),n):(mn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return ee(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=Yr(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(r(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[_e]=n}else ir(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ee(n),c=!1}else c=Fc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(mn(n),n):(mn(n),null)}return mn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),cu(n,n.updateQueue),ee(n),null);case 4:return ie(),t===null&&rf(n.stateNode.containerInfo),ee(n),null;case 10:return Di(n.type),ee(n),null;case 19:if(X(de),l=n.memoizedState,l===null)return ee(n),null;if(c=(n.flags&128)!==0,f=l.rendering,f===null)if(c)vl(l,!1);else{if(ce!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=Jo(t),f!==null){for(n.flags|=128,vl(l,!1),t=f.updateQueue,n.updateQueue=t,cu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)fm(a,t),a=a.sibling;return it(de,de.current&1|2),xt&&wi(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Je()>gu&&(n.flags|=128,c=!0,vl(l,!1),n.lanes=4194304)}else{if(!c)if(t=Jo(f),t!==null){if(n.flags|=128,c=!0,t=t.updateQueue,n.updateQueue=t,cu(n,t),vl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!xt)return ee(n),null}else 2*Je()-l.renderingStartTime>gu&&a!==536870912&&(n.flags|=128,c=!0,vl(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(t=l.last,t!==null?t.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Je(),t.sibling=null,a=de.current,it(de,c?a&1|2:a&1),xt&&wi(n,l.treeForkCount),t):(ee(n),null);case 22:case 23:return mn(n),rh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(ee(n),n.subtreeFlags&6&&(n.flags|=8192)):ee(n),a=n.updateQueue,a!==null&&cu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&X(sr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Di(Te),ee(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function u1(t,n){switch(Gc(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Di(Te),ie(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Rr(n),null;case 31:if(n.memoizedState!==null){if(mn(n),n.alternate===null)throw Error(r(340));ir()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(mn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ir()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return X(de),null;case 4:return ie(),null;case 10:return Di(n.type),null;case 22:case 23:return mn(n),rh(),t!==null&&X(sr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Di(Te),null;case 25:return null;default:return null}}function Bg(t,n){switch(Gc(n),n.tag){case 3:Di(Te),ie();break;case 26:case 27:case 5:Rr(n);break;case 4:ie();break;case 31:n.memoizedState!==null&&mn(n);break;case 13:mn(n);break;case 19:X(de);break;case 10:Di(n.type);break;case 22:case 23:mn(n),rh(),t!==null&&X(sr);break;case 24:Di(Te)}}function El(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&t)===t){l=void 0;var f=a.create,g=a.inst;l=f(),g.destroy=l}a=a.next}while(a!==c)}}catch(E){Ft(n,n.return,E)}}function ca(t,n,a){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var g=l.inst,E=g.destroy;if(E!==void 0){g.destroy=void 0,c=n;var C=a,j=E;try{j()}catch(H){Ft(c,C,H)}}}l=l.next}while(l!==f)}}catch(H){Ft(n,n.return,H)}}function kg(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Im(n,a)}catch(l){Ft(t,t.return,l)}}}function qg(t,n,a){a.props=hr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ft(t,n,l)}}function Tl(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(c){Ft(t,n,c)}}function di(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){Ft(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ft(t,n,c)}else a.current=null}function Pg(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){Ft(t,t.return,c)}}function Lh(t,n,a){try{var l=t.stateNode;N1(l,t.type,a,n),l[Oe]=n}catch(c){Ft(t,t.return,c)}}function Hg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ya(t.type)||t.tag===4}function jh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Hg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ya(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ln));else if(l!==4&&(l===27&&ya(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(Bh(t,n,a),t=t.sibling;t!==null;)Bh(t,n,a),t=t.sibling}function hu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ya(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(hu(t,n,a),t=t.sibling;t!==null;)hu(t,n,a),t=t.sibling}function Gg(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Pe(n,l,a),n[_e]=t,n[Oe]=a}catch(f){Ft(t,t.return,f)}}var Oi=!1,be=!1,kh=!1,Qg=typeof WeakSet=="function"?WeakSet:Set,ze=null;function c1(t,n){if(t=t.containerInfo,of=Mu,t=im(t),Oc(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var g=0,E=-1,C=-1,j=0,H=0,Y=t,B=null;e:for(;;){for(var q;Y!==a||c!==0&&Y.nodeType!==3||(E=g+c),Y!==f||l!==0&&Y.nodeType!==3||(C=g+l),Y.nodeType===3&&(g+=Y.nodeValue.length),(q=Y.firstChild)!==null;)B=Y,Y=q;for(;;){if(Y===t)break e;if(B===a&&++j===c&&(E=g),B===f&&++H===l&&(C=g),(q=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=q}a=E===-1||C===-1?null:{start:E,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(uf={focusedElem:t,selectionRange:a},Mu=!1,ze=n;ze!==null;)if(n=ze,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ze=t;else for(;ze!==null;){switch(n=ze,f=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)c=t[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var lt=hr(a.type,c);t=l.getSnapshotBeforeUpdate(lt,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(mt){Ft(a,a.return,mt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,ze=t;break}ze=n.return}}function Fg(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:zi(t,a),l&4&&El(5,a);break;case 1:if(zi(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(g){Ft(a,a.return,g)}else{var c=hr(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(g){Ft(a,a.return,g)}}l&64&&kg(a),l&512&&Tl(a,a.return);break;case 3:if(zi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Im(t,n)}catch(g){Ft(a,a.return,g)}}break;case 27:n===null&&l&4&&Gg(a);case 26:case 5:zi(t,a),n===null&&l&4&&Pg(a),l&512&&Tl(a,a.return);break;case 12:zi(t,a);break;case 31:zi(t,a),l&4&&Kg(t,a);break;case 13:zi(t,a),l&4&&Zg(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=v1.bind(null,a),B1(t,a))));break;case 22:if(l=a.memoizedState!==null||Oi,!l){n=n!==null&&n.memoizedState!==null||be,c=Oi;var f=be;Oi=l,(be=n)&&!f?Ui(t,a,(a.subtreeFlags&8772)!==0):zi(t,a),Oi=c,be=f}break;case 30:break;default:zi(t,a)}}function Yg(t){var n=t.alternate;n!==null&&(t.alternate=null,Yg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ir(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var re=null,nn=!1;function xi(t,n,a){for(a=a.child;a!==null;)Xg(t,n,a),a=a.sibling}function Xg(t,n,a){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(On,a)}catch{}switch(a.tag){case 26:be||di(a,n),xi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:be||di(a,n);var l=re,c=nn;ya(a.type)&&(re=a.stateNode,nn=!1),xi(t,n,a),Il(a.stateNode),re=l,nn=c;break;case 5:be||di(a,n);case 6:if(l=re,c=nn,re=null,xi(t,n,a),re=l,nn=c,re!==null)if(nn)try{(re.nodeType===9?re.body:re.nodeName==="HTML"?re.ownerDocument.body:re).removeChild(a.stateNode)}catch(f){Ft(a,n,f)}else try{re.removeChild(a.stateNode)}catch(f){Ft(a,n,f)}break;case 18:re!==null&&(nn?(t=re,kp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ms(t)):kp(re,a.stateNode));break;case 4:l=re,c=nn,re=a.stateNode.containerInfo,nn=!0,xi(t,n,a),re=l,nn=c;break;case 0:case 11:case 14:case 15:ca(2,a,n),be||ca(4,a,n),xi(t,n,a);break;case 1:be||(di(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&qg(a,n,l)),xi(t,n,a);break;case 21:xi(t,n,a);break;case 22:be=(l=be)||a.memoizedState!==null,xi(t,n,a),be=l;break;default:xi(t,n,a)}}function Kg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ms(t)}catch(a){Ft(n,n.return,a)}}}function Zg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ms(t)}catch(a){Ft(n,n.return,a)}}function h1(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Qg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Qg),n;default:throw Error(r(435,t.tag))}}function fu(t,n){var a=h1(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var c=E1.bind(null,t,l);l.then(c,c)}})}function an(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],f=t,g=n,E=g;t:for(;E!==null;){switch(E.tag){case 27:if(ya(E.type)){re=E.stateNode,nn=!1;break t}break;case 5:re=E.stateNode,nn=!1;break t;case 3:case 4:re=E.stateNode.containerInfo,nn=!0;break t}E=E.return}if(re===null)throw Error(r(160));Xg(f,g,c),re=null,nn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Jg(n,t),n=n.sibling}var Hn=null;function Jg(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:an(n,t),rn(t),l&4&&(ca(3,t,t.return),El(3,t),ca(5,t,t.return));break;case 1:an(n,t),rn(t),l&512&&(be||a===null||di(a,a.return)),l&64&&Oi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=Hn;if(an(n,t),rn(t),l&512&&(be||a===null||di(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){t:{l=t.type,a=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Wn]||f[_e]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),Pe(f,l,a),f[_e]=t,ve(f),l=f;break t;case"link":var g=Jp("link","href",c).get(l+(a.href||""));if(g){for(var E=0;E<g.length;E++)if(f=g[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(E,1);break e}}f=c.createElement(l),Pe(f,l,a),c.head.appendChild(f);break;case"meta":if(g=Jp("meta","content",c).get(l+(a.content||""))){for(E=0;E<g.length;E++)if(f=g[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(E,1);break e}}f=c.createElement(l),Pe(f,l,a),c.head.appendChild(f);break;default:throw Error(r(468,l))}f[_e]=t,ve(f),l=f}t.stateNode=l}else $p(c,t.type,t.stateNode);else t.stateNode=Zp(c,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?$p(c,t.type,t.stateNode):Zp(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Lh(t,t.memoizedProps,a.memoizedProps)}break;case 27:an(n,t),rn(t),l&512&&(be||a===null||di(a,a.return)),a!==null&&l&4&&Lh(t,t.memoizedProps,a.memoizedProps);break;case 5:if(an(n,t),rn(t),l&512&&(be||a===null||di(a,a.return)),t.flags&32){c=t.stateNode;try{en(c,"")}catch(lt){Ft(t,t.return,lt)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Lh(t,c,a!==null?a.memoizedProps:c)),l&1024&&(kh=!0);break;case 6:if(an(n,t),rn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(lt){Ft(t,t.return,lt)}}break;case 3:if(Du=null,c=Hn,Hn=wu(n.containerInfo),an(n,t),Hn=c,rn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ms(n.containerInfo)}catch(lt){Ft(t,t.return,lt)}kh&&(kh=!1,$g(t));break;case 4:l=Hn,Hn=wu(t.stateNode.containerInfo),an(n,t),rn(t),Hn=l;break;case 12:an(n,t),rn(t);break;case 31:an(n,t),rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fu(t,l)));break;case 13:an(n,t),rn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mu=Je()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fu(t,l)));break;case 22:c=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,j=Oi,H=be;if(Oi=j||c,be=H||C,an(n,t),be=H,Oi=j,rn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||C||Oi||be||fr(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){C=a=n;try{if(f=C.stateNode,c)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{E=C.stateNode;var Y=C.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(lt){Ft(C,C.return,lt)}}}else if(n.tag===6){if(a===null){C=n;try{C.stateNode.nodeValue=c?"":C.memoizedProps}catch(lt){Ft(C,C.return,lt)}}}else if(n.tag===18){if(a===null){C=n;try{var q=C.stateNode;c?qp(q,!0):qp(C.stateNode,!1)}catch(lt){Ft(C,C.return,lt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,fu(t,a))));break;case 19:an(n,t),rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fu(t,l)));break;case 30:break;case 21:break;default:an(n,t),rn(t)}}function rn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(Hg(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,f=jh(t);hu(t,f,c);break;case 5:var g=a.stateNode;a.flags&32&&(en(g,""),a.flags&=-33);var E=jh(t);hu(t,E,g);break;case 3:case 4:var C=a.stateNode.containerInfo,j=jh(t);Bh(t,j,C);break;default:throw Error(r(161))}}catch(H){Ft(t,t.return,H)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function $g(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;$g(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function zi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Fg(t,n.alternate,n),n=n.sibling}function fr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ca(4,n,n.return),fr(n);break;case 1:di(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&qg(n,n.return,a),fr(n);break;case 27:Il(n.stateNode);case 26:case 5:di(n,n.return),fr(n);break;case 22:n.memoizedState===null&&fr(n);break;case 30:fr(n);break;default:fr(n)}t=t.sibling}}function Ui(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,g=f.flags;switch(f.tag){case 0:case 11:case 15:Ui(c,f,a),El(4,f);break;case 1:if(Ui(c,f,a),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(j){Ft(l,l.return,j)}if(l=f,c=l.updateQueue,c!==null){var E=l.stateNode;try{var C=c.shared.hiddenCallbacks;if(C!==null)for(c.shared.hiddenCallbacks=null,c=0;c<C.length;c++)Vm(C[c],E)}catch(j){Ft(l,l.return,j)}}a&&g&64&&kg(f),Tl(f,f.return);break;case 27:Gg(f);case 26:case 5:Ui(c,f,a),a&&l===null&&g&4&&Pg(f),Tl(f,f.return);break;case 12:Ui(c,f,a);break;case 31:Ui(c,f,a),a&&g&4&&Kg(c,f);break;case 13:Ui(c,f,a),a&&g&4&&Zg(c,f);break;case 22:f.memoizedState===null&&Ui(c,f,a),Tl(f,f.return);break;case 30:break;default:Ui(c,f,a)}n=n.sibling}}function qh(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ll(a))}function Ph(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ll(t))}function Gn(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wg(t,n,a,l),n=n.sibling}function Wg(t,n,a,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Gn(t,n,a,l),c&2048&&El(9,n);break;case 1:Gn(t,n,a,l);break;case 3:Gn(t,n,a,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ll(t)));break;case 12:if(c&2048){Gn(t,n,a,l),t=n.stateNode;try{var f=n.memoizedProps,g=f.id,E=f.onPostCommit;typeof E=="function"&&E(g,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Ft(n,n.return,C)}}else Gn(t,n,a,l);break;case 31:Gn(t,n,a,l);break;case 13:Gn(t,n,a,l);break;case 23:break;case 22:f=n.stateNode,g=n.alternate,n.memoizedState!==null?f._visibility&2?Gn(t,n,a,l):Al(t,n):f._visibility&2?Gn(t,n,a,l):(f._visibility|=2,is(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),c&2048&&qh(g,n);break;case 24:Gn(t,n,a,l),c&2048&&Ph(n.alternate,n);break;default:Gn(t,n,a,l)}}function is(t,n,a,l,c){for(c=c&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=t,g=n,E=a,C=l,j=g.flags;switch(g.tag){case 0:case 11:case 15:is(f,g,E,C,c),El(8,g);break;case 23:break;case 22:var H=g.stateNode;g.memoizedState!==null?H._visibility&2?is(f,g,E,C,c):Al(f,g):(H._visibility|=2,is(f,g,E,C,c)),c&&j&2048&&qh(g.alternate,g);break;case 24:is(f,g,E,C,c),c&&j&2048&&Ph(g.alternate,g);break;default:is(f,g,E,C,c)}n=n.sibling}}function Al(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,c=l.flags;switch(l.tag){case 22:Al(a,l),c&2048&&qh(l.alternate,l);break;case 24:Al(a,l),c&2048&&Ph(l.alternate,l);break;default:Al(a,l)}n=n.sibling}}var Sl=8192;function as(t,n,a){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)tp(t,n,a),t=t.sibling}function tp(t,n,a){switch(t.tag){case 26:as(t,n,a),t.flags&Sl&&t.memoizedState!==null&&J1(a,Hn,t.memoizedState,t.memoizedProps);break;case 5:as(t,n,a);break;case 3:case 4:var l=Hn;Hn=wu(t.stateNode.containerInfo),as(t,n,a),Hn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Sl,Sl=16777216,as(t,n,a),Sl=l):as(t,n,a));break;default:as(t,n,a)}}function ep(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function bl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];ze=l,ip(l,t)}ep(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)np(t),t=t.sibling}function np(t){switch(t.tag){case 0:case 11:case 15:bl(t),t.flags&2048&&ca(9,t,t.return);break;case 3:bl(t);break;case 12:bl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,du(t)):bl(t);break;default:bl(t)}}function du(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];ze=l,ip(l,t)}ep(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ca(8,n,n.return),du(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,du(n));break;default:du(n)}t=t.sibling}}function ip(t,n){for(;ze!==null;){var a=ze;switch(a.tag){case 0:case 11:case 15:ca(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ze=l;else t:for(a=t;ze!==null;){l=ze;var c=l.sibling,f=l.return;if(Yg(l),l===a){ze=null;break t}if(c!==null){c.return=f,ze=c;break t}ze=f}}}var f1={getCacheForType:function(t){var n=ke(Te),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return ke(Te).controller.signal}},d1=typeof WeakMap=="function"?WeakMap:Map,qt=0,$t=null,Ct=null,Vt=0,Qt=0,gn=null,ha=!1,rs=!1,Hh=!1,Li=0,ce=0,fa=0,dr=0,Gh=0,pn=0,ss=0,Rl=null,sn=null,Qh=!1,mu=0,ap=0,gu=1/0,pu=null,da=null,Ne=0,ma=null,ls=null,ji=0,Fh=0,Yh=null,rp=null,wl=0,Xh=null;function yn(){return(qt&2)!==0&&Vt!==0?Vt&-Vt:P.T!==null?tf():yo()}function sp(){if(pn===0)if((Vt&536870912)===0||xt){var t=ka;ka<<=1,(ka&3932160)===0&&(ka=262144),pn=t}else pn=536870912;return t=dn.current,t!==null&&(t.flags|=32),pn}function ln(t,n,a){(t===$t&&(Qt===2||Qt===9)||t.cancelPendingCommit!==null)&&(os(t,0),ga(t,Vt,pn,!1)),qa(t,a),((qt&2)===0||t!==$t)&&(t===$t&&((qt&2)===0&&(dr|=a),ce===4&&ga(t,Vt,pn,!1)),mi(t))}function lp(t,n,a){if((qt&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||xn(t,n),c=l?p1(t,n):Zh(t,n,!0),f=l;do{if(c===0){rs&&!l&&ga(t,n,0,!1);break}else{if(a=t.current.alternate,f&&!m1(a)){c=Zh(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){n=g;t:{var E=t;c=Rl;var C=E.current.memoizedState.isDehydrated;if(C&&(os(E,g).flags|=256),g=Zh(E,g,!1),g!==2){if(Hh&&!C){E.errorRecoveryDisabledLanes|=f,dr|=f,c=4;break t}f=sn,sn=c,f!==null&&(sn===null?sn=f:sn.push.apply(sn,f))}c=g}if(f=!1,c!==2)continue}}if(c===1){os(t,0),ga(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ga(l,n,pn,!ha);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(c=mu+300-Je(),10<c)){if(ga(l,n,pn,!ha),Zn(l,0,!0)!==0)break t;ji=n,l.timeoutHandle=jp(op.bind(null,l,a,sn,pu,Qh,n,pn,dr,ss,ha,f,"Throttled",-0,0),c);break t}op(l,a,sn,pu,Qh,n,pn,dr,ss,ha,f,null,-0,0)}}break}while(!0);mi(t)}function op(t,n,a,l,c,f,g,E,C,j,H,Y,B,q){if(t.timeoutHandle=-1,Y=n.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},tp(n,f,Y);var lt=(f&62914560)===f?mu-Je():(f&4194048)===f?ap-Je():0;if(lt=$1(Y,lt),lt!==null){ji=f,t.cancelPendingCommit=lt(pp.bind(null,t,n,f,a,l,c,g,E,C,H,Y,null,B,q)),ga(t,f,g,!j);return}}pp(t,n,f,a,l,c,g,E,C)}function m1(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],f=c.getSnapshot;c=c.value;try{if(!hn(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ga(t,n,a,l){n&=~Gh,n&=~dr,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-he(c),g=1<<f;l[f]=-1,c&=~g}a!==0&&Pa(t,a,n)}function yu(){return(qt&6)===0?(Cl(0),!1):!0}function Kh(){if(Ct!==null){if(Qt===0)var t=Ct.return;else t=Ct,Ci=ar=null,hh(t),$r=null,ul=0,t=Ct;for(;t!==null;)Bg(t.alternate,t),t=t.return;Ct=null}}function os(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,x1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ji=0,Kh(),$t=t,Ct=a=Ri(t.current,null),Vt=n,Qt=0,gn=null,ha=!1,rs=xn(t,n),Hh=!1,ss=pn=Gh=dr=fa=ce=0,sn=Rl=null,Qh=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-he(l),f=1<<c;n|=t[c],l&=~f}return Li=n,jo(),a}function up(t,n){bt=null,P.H=yl,n===Jr||n===Fo?(n=Rm(),Qt=3):n===Wc?(n=Rm(),Qt=4):Qt=n===Ch?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,gn=n,Ct===null&&(ce=1,su(t,bn(n,t.current)))}function cp(){var t=dn.current;return t===null?!0:(Vt&4194048)===Vt?Dn===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?t===Dn:!1}function hp(){var t=P.H;return P.H=yl,t===null?yl:t}function fp(){var t=P.A;return P.A=f1,t}function _u(){ce=4,ha||(Vt&4194048)!==Vt&&dn.current!==null||(rs=!0),(fa&134217727)===0&&(dr&134217727)===0||$t===null||ga($t,Vt,pn,!1)}function Zh(t,n,a){var l=qt;qt|=2;var c=hp(),f=fp();($t!==t||Vt!==n)&&(pu=null,os(t,n)),n=!1;var g=ce;t:do try{if(Qt!==0&&Ct!==null){var E=Ct,C=gn;switch(Qt){case 8:Kh(),g=6;break t;case 3:case 2:case 9:case 6:dn.current===null&&(n=!0);var j=Qt;if(Qt=0,gn=null,us(t,E,C,j),a&&rs){g=0;break t}break;default:j=Qt,Qt=0,gn=null,us(t,E,C,j)}}g1(),g=ce;break}catch(H){up(t,H)}while(!0);return n&&t.shellSuspendCounter++,Ci=ar=null,qt=l,P.H=c,P.A=f,Ct===null&&($t=null,Vt=0,jo()),g}function g1(){for(;Ct!==null;)dp(Ct)}function p1(t,n){var a=qt;qt|=2;var l=hp(),c=fp();$t!==t||Vt!==n?(pu=null,gu=Je()+500,os(t,n)):rs=xn(t,n);t:do try{if(Qt!==0&&Ct!==null){n=Ct;var f=gn;e:switch(Qt){case 1:Qt=0,gn=null,us(t,n,f,1);break;case 2:case 9:if(Sm(f)){Qt=0,gn=null,mp(n);break}n=function(){Qt!==2&&Qt!==9||$t!==t||(Qt=7),mi(t)},f.then(n,n);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Sm(f)?(Qt=0,gn=null,mp(n)):(Qt=0,gn=null,us(t,n,f,7));break;case 5:var g=null;switch(Ct.tag){case 26:g=Ct.memoizedState;case 5:case 27:var E=Ct;if(g?Wp(g):E.stateNode.complete){Qt=0,gn=null;var C=E.sibling;if(C!==null)Ct=C;else{var j=E.return;j!==null?(Ct=j,vu(j)):Ct=null}break e}}Qt=0,gn=null,us(t,n,f,5);break;case 6:Qt=0,gn=null,us(t,n,f,6);break;case 8:Kh(),ce=6;break t;default:throw Error(r(462))}}y1();break}catch(H){up(t,H)}while(!0);return Ci=ar=null,P.H=l,P.A=c,qt=a,Ct!==null?0:($t=null,Vt=0,jo(),ce)}function y1(){for(;Ct!==null&&!wc();)dp(Ct)}function dp(t){var n=Lg(t.alternate,t,Li);t.memoizedProps=t.pendingProps,n===null?vu(t):Ct=n}function mp(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=Ng(a,n,n.pendingProps,n.type,void 0,Vt);break;case 11:n=Ng(a,n,n.pendingProps,n.type.render,n.ref,Vt);break;case 5:hh(n);default:Bg(a,n),n=Ct=fm(n,Li),n=Lg(a,n,Li)}t.memoizedProps=t.pendingProps,n===null?vu(t):Ct=n}function us(t,n,a,l){Ci=ar=null,hh(n),$r=null,ul=0;var c=n.return;try{if(r1(t,c,n,a,Vt)){ce=1,su(t,bn(a,t.current)),Ct=null;return}}catch(f){if(c!==null)throw Ct=c,f;ce=1,su(t,bn(a,t.current)),Ct=null;return}n.flags&32768?(xt||l===1?t=!0:rs||(Vt&536870912)!==0?t=!1:(ha=t=!0,(l===2||l===9||l===3||l===6)&&(l=dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),gp(n,t)):vu(n)}function vu(t){var n=t;do{if((n.flags&32768)!==0){gp(n,ha);return}t=n.return;var a=o1(n.alternate,n,Li);if(a!==null){Ct=a;return}if(n=n.sibling,n!==null){Ct=n;return}Ct=n=t}while(n!==null);ce===0&&(ce=5)}function gp(t,n){do{var a=u1(t.alternate,t);if(a!==null){a.flags&=32767,Ct=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ct=t;return}Ct=t=a}while(t!==null);ce=6,Ct=null}function pp(t,n,a,l,c,f,g,E,C){t.cancelPendingCommit=null;do Eu();while(Ne!==0);if((qt&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=jc,Vc(t,a,f,g,E,C),t===$t&&(Ct=$t=null,Vt=0),ls=n,ma=t,ji=a,Fh=f,Yh=c,rp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T1(Qi,function(){return Tp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,c=nt.p,nt.p=2,g=qt,qt|=4;try{c1(t,n,a)}finally{qt=g,nt.p=c,P.T=l}}Ne=1,yp(),_p(),vp()}}function yp(){if(Ne===1){Ne=0;var t=ma,n=ls,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var l=nt.p;nt.p=2;var c=qt;qt|=4;try{Jg(n,t);var f=uf,g=im(t.containerInfo),E=f.focusedElem,C=f.selectionRange;if(g!==E&&E&&E.ownerDocument&&nm(E.ownerDocument.documentElement,E)){if(C!==null&&Oc(E)){var j=C.start,H=C.end;if(H===void 0&&(H=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(H,E.value.length);else{var Y=E.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var q=B.getSelection(),lt=E.textContent.length,mt=Math.min(C.start,lt),Jt=C.end===void 0?mt:Math.min(C.end,lt);!q.extend&&mt>Jt&&(g=Jt,Jt=mt,mt=g);var x=em(E,mt),I=em(E,Jt);if(x&&I&&(q.rangeCount!==1||q.anchorNode!==x.node||q.anchorOffset!==x.offset||q.focusNode!==I.node||q.focusOffset!==I.offset)){var L=Y.createRange();L.setStart(x.node,x.offset),q.removeAllRanges(),mt>Jt?(q.addRange(L),q.extend(I.node,I.offset)):(L.setEnd(I.node,I.offset),q.addRange(L))}}}}for(Y=[],q=E;q=q.parentNode;)q.nodeType===1&&Y.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var Q=Y[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Mu=!!of,uf=of=null}finally{qt=c,nt.p=l,P.T=a}}t.current=n,Ne=2}}function _p(){if(Ne===2){Ne=0;var t=ma,n=ls,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var l=nt.p;nt.p=2;var c=qt;qt|=4;try{Fg(t,n.alternate,n)}finally{qt=c,nt.p=l,P.T=a}}Ne=3}}function vp(){if(Ne===4||Ne===3){Ne=0,uo();var t=ma,n=ls,a=ji,l=rp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ne=5:(Ne=0,ls=ma=null,Ep(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(da=null),Ti(a),n=n.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(On,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=P.T,c=nt.p,nt.p=2,P.T=null;try{for(var f=t.onRecoverableError,g=0;g<l.length;g++){var E=l[g];f(E.value,{componentStack:E.stack})}}finally{P.T=n,nt.p=c}}(ji&3)!==0&&Eu(),mi(t),c=t.pendingLanes,(a&261930)!==0&&(c&42)!==0?t===Xh?wl++:(wl=0,Xh=t):wl=0,Cl(0)}}function Ep(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,ll(n)))}function Eu(){return yp(),_p(),vp(),Tp()}function Tp(){if(Ne!==5)return!1;var t=ma,n=Fh;Fh=0;var a=Ti(ji),l=P.T,c=nt.p;try{nt.p=32>a?32:a,P.T=null,a=Yh,Yh=null;var f=ma,g=ji;if(Ne=0,ls=ma=null,ji=0,(qt&6)!==0)throw Error(r(331));var E=qt;if(qt|=4,np(f.current),Wg(f,f.current,g,a),qt=E,Cl(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(On,f)}catch{}return!0}finally{nt.p=c,P.T=l,Ep(t,n)}}function Ap(t,n,a){n=bn(a,n),n=wh(t.stateNode,n,2),t=la(t,n,2),t!==null&&(qa(t,2),mi(t))}function Ft(t,n,a){if(t.tag===3)Ap(t,t,a);else for(;n!==null;){if(n.tag===3){Ap(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(da===null||!da.has(l))){t=bn(a,t),a=Sg(2),l=la(n,a,2),l!==null&&(bg(a,l,n,t),qa(l,2),mi(l));break}}n=n.return}}function Jh(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new d1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(a)||(Hh=!0,c.add(a),t=_1.bind(null,t,n,a),n.then(t,t))}function _1(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,$t===t&&(Vt&a)===a&&(ce===4||ce===3&&(Vt&62914560)===Vt&&300>Je()-mu?(qt&2)===0&&os(t,0):Gh|=a,ss===Vt&&(ss=0)),mi(t)}function Sp(t,n){n===0&&(n=po()),t=er(t,n),t!==null&&(qa(t,n),mi(t))}function v1(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),Sp(t,a)}function E1(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Sp(t,a)}function T1(t,n){return Ie(t,n)}var Tu=null,cs=null,$h=!1,Au=!1,Wh=!1,pa=0;function mi(t){t!==cs&&t.next===null&&(cs===null?Tu=cs=t:cs=cs.next=t),Au=!0,$h||($h=!0,S1())}function Cl(t,n){if(!Wh&&Au){Wh=!0;do for(var a=!1,l=Tu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var g=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-he(42|t)+1)-1,f&=c&~(g&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Cp(l,f))}else f=Vt,f=Zn(l,l===$t?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||xn(l,f)||(a=!0,Cp(l,f));l=l.next}while(a);Wh=!1}}function A1(){bp()}function bp(){Au=$h=!1;var t=0;pa!==0&&O1()&&(t=pa);for(var n=Je(),a=null,l=Tu;l!==null;){var c=l.next,f=Rp(l,n);f===0?(l.next=null,a===null?Tu=c:a.next=c,c===null&&(cs=a)):(a=l,(t!==0||(f&3)!==0)&&(Au=!0)),l=c}Ne!==0&&Ne!==5||Cl(t),pa!==0&&(pa=0)}function Rp(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var g=31-he(f),E=1<<g,C=c[g];C===-1?((E&a)===0||(E&l)!==0)&&(c[g]=Dc(E,n)):C<=n&&(t.expiredLanes|=E),f&=~E}if(n=$t,a=Vt,a=Zn(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(Qt===2||Qt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Gi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||xn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Gi(l),Ti(a)){case 2:case 8:a=Ls;break;case 32:a=Qi;break;case 268435456:a=co;break;default:a=Qi}return l=wp.bind(null,t),a=Ie(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Gi(l),t.callbackPriority=2,t.callbackNode=null,2}function wp(t,n){if(Ne!==0&&Ne!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Eu()&&t.callbackNode!==a)return null;var l=Vt;return l=Zn(t,t===$t?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(lp(t,l,n),Rp(t,Je()),t.callbackNode!=null&&t.callbackNode===a?wp.bind(null,t):null)}function Cp(t,n){if(Eu())return null;lp(t,n,!0)}function S1(){z1(function(){(qt&6)!==0?Ie(Us,A1):bp()})}function tf(){if(pa===0){var t=Kr;t===0&&(t=Xn,Xn<<=1,(Xn&261888)===0&&(Xn=256)),pa=t}return pa}function Dp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xr(""+t)}function Vp(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function b1(t,n,a,l,c){if(n==="submit"&&a&&a.stateNode===c){var f=Dp((c[Oe]||null).action),g=l.submitter;g&&(n=(n=g[Oe]||null)?Dp(n.formAction):g.getAttribute("formAction"),n!==null&&(f=n,g=null));var E=new li("action","action",null,l,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(pa!==0){var C=g?Vp(c,g):new FormData(c);Eh(a,{pending:!0,data:C,method:c.method,action:f},null,C)}}else typeof f=="function"&&(E.preventDefault(),C=g?Vp(c,g):new FormData(c),Eh(a,{pending:!0,data:C,method:c.method,action:f},f,C))},currentTarget:c}]})}}for(var ef=0;ef<Lc.length;ef++){var nf=Lc[ef],R1=nf.toLowerCase(),w1=nf[0].toUpperCase()+nf.slice(1);Pn(R1,"on"+w1)}Pn(sm,"onAnimationEnd"),Pn(lm,"onAnimationIteration"),Pn(om,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(P0,"onTransitionRun"),Pn(H0,"onTransitionStart"),Pn(G0,"onTransitionCancel"),Pn(um,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function Ip(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var g=l.length-1;0<=g;g--){var E=l[g],C=E.instance,j=E.currentTarget;if(E=E.listener,C!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=j;try{f(c)}catch(H){Lo(H)}c.currentTarget=null,f=C}else for(g=0;g<l.length;g++){if(E=l[g],C=E.instance,j=E.currentTarget,E=E.listener,C!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=j;try{f(c)}catch(H){Lo(H)}c.currentTarget=null,f=C}}}}function Dt(t,n){var a=n[Vr];a===void 0&&(a=n[Vr]=new Set);var l=t+"__bubble";a.has(l)||(Np(n,t,2,!1),a.add(l))}function af(t,n,a){var l=0;n&&(l|=4),Np(a,t,l,n)}var Su="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[Su]){t[Su]=!0,ks.forEach(function(a){a!=="selectionchange"&&(C1.has(a)||af(a,!1,t),af(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Su]||(n[Su]=!0,af("selectionchange",!1,n))}}function Np(t,n,a,l){switch(sy(n)){case 2:var c=eE;break;case 8:c=nE;break;default:c=Ef}a=c.bind(null,n,a,t),c=void 0,!Ya||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,a,{capture:!0,passive:c}):t.addEventListener(n,a,!0):c!==void 0?t.addEventListener(n,a,{passive:c}):t.addEventListener(n,a,!1)}function sf(t,n,a,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var E=l.stateNode.containerInfo;if(E===c)break;if(g===4)for(g=l.return;g!==null;){var C=g.tag;if((C===3||C===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;E!==null;){if(g=ti(E),g===null)return;if(C=g.tag,C===5||C===6||C===26||C===27){l=f=g;continue t}E=E.parentNode}}l=l.return}Ji(function(){var j=f,H=En(a),Y=[];t:{var B=cm.get(t);if(B!==void 0){var q=li,lt=t;switch(t){case"keypress":if(Ka(a)===0)break t;case"keydown":case"keyup":q=xo;break;case"focusin":lt="focus",q=Ja;break;case"focusout":lt="blur",q=Ja;break;case"beforeblur":case"afterblur":q=Ja;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Ro;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=m;break;case sm:case lm:case om:q=Co;break;case um:q=T;break;case"scroll":case"scrollend":q=$s;break;case"wheel":q=k;break;case"copy":case"cut":case"paste":q=Do;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=bi;break;case"toggle":case"beforetoggle":q=St}var mt=(n&4)!==0,Jt=!mt&&(t==="scroll"||t==="scrollend"),x=mt?B!==null?B+"Capture":null:B;mt=[];for(var I=j,L;I!==null;){var Q=I;if(L=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||L===null||x===null||(Q=jn(I,x),Q!=null&&mt.push(Vl(I,Q,L))),Jt)break;I=I.return}0<mt.length&&(B=new q(B,lt,null,a,H),Y.push({event:B,listeners:mt}))}}if((n&7)===0){t:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==Ks&&(lt=a.relatedTarget||a.fromElement)&&(ti(lt)||lt[$n]))break t;if((q||B)&&(B=H.window===H?H:(B=H.ownerDocument)?B.defaultView||B.parentWindow:window,q?(lt=a.relatedTarget||a.toElement,q=j,lt=lt?ti(lt):null,lt!==null&&(Jt=h(lt),mt=lt.tag,lt!==Jt||mt!==5&&mt!==27&&mt!==6)&&(lt=null)):(q=null,lt=j),q!==lt)){if(mt=Ws,Q="onMouseLeave",x="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(mt=bi,Q="onPointerLeave",x="onPointerEnter",I="pointer"),Jt=q==null?B:un(q),L=lt==null?B:un(lt),B=new mt(Q,I+"leave",q,a,H),B.target=Jt,B.relatedTarget=L,Q=null,ti(H)===j&&(mt=new mt(x,I+"enter",lt,a,H),mt.target=L,mt.relatedTarget=Jt,Q=mt),Jt=Q,q&&lt)e:{for(mt=D1,x=q,I=lt,L=0,Q=x;Q;Q=mt(Q))L++;Q=0;for(var ht=I;ht;ht=mt(ht))Q++;for(;0<L-Q;)x=mt(x),L--;for(;0<Q-L;)I=mt(I),Q--;for(;L--;){if(x===I||I!==null&&x===I.alternate){mt=x;break e}x=mt(x),I=mt(I)}mt=null}else mt=null;q!==null&&Mp(Y,B,q,mt,!1),lt!==null&&Jt!==null&&Mp(Y,Jt,lt,mt,!0)}}t:{if(B=j?un(j):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var jt=Kd;else if(Yd(B))if(Zd)jt=B0;else{jt=L0;var ot=U0}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&Or(j.elementType)&&(jt=Kd):jt=j0;if(jt&&(jt=jt(t,j))){Xd(Y,jt,a,H);break t}ot&&ot(t,B,j),t==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&Fs(B,"number",B.value)}switch(ot=j?un(j):window,t){case"focusin":(Yd(ot)||ot.contentEditable==="true")&&(qr=ot,xc=j,al=null);break;case"focusout":al=xc=qr=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,am(Y,a,H);break;case"selectionchange":if(q0)break;case"keydown":case"keyup":am(Y,a,H)}var wt;if(kt)t:{switch(t){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else kr?$a(t,a)&&(It="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(It="onCompositionStart");It&&(ci&&a.locale!=="ko"&&(kr||It!=="onCompositionStart"?It==="onCompositionEnd"&&kr&&(wt=Js()):(si=H,Zs="value"in si?si.value:si.textContent,kr=!0)),ot=bu(j,It),0<ot.length&&(It=new ui(It,t,null,a,H),Y.push({event:It,listeners:ot}),wt?It.data=wt:(wt=Br(a),wt!==null&&(It.data=wt)))),(wt=An?M0(t,a):O0(t,a))&&(It=bu(j,"onBeforeInput"),0<It.length&&(ot=new ui("onBeforeInput","beforeinput",null,a,H),Y.push({event:ot,listeners:It}),ot.data=wt)),b1(Y,t,j,a,H)}Ip(Y,n)})}function Vl(t,n,a){return{instance:t,listener:n,currentTarget:a}}function bu(t,n){for(var a=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=jn(t,a),c!=null&&l.unshift(Vl(t,c,f)),c=jn(t,n),c!=null&&l.push(Vl(t,c,f))),t.tag===3)return l;t=t.return}return[]}function D1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Mp(t,n,a,l,c){for(var f=n._reactName,g=[];a!==null&&a!==l;){var E=a,C=E.alternate,j=E.stateNode;if(E=E.tag,C!==null&&C===l)break;E!==5&&E!==26&&E!==27||j===null||(C=j,c?(j=jn(a,f),j!=null&&g.unshift(Vl(a,j,C))):c||(j=jn(a,f),j!=null&&g.push(Vl(a,j,C)))),a=a.return}g.length!==0&&t.push({event:n,listeners:g})}var V1=/\r\n?/g,I1=/\u0000|\uFFFD/g;function Op(t){return(typeof t=="string"?t:""+t).replace(V1,`
`).replace(I1,"")}function xp(t,n){return n=Op(n),Op(t)===n}function Zt(t,n,a,l,c,f){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||en(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&en(t,""+l);break;case"className":cn(t,"class",l);break;case"tabIndex":cn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cn(t,a,l);break;case"style":Xs(t,l,f);break;case"data":if(n!=="object"){cn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Zt(t,n,"name",c.name,c,null),Zt(t,n,"formEncType",c.formEncType,c,null),Zt(t,n,"formMethod",c.formMethod,c,null),Zt(t,n,"formTarget",c.formTarget,c,null)):(Zt(t,n,"encType",c.encType,c,null),Zt(t,n,"method",c.method,c,null),Zt(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ln);break;case"onScroll":l!=null&&Dt("scroll",t);break;case"onScrollEnd":l!=null&&Dt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=xr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Dt("beforetoggle",t),Dt("toggle",t),Nr(t,"popover",l);break;case"xlinkActuate":Ee(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ee(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ee(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ee(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ee(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ee(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Nr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bo.get(a)||a,Nr(t,a,l))}}function lf(t,n,a,l,c,f){switch(a){case"style":Xs(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?en(t,l):(typeof l=="number"||typeof l=="bigint")&&en(t,""+l);break;case"onScroll":l!=null&&Dt("scroll",t);break;case"onScrollEnd":l!=null&&Dt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=t[Oe]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,c);break t}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Nr(t,a,l)}}}function Pe(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",t),Dt("load",t);var l=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var g=a[f];if(g!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Zt(t,n,f,g,a,null)}}c&&Zt(t,n,"srcSet",a.srcSet,a,null),l&&Zt(t,n,"src",a.src,a,null);return;case"input":Dt("invalid",t);var E=f=g=c=null,C=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var H=a[l];if(H!=null)switch(l){case"name":c=H;break;case"type":g=H;break;case"checked":C=H;break;case"defaultChecked":j=H;break;case"value":f=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,n));break;default:Zt(t,n,l,H,a,null)}}To(t,f,E,C,j,g,c,!1);return;case"select":Dt("invalid",t),l=g=f=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":g=E;break;case"multiple":l=E;default:Zt(t,n,c,E,a,null)}n=f,a=g,t.multiple=!!l,n!=null?Yi(t,!!l,n,!1):a!=null&&Yi(t,!!l,a,!0);return;case"textarea":Dt("invalid",t),f=c=l=null;for(g in a)if(a.hasOwnProperty(g)&&(E=a[g],E!=null))switch(g){case"value":l=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Zt(t,n,g,E,a,null)}Xi(t,l,c,f);return;case"option":for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null)&&(C==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Zt(t,n,C,l,a,null));return;case"dialog":Dt("beforetoggle",t),Dt("toggle",t),Dt("cancel",t),Dt("close",t);break;case"iframe":case"object":Dt("load",t);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Dt(Dl[l],t);break;case"image":Dt("error",t),Dt("load",t);break;case"details":Dt("toggle",t);break;case"embed":case"source":case"link":Dt("error",t),Dt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Zt(t,n,j,l,a,null)}return;default:if(Or(n)){for(H in a)a.hasOwnProperty(H)&&(l=a[H],l!==void 0&&lf(t,n,H,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Zt(t,n,E,l,a,null))}function N1(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,g=null,E=null,C=null,j=null,H=null;for(q in a){var Y=a[q];if(a.hasOwnProperty(q)&&Y!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":C=Y;default:l.hasOwnProperty(q)||Zt(t,n,q,null,l,Y)}}for(var B in l){var q=l[B];if(Y=a[B],l.hasOwnProperty(B)&&(q!=null||Y!=null))switch(B){case"type":f=q;break;case"name":c=q;break;case"checked":j=q;break;case"defaultChecked":H=q;break;case"value":g=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:q!==Y&&Zt(t,n,B,q,l,Y)}}Mr(t,g,E,C,j,H,f,c);return;case"select":q=g=E=B=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":q=C;default:l.hasOwnProperty(f)||Zt(t,n,f,null,l,C)}for(c in l)if(f=l[c],C=a[c],l.hasOwnProperty(c)&&(f!=null||C!=null))switch(c){case"value":B=f;break;case"defaultValue":E=f;break;case"multiple":g=f;default:f!==C&&Zt(t,n,c,f,l,C)}n=E,a=g,l=q,B!=null?Yi(t,!!a,B,!1):!!l!=!!a&&(n!=null?Yi(t,!!a,n,!0):Yi(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Zt(t,n,E,null,l,c)}for(g in l)if(c=l[g],f=a[g],l.hasOwnProperty(g)&&(c!=null||f!=null))switch(g){case"value":B=c;break;case"defaultValue":q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==f&&Zt(t,n,g,c,l,f)}Ao(t,B,q);return;case"option":for(var lt in a)B=a[lt],a.hasOwnProperty(lt)&&B!=null&&!l.hasOwnProperty(lt)&&(lt==="selected"?t.selected=!1:Zt(t,n,lt,null,l,B));for(C in l)B=l[C],q=a[C],l.hasOwnProperty(C)&&B!==q&&(B!=null||q!=null)&&(C==="selected"?t.selected=B&&typeof B!="function"&&typeof B!="symbol":Zt(t,n,C,B,l,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)B=a[mt],a.hasOwnProperty(mt)&&B!=null&&!l.hasOwnProperty(mt)&&Zt(t,n,mt,null,l,B);for(j in l)if(B=l[j],q=a[j],l.hasOwnProperty(j)&&B!==q&&(B!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:Zt(t,n,j,B,l,q)}return;default:if(Or(n)){for(var Jt in a)B=a[Jt],a.hasOwnProperty(Jt)&&B!==void 0&&!l.hasOwnProperty(Jt)&&lf(t,n,Jt,void 0,l,B);for(H in l)B=l[H],q=a[H],!l.hasOwnProperty(H)||B===q||B===void 0&&q===void 0||lf(t,n,H,B,l,q);return}}for(var x in a)B=a[x],a.hasOwnProperty(x)&&B!=null&&!l.hasOwnProperty(x)&&Zt(t,n,x,null,l,B);for(Y in l)B=l[Y],q=a[Y],!l.hasOwnProperty(Y)||B===q||B==null&&q==null||Zt(t,n,Y,B,l,q)}function zp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],f=c.transferSize,g=c.initiatorType,E=c.duration;if(f&&E&&zp(g)){for(g=0,E=c.responseEnd,l+=1;l<a.length;l++){var C=a[l],j=C.startTime;if(j>E)break;var H=C.transferSize,Y=C.initiatorType;H&&zp(Y)&&(C=C.responseEnd,g+=H*(C<E?1:(E-j)/(C-j)))}if(--l,n+=8*(f+g)/(c.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var of=null,uf=null;function Ru(t){return t.nodeType===9?t:t.ownerDocument}function Up(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lp(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function cf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var hf=null;function O1(){var t=window.event;return t&&t.type==="popstate"?t===hf?!1:(hf=t,!0):(hf=null,!1)}var jp=typeof setTimeout=="function"?setTimeout:void 0,x1=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,z1=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(t){return Bp.resolve(null).then(t).catch(U1)}:jp;function U1(t){setTimeout(function(){throw t})}function ya(t){return t==="head"}function kp(t,n){var a=n,l=0;do{var c=a.nextSibling;if(t.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(c),ms(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Il(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Il(a);for(var f=a.firstChild;f;){var g=f.nextSibling,E=f.nodeName;f[Wn]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=g}}else a==="body"&&Il(t.ownerDocument.body);a=c}while(a);ms(n)}function qp(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function ff(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ff(a),Ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function L1(t,n,a,l){for(;t.nodeType===1;){var c=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Wn])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Vn(t.nextSibling),t===null)break}return null}function j1(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Vn(t.nextSibling),t===null))return null;return t}function Pp(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Vn(t.nextSibling),t===null))return null;return t}function df(t){return t.data==="$?"||t.data==="$~"}function mf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function B1(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Vn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var gf=null;function Hp(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Vn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Gp(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Qp(t,n,a){switch(n=Ru(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Il(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ir(t)}var In=new Map,Fp=new Set;function wu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Bi=nt.d;nt.d={f:k1,r:q1,D:P1,C:H1,L:G1,m:Q1,X:Y1,S:F1,M:X1};function k1(){var t=Bi.f(),n=yu();return t||n}function q1(t){var n=vn(t);n!==null&&n.tag===5&&n.type==="form"?ug(n):Bi.r(t)}var hs=typeof document>"u"?null:document;function Yp(t,n,a){var l=hs;if(l&&typeof n=="string"&&n){var c=tn(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Fp.has(c)||(Fp.add(c),t={rel:t,crossOrigin:a,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),Pe(n,"link",t),ve(n),l.head.appendChild(n)))}}function P1(t){Bi.D(t),Yp("dns-prefetch",t,null)}function H1(t,n){Bi.C(t,n),Yp("preconnect",t,n)}function G1(t,n,a){Bi.L(t,n,a);var l=hs;if(l&&t&&n){var c='link[rel="preload"][as="'+tn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+tn(a.imageSizes)+'"]')):c+='[href="'+tn(t)+'"]';var f=c;switch(n){case"style":f=fs(t);break;case"script":f=ds(t)}In.has(f)||(t=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),In.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Nl(f))||n==="script"&&l.querySelector(Ml(f))||(n=l.createElement("link"),Pe(n,"link",t),ve(n),l.head.appendChild(n)))}}function Q1(t,n){Bi.m(t,n);var a=hs;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+tn(l)+'"][href="'+tn(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ds(t)}if(!In.has(f)&&(t=S({rel:"modulepreload",href:t},n),In.set(f,t),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(f)))return}l=a.createElement("link"),Pe(l,"link",t),ve(l),a.head.appendChild(l)}}}function F1(t,n,a){Bi.S(t,n,a);var l=hs;if(l&&t){var c=ei(l).hoistableStyles,f=fs(t);n=n||"default";var g=c.get(f);if(!g){var E={loading:0,preload:null};if(g=l.querySelector(Nl(f)))E.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},a),(a=In.get(f))&&pf(t,a);var C=g=l.createElement("link");ve(C),Pe(C,"link",t),C._p=new Promise(function(j,H){C.onload=j,C.onerror=H}),C.addEventListener("load",function(){E.loading|=1}),C.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Cu(g,n,l)}g={type:"stylesheet",instance:g,count:1,state:E},c.set(f,g)}}}function Y1(t,n){Bi.X(t,n);var a=hs;if(a&&t){var l=ei(a).hoistableScripts,c=ds(t),f=l.get(c);f||(f=a.querySelector(Ml(c)),f||(t=S({src:t,async:!0},n),(n=In.get(c))&&yf(t,n),f=a.createElement("script"),ve(f),Pe(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function X1(t,n){Bi.M(t,n);var a=hs;if(a&&t){var l=ei(a).hoistableScripts,c=ds(t),f=l.get(c);f||(f=a.querySelector(Ml(c)),f||(t=S({src:t,async:!0,type:"module"},n),(n=In.get(c))&&yf(t,n),f=a.createElement("script"),ve(f),Pe(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Xp(t,n,a,l){var c=(c=Rt.current)?wu(c):null;if(!c)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=fs(a.href),a=ei(c).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=fs(a.href);var f=ei(c).hoistableStyles,g=f.get(t);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,g),(f=c.querySelector(Nl(t)))&&!f._p&&(g.instance=f,g.state.loading=5),In.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},In.set(t,a),f||K1(c,t,a,g.state))),n&&l===null)throw Error(r(528,""));return g}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ds(a),a=ei(c).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function fs(t){return'href="'+tn(t)+'"'}function Nl(t){return'link[rel="stylesheet"]['+t+"]"}function Kp(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function K1(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Pe(n,"link",a),ve(n),t.head.appendChild(n))}function ds(t){return'[src="'+tn(t)+'"]'}function Ml(t){return"script[async]"+t}function Zp(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+tn(a.href)+'"]');if(l)return n.instance=l,ve(l),l;var c=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ve(l),Pe(l,"style",c),Cu(l,a.precedence,t),n.instance=l;case"stylesheet":c=fs(a.href);var f=t.querySelector(Nl(c));if(f)return n.state.loading|=4,n.instance=f,ve(f),f;l=Kp(a),(c=In.get(c))&&pf(l,c),f=(t.ownerDocument||t).createElement("link"),ve(f);var g=f;return g._p=new Promise(function(E,C){g.onload=E,g.onerror=C}),Pe(f,"link",l),n.state.loading|=4,Cu(f,a.precedence,t),n.instance=f;case"script":return f=ds(a.src),(c=t.querySelector(Ml(f)))?(n.instance=c,ve(c),c):(l=a,(c=In.get(f))&&(l=S({},a),yf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),ve(c),Pe(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Cu(l,a.precedence,t));return n.instance}function Cu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,g=0;g<l.length;g++){var E=l[g];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function pf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function yf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Du=null;function Jp(t,n,a){if(Du===null){var l=new Map,c=Du=new Map;c.set(a,l)}else c=Du,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),c=0;c<a.length;c++){var f=a[c];if(!(f[Wn]||f[_e]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(n)||"";g=t+g;var E=l.get(g);E?E.push(f):l.set(g,[f])}}return l}function $p(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Z1(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(t=n.disabled,typeof n.precedence=="string"&&t==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function J1(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=fs(l.href),f=n.querySelector(Nl(c));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Vu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=f,ve(f);return}f=n.ownerDocument||n,l=Kp(l),(c=In.get(c))&&pf(l,c),f=f.createElement("link"),ve(f);var g=f;g._p=new Promise(function(E,C){g.onload=E,g.onerror=C}),Pe(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Vu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var _f=0;function $1(t,n){return t.stylesheets&&t.count===0&&Nu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Nu(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+n);0<t.imgBytes&&_f===0&&(_f=62500*M1());var c=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nu(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>_f?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function Vu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Iu=null;function Nu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Iu=new Map,n.forEach(W1,t),Iu=null,Vu.call(t))}function W1(t,n){if(!(n.state.loading&4)){var a=Iu.get(t);if(a)var l=a.get(null);else{a=new Map,Iu.set(t,a);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var g=c[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),l=g)}l&&a.set(null,l)}c=n.instance,g=c.getAttribute("data-precedence"),f=a.get(g)||l,f===l&&a.set(null,c),a.set(g,c),this.count++,l=Vu.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Ol={$$typeof:J,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function tE(t,n,a,l,c,f,g,E,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function ty(t,n,a,l,c,f,g,E,C,j,H,Y){return t=new tE(t,n,a,g,C,j,H,Y,E),n=1,f===!0&&(n|=24),f=fn(3,null,null,n),t.current=f,f.stateNode=t,n=Zc(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:n},th(f),t}function ey(t){return t?(t=Gr,t):Gr}function ny(t,n,a,l,c,f){c=ey(c),l.context===null?l.context=c:l.pendingContext=c,l=sa(n),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=la(t,l,n),a!==null&&(ln(a,t,n),hl(a,t,n))}function iy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function vf(t,n){iy(t,n),(t=t.alternate)&&iy(t,n)}function ay(t){if(t.tag===13||t.tag===31){var n=er(t,67108864);n!==null&&ln(n,t,67108864),vf(t,67108864)}}function ry(t){if(t.tag===13||t.tag===31){var n=yn();n=Ha(n);var a=er(t,n);a!==null&&ln(a,t,n),vf(t,n)}}var Mu=!0;function eE(t,n,a,l){var c=P.T;P.T=null;var f=nt.p;try{nt.p=2,Ef(t,n,a,l)}finally{nt.p=f,P.T=c}}function nE(t,n,a,l){var c=P.T;P.T=null;var f=nt.p;try{nt.p=8,Ef(t,n,a,l)}finally{nt.p=f,P.T=c}}function Ef(t,n,a,l){if(Mu){var c=Tf(l);if(c===null)sf(t,n,l,Ou,a),ly(t,l);else if(aE(c,t,n,a,l))l.stopPropagation();else if(ly(t,l),n&4&&-1<iE.indexOf(t)){for(;c!==null;){var f=vn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=Kn(f.pendingLanes);if(g!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;g;){var C=1<<31-he(g);E.entanglements[1]|=C,g&=~C}mi(f),(qt&6)===0&&(gu=Je()+500,Cl(0))}}break;case 31:case 13:E=er(f,2),E!==null&&ln(E,f,2),yu(),vf(f,2)}if(f=Tf(l),f===null&&sf(t,n,l,Ou,a),f===c)break;c=f}c!==null&&l.stopPropagation()}else sf(t,n,l,null,a)}}function Tf(t){return t=En(t),Af(t)}var Ou=null;function Af(t){if(Ou=null,t=ti(t),t!==null){var n=h(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=d(n),t!==null)return t;t=null}else if(a===31){if(t=y(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Ou=t,null}function sy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ba()){case Us:return 2;case Ls:return 8;case Qi:case Cc:return 32;case co:return 268435456;default:return 32}default:return 32}}var Sf=!1,_a=null,va=null,Ea=null,xl=new Map,zl=new Map,Ta=[],iE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ly(t,n){switch(t){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":xl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(n.pointerId)}}function Ul(t,n,a,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=vn(n),n!==null&&ay(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function aE(t,n,a,l,c){switch(n){case"focusin":return _a=Ul(_a,t,n,a,l,c),!0;case"dragenter":return va=Ul(va,t,n,a,l,c),!0;case"mouseover":return Ea=Ul(Ea,t,n,a,l,c),!0;case"pointerover":var f=c.pointerId;return xl.set(f,Ul(xl.get(f)||null,t,n,a,l,c)),!0;case"gotpointercapture":return f=c.pointerId,zl.set(f,Ul(zl.get(f)||null,t,n,a,l,c)),!0}return!1}function oy(t){var n=ti(t.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){t.blockedOn=n,zn(t.priority,function(){ry(a)});return}}else if(n===31){if(n=y(a),n!==null){t.blockedOn=n,zn(t.priority,function(){ry(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Tf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ks=l,a.target.dispatchEvent(l),Ks=null}else return n=vn(a),n!==null&&ay(n),t.blockedOn=a,!1;n.shift()}return!0}function uy(t,n,a){xu(t)&&a.delete(n)}function rE(){Sf=!1,_a!==null&&xu(_a)&&(_a=null),va!==null&&xu(va)&&(va=null),Ea!==null&&xu(Ea)&&(Ea=null),xl.forEach(uy),zl.forEach(uy)}function zu(t,n){t.blockedOn===n&&(t.blockedOn=null,Sf||(Sf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,rE)))}var Uu=null;function cy(t){Uu!==t&&(Uu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uu===t&&(Uu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(Af(l||a)===null)continue;break}var f=vn(a);f!==null&&(t.splice(n,3),n-=3,Eh(f,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function ms(t){function n(C){return zu(C,t)}_a!==null&&zu(_a,t),va!==null&&zu(va,t),Ea!==null&&zu(Ea,t),xl.forEach(n),zl.forEach(n);for(var a=0;a<Ta.length;a++){var l=Ta[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ta.length&&(a=Ta[0],a.blockedOn===null);)oy(a),a.blockedOn===null&&Ta.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],f=a[l+1],g=c[Oe]||null;if(typeof f=="function")g||cy(a);else if(g){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,g=f[Oe]||null)E=g.formAction;else if(Af(c)!==null)continue}else E=g.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),cy(a)}}}function hy(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function n(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),c!==null&&(c(),c=null)}}}function bf(t){this._internalRoot=t}Lu.prototype.render=bf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=yn();ny(a,l,t,n,null,null)},Lu.prototype.unmount=bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ny(t.current,2,null,t,null,null),yu(),n[$n]=null}};function Lu(t){this._internalRoot=t}Lu.prototype.unstable_scheduleHydration=function(t){if(t){var n=yo();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Ta.length&&n!==0&&n<Ta[a].priority;a++);Ta.splice(a,0,t),a===0&&oy(t)}};var fy=e.version;if(fy!=="19.2.3")throw Error(r(527,fy,"19.2.3"));nt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=_(n),t=t!==null?A(t):null,t=t===null?null:t.stateNode,t};var sE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{On=ju.inject(sE),Le=ju}catch{}}return jl.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",c=vg,f=Eg,g=Tg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),n=ty(t,1,!1,null,null,a,l,null,c,f,g,hy),t[$n]=n.current,rf(t),new bf(n)},jl.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,c="",f=vg,g=Eg,E=Tg,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),n=ty(t,1,!0,n,a??null,l,c,C,f,g,E,hy),n.context=ey(null),a=n.current,l=yn(),l=Ha(l),c=sa(l),c.callback=null,la(a,c,l),a=l,n.current.lanes=a,qa(n,a),mi(n),t[$n]=n.current,rf(t),new Lu(n)},jl.version="19.2.3",jl}var Ay;function yE(){if(Ay)return Cf.exports;Ay=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Cf.exports=pE(),Cf.exports}var _E=yE();const vE=z_(_E);async function U_(s){const e=new Blob([s],{type:"text/javascript"}),i=URL.createObjectURL(e);try{const o=(await import(i)).default,h=typeof o?.init=="function",d=typeof o?.render=="function";if(!h&&!d)throw new Error("El archivo no es vlido. Debe exportar 'init' (nuevo) o 'render' (formato compaeros).");return d&&!o.meta&&(o.meta={id:"legacy_"+Date.now(),name:"Simulador Importado",version:"0.0.0",inputs:[]}),o}catch(r){throw console.error("Error cargando simulador:",r),r}finally{URL.revokeObjectURL(i)}}const L_=({code:s,params:e})=>{const i=le.useRef(null),[r,o]=le.useState(null),[h,d]=le.useState(null),[y,v]=le.useState(!1);if(le.useEffect(()=>{let A=!0;return(async()=>{try{o(null);const O=await U_(s);A&&d(O)}catch(O){A&&o(O.message)}})(),()=>{A=!1}},[s]),le.useEffect(()=>{if(!h||!i.current||!y)return;const A=i.current;A.innerHTML="";try{if(h.init)h.init(A,e),h.update&&h.update(A,e);else if(h.render){const S=h.meta?.name||"Simulador",O=h.render(e,S),G=/<script>([\s\S]*?)<\/script>/,$=O.match(G),et=O.replace(G,""),W=$?$[1]:null;if(A.innerHTML=et,W){const dt=document.createElement("script");dt.textContent=W,document.body.appendChild(dt),setTimeout(()=>dt.remove(),10)}}}catch(S){console.error("Error ejecucin:",S),A.innerHTML=`<div class="feedback-incorrect">Error: ${S.message}</div>`}return()=>{h.destroy&&h.destroy(A),A.innerHTML=""}},[h,e,y]),r)return F.jsxs("div",{className:"feedback-incorrect",children:["Error: ",r]});if(!h)return F.jsx("div",{className:"loading",children:"Cargando..."});const _=h.meta?.name||"Simulador";return F.jsxs("div",{className:"my-4",children:[F.jsx("button",{className:`btn-sim ${y?"btn-sim-rojo":""}`,onClick:()=>v(!y),children:y?`Ocultar ${_}`:`Abrir ${_}`}),y&&F.jsxs("div",{className:"simulador-box fade-in",children:[F.jsx("div",{ref:i,style:{minHeight:"50px"}}),F.jsxs("div",{className:"text-muted text-sm mt-2",style:{fontSize:"0.8em",fontStyle:"italic"},children:["Formato: ",h.init?"Nativo V2":"Legacy V1"]})]})]})};const EE=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TE=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),Sy=s=>{const e=TE(s);return e.charAt(0).toUpperCase()+e.slice(1)},j_=(...s)=>s.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),AE=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var SE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bE=le.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:o="",children:h,iconNode:d,...y},v)=>le.createElement("svg",{ref:v,...SE,width:e,height:e,stroke:s,strokeWidth:r?Number(i)*24/Number(e):i,className:j_("lucide",o),...!h&&!AE(y)&&{"aria-hidden":"true"},...y},[...d.map(([_,A])=>le.createElement(_,A)),...Array.isArray(h)?h:[h]]));const Fe=(s,e)=>{const i=le.forwardRef(({className:r,...o},h)=>le.createElement(bE,{ref:h,iconNode:e,className:j_(`lucide-${EE(Sy(s))}`,`lucide-${s}`,r),...o}));return i.displayName=Sy(s),i};const RE=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],wE=Fe("arrow-down",RE);const CE=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],DE=Fe("arrow-up",CE);const VE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],IE=Fe("circle-check-big",VE);const NE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ME=Fe("circle-question-mark",NE);const OE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xE=Fe("download",OE);const zE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UE=Fe("eye",zE);const LE=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jE=Fe("file-text",LE);const BE=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],kE=Fe("folder-open",BE);const qE=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],PE=Fe("gamepad-2",qE);const HE=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],GE=Fe("moon",HE);const QE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],FE=Fe("save",QE);const YE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],XE=Fe("sun",YE);const KE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ZE=Fe("trash-2",KE);const JE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$E=Fe("triangle-alert",JE);const WE=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],tT=Fe("undo",WE);const eT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nT=Fe("upload",eT);const iT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aT=Fe("x",iT),rT=({block:s,availableSimulators:e,onUpdate:i,onDelete:r,onMoveUp:o,onMoveDown:h,isFirst:d,isLast:y})=>{const v=S=>{i({...s,content:S.target.value})},_=S=>{const O=S.target.value;i({...s,simulatorId:O,simConfig:{}})},A=e.find(S=>S.id===s.simulatorId);return F.jsxs("div",{className:"paper-container fade-in",style:{position:"relative",padding:"1rem",border:"1px solid var(--border-color)",marginBottom:"1rem"},children:[F.jsxs("div",{className:"toolbar-line",style:{justifyContent:"space-between",marginBottom:"0.5rem"},children:[F.jsx("span",{className:"badge",children:s.type==="simulator"?" Simulador":" Texto / LaTeX"}),F.jsxs("div",{style:{display:"flex",gap:"4px"},children:[F.jsx("button",{onClick:o,disabled:d,title:"Subir",children:F.jsx(DE,{size:16})}),F.jsx("button",{onClick:h,disabled:y,title:"Bajar",children:F.jsx(wE,{size:16})}),F.jsx("button",{onClick:r,className:"delete-btn",style:{color:"var(--brand-error)",borderColor:"var(--brand-error)"},title:"Eliminar",children:F.jsx(ZE,{size:16})})]})]}),s.type==="text"&&F.jsx("textarea",{value:s.content,onChange:v,placeholder:"Escribe aqu tu contenido... (Soporta LaTeX entre \\( \\))",rows:4,style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid var(--border-color)"}}),s.type==="simulator"&&F.jsxs("div",{children:[F.jsxs("div",{className:"row",style:{marginBottom:"1rem"},children:[F.jsx("label",{style:{fontWeight:"bold",fontSize:"0.9rem",display:"block",marginBottom:"5px"},children:"Elige un Simulador:"}),F.jsxs("select",{value:s.simulatorId||"",onChange:_,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid var(--border-color)"},children:[F.jsx("option",{value:"",children:"-- Selecciona un simulador --"}),e.map(S=>F.jsxs("option",{value:S.id,children:[S.name," (v",S.version,")"]},S.id))]})]}),A?F.jsxs("div",{style:{border:"2px dashed var(--brand-secondary)",padding:"10px",borderRadius:"8px",background:"#f8fafc"},children:[F.jsx("p",{style:{fontSize:"0.8em",color:"var(--text-muted)",textAlign:"center",margin:"0 0 10px 0"},children:" Vista Previa en Vivo "}),F.jsx(L_,{code:A.code,params:s.simConfig||{}})]}):s.simulatorId&&F.jsx("p",{className:"text-muted",children:" Simulador no encontrado (fue borrado?)"})]})]})},sT=({page:s,availableSimulators:e,onUpdatePage:i})=>{const r=(_,A)=>{const S=s.blocks.map(O=>O.id===_?A:O);i({...s,blocks:S})},o=_=>{if(!confirm("Eliminar este bloque?"))return;const A=s.blocks.filter(S=>S.id!==_);i({...s,blocks:A})},h=(_,A)=>{const S=[...s.blocks],O=_+A;[S[_],S[O]]=[S[O],S[_]],i({...s,blocks:S})},d=_=>{const A={id:crypto.randomUUID(),type:_,content:"",simulatorId:"",simConfig:{}};i({...s,blocks:[...s.blocks,A]})},y=_=>{i({...s,title:_.target.value})},v=_=>{i({...s,type:_.target.value})};return F.jsxs("div",{className:"page-editor",children:[F.jsxs("div",{style:{marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid var(--border-color)"},children:[F.jsxs("div",{style:{marginBottom:"0.5rem"},children:[F.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginRight:"10px"},children:"Tipo de Pgina"}),F.jsxs("select",{value:s.type||"seccion",onChange:v,style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid var(--border-color)",fontWeight:"bold",color:"var(--brand-primary)"},children:[F.jsx("option",{value:"portada",children:"Portada"}),F.jsx("option",{value:"capitulo",children:"Captulo"}),F.jsx("option",{value:"seccion",children:"Seccin"}),F.jsx("option",{value:"subseccion",children:"Subseccin"})]})]}),F.jsx("input",{type:"text",value:s.title,onChange:y,placeholder:"Ttulo de la Pgina",style:{fontSize:"1.8rem",fontWeight:"bold",width:"100%",padding:"0.5rem 0",border:"none",borderBottom:"2px solid var(--brand-primary)",background:"transparent",color:"var(--text-primary)",outline:"none"}})]}),F.jsxs("div",{className:"blocks-list",children:[s.blocks.length===0&&F.jsx("div",{className:"empty-state",children:"Esta pgina est vaca. Aade contenido abajo."}),s.blocks.map((_,A)=>F.jsx(rT,{block:_,availableSimulators:e,onUpdate:S=>r(_.id,S),onDelete:()=>o(_.id),onMoveUp:()=>h(A,-1),onMoveDown:()=>h(A,1),isFirst:A===0,isLast:A===s.blocks.length-1},_.id))]}),F.jsxs("div",{className:"actions-area",style:{marginTop:"2rem",paddingTop:"1rem",borderTop:"1px dashed var(--border-color)",display:"flex",gap:"1rem",justifyContent:"center"},children:[F.jsxs("button",{onClick:()=>d("text"),style:{display:"flex",alignItems:"center",gap:"8px"},children:[F.jsx(jE,{size:18})," Aadir Texto"]}),F.jsxs("button",{onClick:()=>d("simulator"),style:{display:"flex",alignItems:"center",gap:"8px",borderColor:"var(--brand-accent)"},children:[F.jsx(PE,{size:18})," Aadir Simulador"]})]})]})},lT=()=>{};var by={};const B_=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},oT=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const o=s[i++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const h=s[i++];e[r++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=s[i++],d=s[i++],y=s[i++],v=((o&7)<<18|(h&63)<<12|(d&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const h=s[i++],d=s[i++];e[r++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const h=s[o],d=o+1<s.length,y=d?s[o+1]:0,v=o+2<s.length,_=v?s[o+2]:0,A=h>>2,S=(h&3)<<4|y>>4;let O=(y&15)<<2|_>>6,G=_&63;v||(G=64,d||(O=64)),r.push(i[A],i[S],i[O],i[G])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(B_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):oT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const h=i[s.charAt(o++)],y=o<s.length?i[s.charAt(o)]:0;++o;const _=o<s.length?i[s.charAt(o)]:64;++o;const S=o<s.length?i[s.charAt(o)]:64;if(++o,h==null||y==null||_==null||S==null)throw new uT;const O=h<<2|y>>4;if(r.push(O),_!==64){const G=y<<4&240|_>>2;if(r.push(G),S!==64){const $=_<<6&192|S;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class uT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cT=function(s){const e=B_(s);return k_.encodeByteArray(e,!0)},Zu=function(s){return cT(s).replace(/\./g,"")},hT=function(s){try{return k_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const dT=()=>fT().__FIREBASE_DEFAULTS__,mT=()=>{if(typeof process>"u"||typeof by>"u")return;const s=by.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},gT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&hT(s[1]);return e&&JSON.parse(e)},hd=()=>{try{return lT()||dT()||mT()||gT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},pT=s=>hd()?.emulatorHosts?.[s],yT=s=>{const e=pT(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},q_=()=>hd()?.config;class _T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}function fd(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vT(s){return(await fetch(s,{credentials:"include"})).ok}function ET(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Zu(JSON.stringify(i)),Zu(JSON.stringify(d)),""].join(".")}const Hl={};function TT(){const s={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?s.emulator.push(e):s.prod.push(e);return s}function AT(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let Ry=!1;function ST(s,e){if(typeof window>"u"||typeof document>"u"||!fd(window.location.host)||Hl[s]===e||Hl[s]||Ry)return;Hl[s]=e;function i(O){return`__firebase__banner__${O}`}const r="__firebase__banner",h=TT().prod.length>0;function d(){const O=document.getElementById(r);O&&O.remove()}function y(O){O.style.display="flex",O.style.background="#7faaf0",O.style.position="fixed",O.style.bottom="5px",O.style.left="5px",O.style.padding=".5em",O.style.borderRadius="5px",O.style.alignItems="center"}function v(O,G){O.setAttribute("width","24"),O.setAttribute("id",G),O.setAttribute("height","24"),O.setAttribute("viewBox","0 0 24 24"),O.setAttribute("fill","none"),O.style.marginLeft="-6px"}function _(){const O=document.createElement("span");return O.style.cursor="pointer",O.style.marginLeft="16px",O.style.fontSize="24px",O.innerHTML=" &times;",O.onclick=()=>{Ry=!0,d()},O}function A(O,G){O.setAttribute("id",G),O.innerText="Learn more",O.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",O.setAttribute("target","__blank"),O.style.paddingLeft="5px",O.style.textDecoration="underline"}function S(){const O=AT(r),G=i("text"),$=document.getElementById(G)||document.createElement("span"),et=i("learnmore"),W=document.getElementById(et)||document.createElement("a"),dt=i("preprendIcon"),At=document.getElementById(dt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(O.created){const J=O.element;y(J),A(W,et);const ut=_();v(At,dt),J.append(At,$,W,ut),document.body.appendChild(J)}h?($.innerText="Preview backend disconnected.",At.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(At.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function bT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RT(){const s=hd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wT(){return!RT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CT(){try{return typeof indexedDB=="object"}catch{return!1}}function DT(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}const VT="FirebaseError";class Cs extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=VT,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P_.prototype.create)}}class P_{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?IT(h,r):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new Cs(o,y,r)}}function IT(s,e){return s.replace(NT,(i,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const NT=/\{\$([^}]+)}/g;function Ju(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const o of i){if(!r.includes(o))return!1;const h=s[o],d=e[o];if(wy(h)&&wy(d)){if(!Ju(h,d))return!1}else if(h!==d)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function wy(s){return s!==null&&typeof s=="object"}function _r(s){return s&&s._delegate?s._delegate:s}class Xl{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mr="[DEFAULT]";class MT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new _T;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xT(e))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});r.resolve(h)}catch{}}}}clearInstance(e=mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mr){return this.instances.has(e)}getOptions(e=mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[h,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(h);r===y&&d.resolve(o)}return o}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const h=this.instances.get(r);return h&&e(h,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OT(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mr){return this.component?this.component.multipleInstances?e:mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OT(s){return s===mr?void 0:s}function xT(s){return s.instantiationMode==="EAGER"}class zT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new MT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}var Lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Lt||(Lt={}));const UT={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},LT=Lt.INFO,jT={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},BT=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=jT[e];if(o)console[o](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H_{constructor(e){this.name=e,this._logLevel=LT,this._logHandler=BT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const kT=(s,e)=>e.some(i=>s instanceof i);let Cy,Dy;function qT(){return Cy||(Cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G_=new WeakMap,kf=new WeakMap,Q_=new WeakMap,Nf=new WeakMap,dd=new WeakMap;function HT(s){const e=new Promise((i,r)=>{const o=()=>{s.removeEventListener("success",h),s.removeEventListener("error",d)},h=()=>{i(ba(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",h),s.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&G_.set(i,s)}).catch(()=>{}),dd.set(e,s),e}function GT(s){if(kf.has(s))return;const e=new Promise((i,r)=>{const o=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",d),s.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",h),s.addEventListener("error",d),s.addEventListener("abort",d)});kf.set(s,e)}let qf={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return kf.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Q_.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ba(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function QT(s){qf=s(qf)}function FT(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(Mf(this),e,...i);return Q_.set(r,e.sort?e.sort():[e]),ba(r)}:PT().includes(s)?function(...e){return s.apply(Mf(this),e),ba(G_.get(this))}:function(...e){return ba(s.apply(Mf(this),e))}}function YT(s){return typeof s=="function"?FT(s):(s instanceof IDBTransaction&&GT(s),kT(s,qT())?new Proxy(s,qf):s)}function ba(s){if(s instanceof IDBRequest)return HT(s);if(Nf.has(s))return Nf.get(s);const e=YT(s);return e!==s&&(Nf.set(s,e),dd.set(e,s)),e}const Mf=s=>dd.get(s);function XT(s,e,{blocked:i,upgrade:r,blocking:o,terminated:h}={}){const d=indexedDB.open(s,e),y=ba(d);return r&&d.addEventListener("upgradeneeded",v=>{r(ba(d.result),v.oldVersion,v.newVersion,ba(d.transaction),v)}),i&&d.addEventListener("blocked",v=>i(v.oldVersion,v.newVersion,v)),y.then(v=>{h&&v.addEventListener("close",()=>h()),o&&v.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),y}const KT=["get","getKey","getAll","getAllKeys","count"],ZT=["put","add","delete","clear"],Of=new Map;function Vy(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,o=ZT.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||KT.includes(i)))return;const h=async function(d,...y){const v=this.transaction(d,o?"readwrite":"readonly");let _=v.store;return r&&(_=_.index(y.shift())),(await Promise.all([_[i](...y),o&&v.done]))[0]};return Of.set(e,h),h}QT(s=>({...s,get:(e,i,r)=>Vy(e,i)||s.get(e,i,r),has:(e,i)=>!!Vy(e,i)||s.has(e,i)}));class JT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if($T(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function $T(s){return s.getComponent()?.type==="VERSION"}const Pf="@firebase/app",Iy="0.14.6";const qi=new H_("@firebase/app"),WT="@firebase/app-compat",tA="@firebase/analytics-compat",eA="@firebase/analytics",nA="@firebase/app-check-compat",iA="@firebase/app-check",aA="@firebase/auth",rA="@firebase/auth-compat",sA="@firebase/database",lA="@firebase/data-connect",oA="@firebase/database-compat",uA="@firebase/functions",cA="@firebase/functions-compat",hA="@firebase/installations",fA="@firebase/installations-compat",dA="@firebase/messaging",mA="@firebase/messaging-compat",gA="@firebase/performance",pA="@firebase/performance-compat",yA="@firebase/remote-config",_A="@firebase/remote-config-compat",vA="@firebase/storage",EA="@firebase/storage-compat",TA="@firebase/firestore",AA="@firebase/ai",SA="@firebase/firestore-compat",bA="firebase",RA="12.6.0";const Hf="[DEFAULT]",wA={[Pf]:"fire-core",[WT]:"fire-core-compat",[eA]:"fire-analytics",[tA]:"fire-analytics-compat",[iA]:"fire-app-check",[nA]:"fire-app-check-compat",[aA]:"fire-auth",[rA]:"fire-auth-compat",[sA]:"fire-rtdb",[lA]:"fire-data-connect",[oA]:"fire-rtdb-compat",[uA]:"fire-fn",[cA]:"fire-fn-compat",[hA]:"fire-iid",[fA]:"fire-iid-compat",[dA]:"fire-fcm",[mA]:"fire-fcm-compat",[gA]:"fire-perf",[pA]:"fire-perf-compat",[yA]:"fire-rc",[_A]:"fire-rc-compat",[vA]:"fire-gcs",[EA]:"fire-gcs-compat",[TA]:"fire-fst",[SA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[bA]:"fire-js-all"};const $u=new Map,CA=new Map,Gf=new Map;function Ny(s,e){try{s.container.addComponent(e)}catch(i){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function Wu(s){const e=s.name;if(Gf.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;Gf.set(e,s);for(const i of $u.values())Ny(i,s);for(const i of CA.values())Ny(i,s);return!0}function DA(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function VA(s){return s==null?!1:s.settings!==void 0}const IA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ra=new P_("app","Firebase",IA);class NA{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}const MA=RA;function F_(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:Hf,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Ra.create("bad-app-name",{appName:String(o)});if(i||(i=q_()),!i)throw Ra.create("no-options");const h=$u.get(o);if(h){if(Ju(i,h.options)&&Ju(r,h.config))return h;throw Ra.create("duplicate-app",{appName:o})}const d=new zT(o);for(const v of Gf.values())d.addComponent(v);const y=new NA(i,r,d);return $u.set(o,y),y}function OA(s=Hf){const e=$u.get(s);if(!e&&s===Hf&&q_())return F_();if(!e)throw Ra.create("no-app",{appName:s});return e}function vs(s,e,i){let r=wA[s]??s;i&&(r+=`-${i}`);const o=r.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(d.join(" "));return}Wu(new Xl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const xA="firebase-heartbeat-database",zA=1,Kl="firebase-heartbeat-store";let xf=null;function Y_(){return xf||(xf=XT(xA,zA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Kl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Ra.create("idb-open",{originalErrorMessage:s.message})})),xf}async function UA(s){try{const i=(await Y_()).transaction(Kl),r=await i.objectStore(Kl).get(X_(s));return await i.done,r}catch(e){if(e instanceof Cs)qi.warn(e.message);else{const i=Ra.create("idb-get",{originalErrorMessage:e?.message});qi.warn(i.message)}}}async function My(s,e){try{const r=(await Y_()).transaction(Kl,"readwrite");await r.objectStore(Kl).put(e,X_(s)),await r.done}catch(i){if(i instanceof Cs)qi.warn(i.message);else{const r=Ra.create("idb-set",{originalErrorMessage:i?.message});qi.warn(r.message)}}}function X_(s){return`${s.name}!${s.options.appId}`}const LA=1024,jA=30;class BA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new qA(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Oy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>jA){const o=PA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Oy(),{heartbeatsToSend:i,unsentEntries:r}=kA(this._heartbeatsCache.heartbeats),o=Zu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return qi.warn(e),""}}}function Oy(){return new Date().toISOString().substring(0,10)}function kA(s,e=LA){const i=[];let r=s.slice();for(const o of s){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),xy(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),xy(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class qA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CT()?DT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await UA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xy(s){return Zu(JSON.stringify({version:2,heartbeats:s})).length}function PA(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}function HA(s){Wu(new Xl("platform-logger",e=>new JT(e),"PRIVATE")),Wu(new Xl("heartbeat",e=>new BA(e),"PRIVATE")),vs(Pf,Iy,s),vs(Pf,Iy,"esm2020"),vs("fire-js","")}HA("");var GA="firebase",QA="12.7.0";vs(GA,QA,"app");var zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wa,K_;(function(){var s;function e(R,b){function D(){}D.prototype=b.prototype,R.F=b.prototype,R.prototype=new D,R.prototype.constructor=R,R.D=function(M,V,z){for(var w=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)w[Yt-2]=arguments[Yt];return b.prototype[V].apply(M,w)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,b,D){D||(D=0);const M=Array(16);if(typeof b=="string")for(var V=0;V<16;++V)M[V]=b.charCodeAt(D++)|b.charCodeAt(D++)<<8|b.charCodeAt(D++)<<16|b.charCodeAt(D++)<<24;else for(V=0;V<16;++V)M[V]=b[D++]|b[D++]<<8|b[D++]<<16|b[D++]<<24;b=R.g[0],D=R.g[1],V=R.g[2];let z=R.g[3],w;w=b+(z^D&(V^z))+M[0]+3614090360&4294967295,b=D+(w<<7&4294967295|w>>>25),w=z+(V^b&(D^V))+M[1]+3905402710&4294967295,z=b+(w<<12&4294967295|w>>>20),w=V+(D^z&(b^D))+M[2]+606105819&4294967295,V=z+(w<<17&4294967295|w>>>15),w=D+(b^V&(z^b))+M[3]+3250441966&4294967295,D=V+(w<<22&4294967295|w>>>10),w=b+(z^D&(V^z))+M[4]+4118548399&4294967295,b=D+(w<<7&4294967295|w>>>25),w=z+(V^b&(D^V))+M[5]+1200080426&4294967295,z=b+(w<<12&4294967295|w>>>20),w=V+(D^z&(b^D))+M[6]+2821735955&4294967295,V=z+(w<<17&4294967295|w>>>15),w=D+(b^V&(z^b))+M[7]+4249261313&4294967295,D=V+(w<<22&4294967295|w>>>10),w=b+(z^D&(V^z))+M[8]+1770035416&4294967295,b=D+(w<<7&4294967295|w>>>25),w=z+(V^b&(D^V))+M[9]+2336552879&4294967295,z=b+(w<<12&4294967295|w>>>20),w=V+(D^z&(b^D))+M[10]+4294925233&4294967295,V=z+(w<<17&4294967295|w>>>15),w=D+(b^V&(z^b))+M[11]+2304563134&4294967295,D=V+(w<<22&4294967295|w>>>10),w=b+(z^D&(V^z))+M[12]+1804603682&4294967295,b=D+(w<<7&4294967295|w>>>25),w=z+(V^b&(D^V))+M[13]+4254626195&4294967295,z=b+(w<<12&4294967295|w>>>20),w=V+(D^z&(b^D))+M[14]+2792965006&4294967295,V=z+(w<<17&4294967295|w>>>15),w=D+(b^V&(z^b))+M[15]+1236535329&4294967295,D=V+(w<<22&4294967295|w>>>10),w=b+(V^z&(D^V))+M[1]+4129170786&4294967295,b=D+(w<<5&4294967295|w>>>27),w=z+(D^V&(b^D))+M[6]+3225465664&4294967295,z=b+(w<<9&4294967295|w>>>23),w=V+(b^D&(z^b))+M[11]+643717713&4294967295,V=z+(w<<14&4294967295|w>>>18),w=D+(z^b&(V^z))+M[0]+3921069994&4294967295,D=V+(w<<20&4294967295|w>>>12),w=b+(V^z&(D^V))+M[5]+3593408605&4294967295,b=D+(w<<5&4294967295|w>>>27),w=z+(D^V&(b^D))+M[10]+38016083&4294967295,z=b+(w<<9&4294967295|w>>>23),w=V+(b^D&(z^b))+M[15]+3634488961&4294967295,V=z+(w<<14&4294967295|w>>>18),w=D+(z^b&(V^z))+M[4]+3889429448&4294967295,D=V+(w<<20&4294967295|w>>>12),w=b+(V^z&(D^V))+M[9]+568446438&4294967295,b=D+(w<<5&4294967295|w>>>27),w=z+(D^V&(b^D))+M[14]+3275163606&4294967295,z=b+(w<<9&4294967295|w>>>23),w=V+(b^D&(z^b))+M[3]+4107603335&4294967295,V=z+(w<<14&4294967295|w>>>18),w=D+(z^b&(V^z))+M[8]+1163531501&4294967295,D=V+(w<<20&4294967295|w>>>12),w=b+(V^z&(D^V))+M[13]+2850285829&4294967295,b=D+(w<<5&4294967295|w>>>27),w=z+(D^V&(b^D))+M[2]+4243563512&4294967295,z=b+(w<<9&4294967295|w>>>23),w=V+(b^D&(z^b))+M[7]+1735328473&4294967295,V=z+(w<<14&4294967295|w>>>18),w=D+(z^b&(V^z))+M[12]+2368359562&4294967295,D=V+(w<<20&4294967295|w>>>12),w=b+(D^V^z)+M[5]+4294588738&4294967295,b=D+(w<<4&4294967295|w>>>28),w=z+(b^D^V)+M[8]+2272392833&4294967295,z=b+(w<<11&4294967295|w>>>21),w=V+(z^b^D)+M[11]+1839030562&4294967295,V=z+(w<<16&4294967295|w>>>16),w=D+(V^z^b)+M[14]+4259657740&4294967295,D=V+(w<<23&4294967295|w>>>9),w=b+(D^V^z)+M[1]+2763975236&4294967295,b=D+(w<<4&4294967295|w>>>28),w=z+(b^D^V)+M[4]+1272893353&4294967295,z=b+(w<<11&4294967295|w>>>21),w=V+(z^b^D)+M[7]+4139469664&4294967295,V=z+(w<<16&4294967295|w>>>16),w=D+(V^z^b)+M[10]+3200236656&4294967295,D=V+(w<<23&4294967295|w>>>9),w=b+(D^V^z)+M[13]+681279174&4294967295,b=D+(w<<4&4294967295|w>>>28),w=z+(b^D^V)+M[0]+3936430074&4294967295,z=b+(w<<11&4294967295|w>>>21),w=V+(z^b^D)+M[3]+3572445317&4294967295,V=z+(w<<16&4294967295|w>>>16),w=D+(V^z^b)+M[6]+76029189&4294967295,D=V+(w<<23&4294967295|w>>>9),w=b+(D^V^z)+M[9]+3654602809&4294967295,b=D+(w<<4&4294967295|w>>>28),w=z+(b^D^V)+M[12]+3873151461&4294967295,z=b+(w<<11&4294967295|w>>>21),w=V+(z^b^D)+M[15]+530742520&4294967295,V=z+(w<<16&4294967295|w>>>16),w=D+(V^z^b)+M[2]+3299628645&4294967295,D=V+(w<<23&4294967295|w>>>9),w=b+(V^(D|~z))+M[0]+4096336452&4294967295,b=D+(w<<6&4294967295|w>>>26),w=z+(D^(b|~V))+M[7]+1126891415&4294967295,z=b+(w<<10&4294967295|w>>>22),w=V+(b^(z|~D))+M[14]+2878612391&4294967295,V=z+(w<<15&4294967295|w>>>17),w=D+(z^(V|~b))+M[5]+4237533241&4294967295,D=V+(w<<21&4294967295|w>>>11),w=b+(V^(D|~z))+M[12]+1700485571&4294967295,b=D+(w<<6&4294967295|w>>>26),w=z+(D^(b|~V))+M[3]+2399980690&4294967295,z=b+(w<<10&4294967295|w>>>22),w=V+(b^(z|~D))+M[10]+4293915773&4294967295,V=z+(w<<15&4294967295|w>>>17),w=D+(z^(V|~b))+M[1]+2240044497&4294967295,D=V+(w<<21&4294967295|w>>>11),w=b+(V^(D|~z))+M[8]+1873313359&4294967295,b=D+(w<<6&4294967295|w>>>26),w=z+(D^(b|~V))+M[15]+4264355552&4294967295,z=b+(w<<10&4294967295|w>>>22),w=V+(b^(z|~D))+M[6]+2734768916&4294967295,V=z+(w<<15&4294967295|w>>>17),w=D+(z^(V|~b))+M[13]+1309151649&4294967295,D=V+(w<<21&4294967295|w>>>11),w=b+(V^(D|~z))+M[4]+4149444226&4294967295,b=D+(w<<6&4294967295|w>>>26),w=z+(D^(b|~V))+M[11]+3174756917&4294967295,z=b+(w<<10&4294967295|w>>>22),w=V+(b^(z|~D))+M[2]+718787259&4294967295,V=z+(w<<15&4294967295|w>>>17),w=D+(z^(V|~b))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+b&4294967295,R.g[1]=R.g[1]+(V+(w<<21&4294967295|w>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+z&4294967295}r.prototype.v=function(R,b){b===void 0&&(b=R.length);const D=b-this.blockSize,M=this.C;let V=this.h,z=0;for(;z<b;){if(V==0)for(;z<=D;)o(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<b;)if(M[V++]=R.charCodeAt(z++),V==this.blockSize){o(this,M),V=0;break}}else for(;z<b;)if(M[V++]=R[z++],V==this.blockSize){o(this,M),V=0;break}}this.h=V,this.o+=b},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var b=1;b<R.length-8;++b)R[b]=0;b=this.o*8;for(var D=R.length-8;D<R.length;++D)R[D]=b&255,b/=256;for(this.v(R),R=Array(16),b=0,D=0;D<4;++D)for(let M=0;M<32;M+=8)R[b++]=this.g[D]>>>M&255;return R};function h(R,b){var D=y;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=b(R)}function d(R,b){this.h=b;const D=[];let M=!0;for(let V=R.length-1;V>=0;V--){const z=R[V]|0;M&&z==b||(D[V]=z,M=!1)}this.g=D}var y={};function v(R){return-128<=R&&R<128?h(R,function(b){return new d([b|0],b<0?-1:0)}):new d([R|0],R<0?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return W(_(-R));const b=[];let D=1;for(let M=0;R>=D;M++)b[M]=R/D|0,D*=4294967296;return new d(b,0)}function A(R,b){if(R.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R.charAt(0)=="-")return W(A(R.substring(1),b));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=_(Math.pow(b,8));let M=S;for(let z=0;z<R.length;z+=8){var V=Math.min(8,R.length-z);const w=parseInt(R.substring(z,z+V),b);V<8?(V=_(Math.pow(b,V)),M=M.j(V).add(_(w))):(M=M.j(D),M=M.add(_(w)))}return M}var S=v(0),O=v(1),G=v(16777216);s=d.prototype,s.m=function(){if(et(this))return-W(this).m();let R=0,b=1;for(let D=0;D<this.g.length;D++){const M=this.i(D);R+=(M>=0?M:4294967296+M)*b,b*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(et(this))return"-"+W(this).toString(R);const b=_(Math.pow(R,6));var D=this;let M="";for(;;){const V=ut(D,b).g;D=dt(D,V.j(b));let z=((D.g.length>0?D.g[0]:D.h)>>>0).toString(R);if(D=V,$(D))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(let b=0;b<R.g.length;b++)if(R.g[b]!=0)return!1;return!0}function et(R){return R.h==-1}s.l=function(R){return R=dt(this,R),et(R)?-1:$(R)?0:1};function W(R){const b=R.g.length,D=[];for(let M=0;M<b;M++)D[M]=~R.g[M];return new d(D,~R.h).add(O)}s.abs=function(){return et(this)?W(this):this},s.add=function(R){const b=Math.max(this.g.length,R.g.length),D=[];let M=0;for(let V=0;V<=b;V++){let z=M+(this.i(V)&65535)+(R.i(V)&65535),w=(z>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);M=w>>>16,z&=65535,w&=65535,D[V]=w<<16|z}return new d(D,D[D.length-1]&-2147483648?-1:0)};function dt(R,b){return R.add(W(b))}s.j=function(R){if($(this)||$(R))return S;if(et(this))return et(R)?W(this).j(W(R)):W(W(this).j(R));if(et(R))return W(this.j(W(R)));if(this.l(G)<0&&R.l(G)<0)return _(this.m()*R.m());const b=this.g.length+R.g.length,D=[];for(var M=0;M<2*b;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<R.g.length;V++){const z=this.i(M)>>>16,w=this.i(M)&65535,Yt=R.i(V)>>>16,se=R.i(V)&65535;D[2*M+2*V]+=w*se,At(D,2*M+2*V),D[2*M+2*V+1]+=z*se,At(D,2*M+2*V+1),D[2*M+2*V+1]+=w*Yt,At(D,2*M+2*V+1),D[2*M+2*V+2]+=z*Yt,At(D,2*M+2*V+2)}for(R=0;R<b;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=b;R<2*b;R++)D[R]=0;return new d(D,0)};function At(R,b){for(;(R[b]&65535)!=R[b];)R[b+1]+=R[b]>>>16,R[b]&=65535,b++}function J(R,b){this.g=R,this.h=b}function ut(R,b){if($(b))throw Error("division by zero");if($(R))return new J(S,S);if(et(R))return b=ut(W(R),b),new J(W(b.g),W(b.h));if(et(b))return b=ut(R,W(b)),new J(W(b.g),b.h);if(R.g.length>30){if(et(R)||et(b))throw Error("slowDivide_ only works with positive integers.");for(var D=O,M=b;M.l(R)<=0;)D=vt(D),M=vt(M);var V=pt(D,1),z=pt(M,1);for(M=pt(M,2),D=pt(D,2);!$(M);){var w=z.add(M);w.l(R)<=0&&(V=V.add(D),z=w),M=pt(M,1),D=pt(D,1)}return b=dt(R,V.j(b)),new J(V,b)}for(V=S;R.l(b)>=0;){for(D=Math.max(1,Math.floor(R.m()/b.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=_(D),w=z.j(b);et(w)||w.l(R)>0;)D-=M,z=_(D),w=z.j(b);$(z)&&(z=O),V=V.add(z),R=dt(R,w)}return new J(V,R)}s.B=function(R){return ut(this,R).h},s.and=function(R){const b=Math.max(this.g.length,R.g.length),D=[];for(let M=0;M<b;M++)D[M]=this.i(M)&R.i(M);return new d(D,this.h&R.h)},s.or=function(R){const b=Math.max(this.g.length,R.g.length),D=[];for(let M=0;M<b;M++)D[M]=this.i(M)|R.i(M);return new d(D,this.h|R.h)},s.xor=function(R){const b=Math.max(this.g.length,R.g.length),D=[];for(let M=0;M<b;M++)D[M]=this.i(M)^R.i(M);return new d(D,this.h^R.h)};function vt(R){const b=R.g.length+1,D=[];for(let M=0;M<b;M++)D[M]=R.i(M)<<1|R.i(M-1)>>>31;return new d(D,R.h)}function pt(R,b){const D=b>>5;b%=32;const M=R.g.length-D,V=[];for(let z=0;z<M;z++)V[z]=b>0?R.i(z+D)>>>b|R.i(z+D+1)<<32-b:R.i(z+D);return new d(V,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,K_=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,wa=d}).apply(typeof zy<"u"?zy:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Z_,Bl,J_,Gu,Qf,$_,W_,tv;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=i(this);function o(u,m){if(m)t:{var p=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in p))break t;p=p[U]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&e(p,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var p=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&p.push([T,m[T]]);return p}});var h=h||{},d=this||self;function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,p){return u.call.apply(u.bind,arguments)}function _(u,m,p){return _=v,_.apply(null,arguments)}function A(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function S(u,m){function p(){}p.prototype=m.prototype,u.Z=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Ob=function(T,U,k){for(var tt=Array(arguments.length-2),St=2;St<arguments.length;St++)tt[St-2]=arguments[St];return m.prototype[U].apply(T,tt)}}var O=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function G(u){const m=u.length;if(m>0){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function $(u,m){for(let T=1;T<arguments.length;T++){const U=arguments[T];var p=typeof U;if(p=p!="object"?p:U?Array.isArray(U)?"array":p:"null",p=="array"||p=="object"&&typeof U.length=="number"){p=u.length||0;const k=U.length||0;u.length=p+k;for(let tt=0;tt<k;tt++)u[p+tt]=U[tt]}else u.push(U)}}class et{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function W(u){d.setTimeout(()=>{throw u},0)}function dt(){var u=R;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class At{constructor(){this.h=this.g=null}add(m,p){const T=J.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var J=new et(()=>new ut,u=>u.reset());class ut{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,pt=!1,R=new At,b=()=>{const u=Promise.resolve(void 0);vt=()=>{u.then(D)}};function D(){for(var u;u=dt();){try{u.h.call(u.g)}catch(p){W(p)}var m=J;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}pt=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};d.addEventListener("test",p,m),d.removeEventListener("test",p,m)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function Yt(u,m){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}S(Yt,V),Yt.prototype.init=function(u,m){const p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Yt.Z.h.call(this)},Yt.prototype.h=function(){Yt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),P=0;function nt(u,m,p,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=U,this.key=++P,this.da=this.fa=!1}function ct(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ot(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function Ht(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function N(u){const m={};for(const p in u)m[p]=u[p];return m}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(u,m){let p,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(p in T)u[p]=T[p];for(let k=0;k<X.length;k++)p=X[k],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function st(u){this.src=u,this.g={},this.h=0}st.prototype.add=function(u,m,p,T,U){const k=u.toString();u=this.g[k],u||(u=this.g[k]=[],this.h++);const tt=Rt(u,m,T,U);return tt>-1?(m=u[tt],p||(m.fa=!1)):(m=new nt(m,this.src,k,!!T,U),m.fa=p,u.push(m)),m};function yt(u,m){const p=m.type;if(p in u.g){var T=u.g[p],U=Array.prototype.indexOf.call(T,m,void 0),k;(k=U>=0)&&Array.prototype.splice.call(T,U,1),k&&(ct(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Rt(u,m,p,T){for(let U=0;U<u.length;++U){const k=u[U];if(!k.da&&k.listener==m&&k.capture==!!p&&k.ha==T)return U}return-1}var zt="closure_lm_"+(Math.random()*1e6|0),Ve={};function ie(u,m,p,T,U){if(Array.isArray(m)){for(let k=0;k<m.length;k++)ie(u,m[k],p,T,U);return null}return p=zs(p),u&&u[se]?u.J(m,p,y(T)?!!T.capture:!1,U):La(u,m,p,!1,T,U)}function La(u,m,p,T,U,k){if(!m)throw Error("Invalid event type");const tt=y(U)?!!U.capture:!!U;let St=ja(u);if(St||(u[zt]=St=new st(u)),p=St.add(m,p,T,tt,k),p.proxy)return p;if(T=Rr(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)z||(U=tt),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(Yn(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Rr(){function u(p){return m.call(u.src,u.listener,p)}const m=Os;return u}function wr(u,m,p,T,U){if(Array.isArray(m))for(var k=0;k<m.length;k++)wr(u,m[k],p,T,U);else T=y(T)?!!T.capture:!!T,p=zs(p),u&&u[se]?(u=u.i,k=String(m).toString(),k in u.g&&(m=u.g[k],p=Rt(m,p,T,U),p>-1&&(ct(m[p]),Array.prototype.splice.call(m,p,1),m.length==0&&(delete u.g[k],u.h--)))):u&&(u=ja(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Rt(m,p,T,U)),(p=u>-1?m[u]:null)&&Cr(p))}function Cr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[se])yt(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent(Yn(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=ja(m))?(yt(p,u),p.h==0&&(p.src=null,m[zt]=null)):ct(u)}}}function Yn(u){return u in Ve?Ve[u]:Ve[u]="on"+u}function Os(u,m){if(u.da)u=!0;else{m=new Yt(m,this);const p=u.listener,T=u.ha||u.src;u.fa&&Cr(u),u=p.call(T,m)}return u}function ja(u){return u=u[zt],u instanceof st?u:null}var xs="__closure_events_fn_"+(Math.random()*1e9>>>0);function zs(u){return typeof u=="function"?u:(u[xs]||(u[xs]=function(m){return u.handleEvent(m)}),u[xs])}function pe(){M.call(this),this.i=new st(this),this.M=this,this.G=null}S(pe,M),pe.prototype[se]=!0,pe.prototype.removeEventListener=function(u,m,p,T){wr(this,u,m,p,T)};function Ie(u,m){var p,T=u.G;if(T)for(p=[];T;T=T.G)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new V(m,u);else if(m instanceof V)m.target=m.target||u;else{var U=m;m=new V(T,u),it(m,U)}U=!0;let k,tt;if(p)for(tt=p.length-1;tt>=0;tt--)k=m.g=p[tt],U=Gi(k,T,!0,m)&&U;if(k=m.g=u,U=Gi(k,T,!0,m)&&U,U=Gi(k,T,!1,m)&&U,p)for(tt=0;tt<p.length;tt++)k=m.g=p[tt],U=Gi(k,T,!1,m)&&U}pe.prototype.N=function(){if(pe.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const p=u.g[m];for(let T=0;T<p.length;T++)ct(p[T]);delete u.g[m],u.h--}}this.G=null},pe.prototype.J=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},pe.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function Gi(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let k=0;k<m.length;++k){const tt=m[k];if(tt&&!tt.da&&tt.capture==p){const St=tt.listener,fe=tt.ha||tt.src;tt.fa&&yt(u.i,tt),U=St.call(fe,T)!==!1&&U}}return U&&!T.defaultPrevented}function wc(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function uo(u){u.g=wc(()=>{u.g=null,u.i&&(u.i=!1,uo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Je extends M{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:uo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ba(u){M.call(this),this.h=u,this.g={}}S(Ba,M);var Us=[];function Ls(u){Ot(u.g,function(m,p){this.g.hasOwnProperty(p)&&Cr(m)},u),u.g={}}Ba.prototype.N=function(){Ba.Z.N.call(this),Ls(this)},Ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qi=d.JSON.stringify,Cc=d.JSON.parse,co=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ho(){}function fo(){}var On={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Le(){V.call(this,"d")}S(Le,V);function _n(){V.call(this,"c")}S(_n,V);var he={},mo=null;function Dr(){return mo=mo||new pe}he.Ia="serverreachability";function go(u){V.call(this,he.Ia,u)}S(go,V);function Xn(u){const m=Dr();Ie(m,new go(m))}he.STAT_EVENT="statevent";function ka(u,m){V.call(this,he.STAT_EVENT,u),this.stat=m}S(ka,V);function ye(u){const m=Dr();Ie(m,new ka(m,u))}he.Ja="timingevent";function Kn(u,m){V.call(this,he.Ja,u),this.size=m}S(Kn,V);function Zn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function xn(){this.g=!0}xn.prototype.ua=function(){this.g=!1};function Dc(u,m,p,T,U,k){u.info(function(){if(u.g)if(k){var tt="",St=k.split("&");for(let kt=0;kt<St.length;kt++){var fe=St[kt].split("=");if(fe.length>1){const ae=fe[0];fe=fe[1];const An=ae.split("_");tt=An.length>=2&&An[1]=="type"?tt+(ae+"="+fe+"&"):tt+(ae+"=redacted&")}}}else tt=null;else tt=k;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+p+`
`+tt})}function po(u,m,p,T,U,k,tt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+p+`
`+k+" "+tt})}function Jn(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vc(u,p)+(T?" "+T:"")})}function qa(u,m){u.info(function(){return"TIMEOUT: "+m})}xn.prototype.info=function(){};function Vc(u,m){if(!u.g)return m;if(!m)return null;try{const k=JSON.parse(m);if(k){for(u=0;u<k.length;u++)if(Array.isArray(k[u])){var p=k[u];if(!(p.length<2)){var T=p[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let tt=1;tt<T.length;tt++)T[tt]=""}}}}return Qi(k)}catch{return m}}var Pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},js={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bs;function Ha(){}S(Ha,ho),Ha.prototype.g=function(){return new XMLHttpRequest},Bs=new Ha;function Ti(u){return encodeURIComponent(String(u))}function yo(u){var m=1;u=u.split(":");const p=[];for(;m>0&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function zn(u,m,p,T){this.j=u,this.i=m,this.l=p,this.S=T||1,this.V=new Ba(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var _e={},Oe={};function $n(u,m,p){u.M=1,u.A=Ga(Ee(m)),u.u=p,u.R=!0,Vr(u,null)}function Vr(u,m){u.F=Date.now(),Wn(u),u.B=Ee(u.A);var p=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Or(p.i,"t",T),u.C=0,p=u.j.L,u.h=new Un,u.g=Mo(u.j,p?m:null,!u.u),u.P>0&&(u.O=new Je(_(u.Y,u,u.g),u.P)),m=u.V,p=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Us[0]=U.toString()),U=Us);for(let k=0;k<U.length;k++){const tt=ie(p,U[k],T||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.J?N(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Xn(),Dc(u.i,u.v,u.B,u.l,u.S,u.u)}zn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Bn(u)==3?m.j():this.Y(u)},zn.prototype.Y=function(u){try{if(u==this.g)t:{const St=Bn(this.g),fe=this.g.ya(),kt=this.g.ca();if(!(St<3)&&(St!=3||this.g&&(this.h.h||this.g.la()||je(this.g)))){this.K||St!=4||fe==7||(fe==8||kt<=0?Xn(3):Xn(2)),ti(this);var m=this.g.ca();this.X=m;var p=Ic(this);if(this.o=m==200,po(this.i,this.v,this.B,this.l,this.S,St,m),this.o){if(this.U&&!this.L){e:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(T)){var k=T;break e}}k=null}if(u=k)Jn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ei(this,u);else{this.o=!1,this.m=3,ye(12),un(this),vn(this);break t}}if(this.R){u=!0;let ae;for(;!this.K&&this.C<p.length;)if(ae=vo(this,p),ae==Oe){St==4&&(this.m=4,ye(14),u=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(ae==_e){this.m=4,ye(15),Jn(this.i,this.l,p,"[Invalid Chunk]"),u=!1;break}else Jn(this.i,this.l,ae,null),ei(this,ae);if(_o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||p.length!=0||this.h.h||(this.m=1,ye(16),u=!1),this.o=this.o&&u,!u)Jn(this.i,this.l,p,"[Invalid Chunked Response]"),un(this),vn(this);else if(p.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),tl(tt),tt.P=!0,ye(11))}}else Jn(this.i,this.l,p,null),ei(this,p);St==4&&un(this),this.o&&!this.K&&(St==4?Do(this.j,this):(this.o=!1,Wn(this)))}else Si(this.g),m==400&&p.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),un(this),vn(this)}}}catch{}};function Ic(u){if(!_o(u))return u.g.la();const m=je(u.g);if(m==="")return"";let p="";const T=m.length,U=Bn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return un(u),vn(u),"";u.h.i=new d.TextDecoder}for(let k=0;k<T;k++)u.h.h=!0,p+=u.h.i.decode(m[k],{stream:!(U&&k==T-1)});return m.length=0,u.h.g+=p,u.C=0,u.h.g}function _o(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function vo(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Oe:(p=Number(m.substring(p,T)),isNaN(p)?_e:(T+=1,T+p>m.length?Oe:(m=m.slice(T,T+p),u.C=T+p,m)))}zn.prototype.cancel=function(){this.K=!0,un(this)};function Wn(u){u.T=Date.now()+u.H,Ir(u,u.H)}function Ir(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Zn(_(u.aa,u),m)}function ti(u){u.D&&(d.clearTimeout(u.D),u.D=null)}zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(qa(this.i,this.B),this.M!=2&&(Xn(),ye(17)),un(this),this.m=2,vn(this)):Ir(this,this.T-u)};function vn(u){u.j.I==0||u.K||Do(u.j,u)}function un(u){ti(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ls(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function ei(u,m){try{var p=u.j;if(p.I!=0&&(p.g==u||ii(p.h,u))){if(!u.L&&ii(p.h,u)&&p.I==3){try{var T=p.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){t:if(!p.v){if(p.g)if(p.g.F+3e3<u.F)jr(p),Wi(p);else break t;Ja(p),ye(18)}}else p.xa=U[1],0<p.xa-p.K&&U[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Zn(_(p.Va,p),6e3));ni(p.h)<=1&&p.ta&&(p.ta=void 0)}else ui(p,11)}else if((u.L||p.g==u)&&jr(p),!w(m))for(U=p.Ba.g.parse(m),m=0;m<U.length;m++){let kt=U[m];const ae=kt[0];if(!(ae<=p.K))if(p.K=ae,kt=kt[1],p.I==2)if(kt[0]=="c"){p.M=kt[1],p.ba=kt[2];const An=kt[3];An!=null&&(p.ka=An,p.j.info("VER="+p.ka));const ci=kt[4];ci!=null&&(p.za=ci,p.j.info("SVER="+p.za));const kn=kt[5];kn!=null&&typeof kn=="number"&&kn>0&&(T=1.5*kn,p.O=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const qn=u.g;if(qn){const $a=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var k=T.h;k.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Ps(k,k.h),k.h=null))}if(T.G){const Br=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Br&&(T.wa=Br,Gt(T.J,T.G,Br))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-u.F,p.j.info("Handshake RTT: "+p.T+"ms")),T=p;var tt=u;if(T.na=No(T,T.L?T.ba:null,T.W),tt.L){Hs(T.h,tt);var St=tt,fe=T.O;fe&&(St.H=fe),St.D&&(ti(St),Wn(St)),T.g=tt}else wo(T);p.i.length>0&&oi(p)}else kt[0]!="stop"&&kt[0]!="close"||ui(p,7);else p.I==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?ui(p,7):$s(p):kt[0]!="noop"&&p.l&&p.l.qa(kt),p.A=0)}}Xn(4)}catch{}}var ve=class{constructor(u,m){this.g=u,this.map=m}};function ks(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ni(u){return u.h?1:u.g?u.g.size:0}function ii(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ps(u,m){u.g?u.g.add(m):u.h=m}function Hs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ks.prototype.cancel=function(){if(this.i=Gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gs(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.G);return m}return G(u.i)}var Eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nr(u,m){if(u){u=u.split("&");for(let p=0;p<u.length;p++){const T=u[p].indexOf("=");let U,k=null;T>=0?(U=u[p].substring(0,T),k=u[p].substring(T+1)):U=u[p],m(U,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function cn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof cn?(this.l=u.l,xe(this,u.j),this.o=u.o,this.g=u.g,Fi(this,u.u),this.h=u.h,Qs(this,bo(u.i)),this.m=u.m):u&&(m=String(u).match(Eo))?(this.l=!1,xe(this,m[1]||"",!0),this.o=ai(m[2]||""),this.g=ai(m[3]||"",!0),Fi(this,m[4]),this.h=ai(m[5]||"",!0),Qs(this,m[6]||"",!0),this.m=ai(m[7]||"")):(this.l=!1,this.i=new Xi(null,this.l))}cn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qa(m,Mr,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qa(m,Mr,!0),"@"),u.push(Ti(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&u.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Qa(p,p.charAt(0)=="/"?Fs:To,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Qa(p,Ao)),u.join("")},cn.prototype.resolve=function(u){const m=Ee(this);let p=!!u.j;p?xe(m,u.j):p=!!u.o,p?m.o=u.o:p=!!u.g,p?m.g=u.g:p=u.u!=null;var T=u.h;if(p)Fi(m,u.u);else if(p=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=m.h.lastIndexOf("/");U!=-1&&(T=m.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const k=[];for(let tt=0;tt<U.length;){const St=U[tt++];St=="."?T&&tt==U.length&&k.push(""):St==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),T&&tt==U.length&&k.push("")):(k.push(St),T=!0)}T=k.join("/")}else T=U}return p?m.h=T:p=u.i.toString()!=="",p?Qs(m,bo(u.i)):p=!!u.m,p&&(m.m=u.m),m};function Ee(u){return new cn(u)}function xe(u,m,p){u.j=p?ai(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Fi(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Qs(u,m,p){m instanceof Xi?(u.i=m,xr(u.i,u.l)):(p||(m=Qa(m,Yi)),u.i=new Xi(m,u.l))}function Gt(u,m,p){u.i.set(m,p)}function Ga(u){return Gt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ai(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qa(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,tn),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mr=/[#\/\?@]/g,To=/[#\?:]/g,Fs=/[#\?]/g,Yi=/[#\?@]/g,Ao=/#/g;function Xi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function en(u){u.g||(u.g=new Map,u.h=0,u.i&&Nr(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}s=Xi.prototype,s.add=function(u,m){en(this),this.i=null,u=Ki(this,u);let p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function So(u,m){en(u),m=Ki(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ys(u,m){return en(u),m=Ki(u,m),u.g.has(m)}s.forEach=function(u,m){en(this),this.g.forEach(function(p,T){p.forEach(function(U){u.call(m,U,T,this)},this)},this)};function Xs(u,m){en(u);let p=[];if(typeof m=="string")Ys(u,m)&&(p=p.concat(u.g.get(Ki(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)p=p.concat(u[m]);return p}s.set=function(u,m){return en(this),this.i=null,u=Ki(this,u),Ys(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=Xs(this,u),u.length>0?String(u[0]):m):m};function Or(u,m,p){So(u,m),p.length>0&&(u.i=null,u.g.set(Ki(u,m),G(p)),u.h+=p.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var p=m[T];const U=Ti(p);p=Xs(this,p);for(let k=0;k<p.length;k++){let tt=U;p[k]!==""&&(tt+="="+Ti(p[k])),u.push(tt)}}return this.i=u.join("&")};function bo(u){const m=new Xi;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Ki(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function xr(u,m){m&&!u.j&&(en(u),u.i=null,u.g.forEach(function(p,T){const U=T.toLowerCase();T!=U&&(So(this,T),Or(this,U,p))},u)),u.j=m}function Ln(u,m){const p=new xn;if(d.Image){const T=new Image;T.onload=A(En,p,"TestLoadImage: loaded",!0,m,T),T.onerror=A(En,p,"TestLoadImage: error",!1,m,T),T.onabort=A(En,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=A(En,p,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Ks(u,m){const p=new xn,T=new AbortController,U=setTimeout(()=>{T.abort(),En(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(k=>{clearTimeout(U),k.ok?En(p,"TestPingServer: ok",!0,m):En(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),En(p,"TestPingServer: error",!1,m)})}function En(u,m,p,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(p)}catch{}}function Zi(){this.g=new co}function ri(u){this.i=u.Sb||null,this.h=u.ab||!1}S(ri,ho),ri.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(u,m){pe.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Fa,pe),s=Fa.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,jn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ji(this):jn(this),this.readyState==3&&zr(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Ji(this))},s.Na=function(u){this.g&&(this.response=u,Ji(this))},s.ga=function(){this.g&&Ji(this)};function Ji(u){u.readyState=4,u.l=null,u.j=null,u.B=null,jn(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tn(u){let m="";return Ot(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function Ya(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=Tn(p),typeof u=="string"?p!=null&&Ti(p):Gt(u,m,p))}function Xt(u){pe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Xt,pe);var si=/^https?$/i,Zs=["POST","PUT"];s=Xt.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bs.g(),this.g.onreadystatechange=O(_(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(k){Xa(this,k);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)p.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const k of T.keys())p.set(k,T.get(k));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Zs,m,void 0)>=0)||T||U||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,tt]of p)this.g.setRequestHeader(k,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(k){Xa(this,k)}};function Xa(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Js(u),Ai(u)}function Js(u){u.A||(u.A=!0,Ie(u,"complete"),Ie(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ie(this,"complete"),Ie(this,"abort"),Ai(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),Xt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ka(this):this.Xa())},s.Xa=function(){Ka(this)};function Ka(u){if(u.h&&typeof h<"u"){if(u.v&&Bn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ie(u,"readystatechange"),Bn(u)==4){u.h=!1;try{const k=u.ca();t:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=k===0){let tt=String(u.D).match(Eo)[1]||null;!tt&&d.self&&d.self.location&&(tt=d.self.location.protocol.slice(0,-1)),T=!si.test(tt?tt.toLowerCase():"")}p=T}if(p)Ie(u,"complete"),Ie(u,"success");else{u.o=6;try{var U=Bn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",Js(u)}}finally{Ai(u)}}}}function Ai(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const p=u.g;u.g=null,m||Ie(u,"ready");try{p.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Bn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Cc(m)}};function je(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Si(u){const m={};u=(u.g&&Bn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(w(u[T]))continue;var p=yo(u[T]);const U=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const k=m[U]||[];m[U]=k,k.push(p)}Ht(m,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function $i(u){this.za=0,this.i=[],this.j=new xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=li("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=li("baseRetryDelayMs",5e3,u),this.Za=li("retryDelaySeedMs",1e4,u),this.Ta=li("forwardChannelMaxRetries",2,u),this.va=li("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ks(u&&u.concurrentRequestLimit),this.Ba=new Zi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=$i.prototype,s.ka=8,s.I=1,s.connect=function(u,m,p,T){ye(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.J=No(this,null,this.W),oi(this)};function $s(u){if(Ur(u),u.I==3){var m=u.V++,p=Ee(u.J);if(Gt(p,"SID",u.M),Gt(p,"RID",m),Gt(p,"TYPE","terminate"),Za(u,p),m=new zn(u,u.j,m),m.M=2,m.A=Ga(Ee(p)),p=!1,d.navigator&&d.navigator.sendBeacon)try{p=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!p&&d.Image&&(new Image().src=m.A,p=!0),p||(m.g=Mo(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Wn(m)}Io(u)}function Wi(u){u.g&&(tl(u),u.g.cancel(),u.g=null)}function Ur(u){Wi(u),u.v&&(d.clearTimeout(u.v),u.v=null),jr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function oi(u){if(!qs(u.h)&&!u.m){u.m=!0;var m=u.Ea;vt||b(),pt||(vt(),pt=!0),R.add(m,u),u.D=0}}function Lr(u,m){return ni(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Zn(_(u.Ea,u,m),Vo(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new zn(this,this.j,u);let k=this.o;if(this.U&&(k?(k=N(k),it(k,this.U)):k=this.U),this.u!==null||this.R||(U.J=k,k=null),this.S)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=Ro(this,U,m),p=Ee(this.J),Gt(p,"RID",u),Gt(p,"CVER",22),this.G&&Gt(p,"X-HTTP-Session-Id",this.G),Za(this,p),k&&(this.R?m="headers="+Ti(Tn(k))+"&"+m:this.u&&Ya(p,this.u,k)),Ps(this.h,U),this.Ra&&Gt(p,"TYPE","init"),this.S?(Gt(p,"$req",m),Gt(p,"SID","null"),U.U=!0,$n(U,p,null)):$n(U,p,m),this.I=2}}else this.I==3&&(u?Ws(this,u):this.i.length==0||qs(this.h)||Ws(this))};function Ws(u,m){var p;m?p=m.l:p=u.V++;const T=Ee(u.J);Gt(T,"SID",u.M),Gt(T,"RID",p),Gt(T,"AID",u.K),Za(u,T),u.u&&u.o&&Ya(T,u.u,u.o),p=new zn(u,u.j,p,u.D+1),u.u===null&&(p.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ro(u,p,1e3),p.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ps(u.h,p),$n(p,T,m)}function Za(u,m){u.H&&Ot(u.H,function(p,T){Gt(m,T,p)}),u.l&&Ot({},function(p,T){Gt(m,T,p)})}function Ro(u,m,p){p=Math.min(u.i.length,p);const T=u.l?_(u.l.Ka,u.l,u):null;t:{var U=u.i;let St=-1;for(;;){const fe=["count="+p];St==-1?p>0?(St=U[0].g,fe.push("ofs="+St)):St=0:fe.push("ofs="+St);let kt=!0;for(let ae=0;ae<p;ae++){var k=U[ae].g;const An=U[ae].map;if(k-=St,k<0)St=Math.max(0,U[ae].g-100),kt=!1;else try{k="req"+k+"_"||"";try{var tt=An instanceof Map?An:Object.entries(An);for(const[ci,kn]of tt){let qn=kn;y(kn)&&(qn=Qi(kn)),fe.push(k+ci+"="+encodeURIComponent(qn))}}catch(ci){throw fe.push(k+"type="+encodeURIComponent("_badmap")),ci}}catch{T&&T(An)}}if(kt){tt=fe.join("&");break t}}tt=void 0}return u=u.i.splice(0,p),m.G=u,tt}function wo(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;vt||b(),pt||(vt(),pt=!0),R.add(m,u),u.A=0}}function Ja(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Zn(_(u.Da,u),Vo(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Co(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Zn(_(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),Wi(this),Co(this))};function tl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Co(u){u.g=new zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ee(u.na);Gt(m,"RID","rpc"),Gt(m,"SID",u.M),Gt(m,"AID",u.K),Gt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Gt(m,"TO",u.ia),Gt(m,"TYPE","xmlhttp"),Za(u,m),u.u&&u.o&&Ya(m,u.u,u.o),u.O&&(u.g.H=u.O);var p=u.g;u=u.ba,p.M=1,p.A=Ga(Ee(m)),p.u=null,p.R=!0,Vr(p,u)}s.Va=function(){this.C!=null&&(this.C=null,Wi(this),Ja(this),ye(19))};function jr(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Do(u,m){var p=null;if(u.g==m){jr(u),tl(u),u.g=null;var T=2}else if(ii(u.h,m))p=m.G,Hs(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){p=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;T=Dr(),Ie(T,new Kn(T,p)),oi(u)}else wo(u);else if(U=m.m,U==3||U==0&&m.X>0||!(T==1&&Lr(u,m)||T==2&&Ja(u)))switch(p&&p.length>0&&(m=u.h,m.i=m.i.concat(p)),U){case 1:ui(u,5);break;case 4:ui(u,10);break;case 3:ui(u,6);break;default:ui(u,2)}}}function Vo(u,m){let p=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(p*=2),p*m}function ui(u,m){if(u.j.info("Error code "+m),m==2){var p=_(u.bb,u),T=u.Ua;const U=!T;T=new cn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||xe(T,"https"),Ga(T),U?Ln(T.toString(),p):Ks(T.toString(),p)}else ye(2);u.I=0,u.l&&u.l.pa(m),Io(u),Ur(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function Io(u){if(u.I=0,u.ja=[],u.l){const m=Gs(u.h);(m.length!=0||u.i.length!=0)&&($(u.ja,m),$(u.ja,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.oa()}}function No(u,m,p){var T=p instanceof cn?Ee(p):new cn(p);if(T.g!="")m&&(T.g=m+"."+T.g),Fi(T,T.u);else{var U=d.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const k=new cn(null);T&&xe(k,T),m&&(k.g=m),U&&Fi(k,U),p&&(k.h=p),T=k}return p=u.G,m=u.wa,p&&m&&Gt(T,p,m),Gt(T,"VER",u.ka),Za(u,T),T}function Mo(u,m,p){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xt(new ri({ab:p})):new Xt(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oo(){}s=Oo.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ta(){}ta.prototype.g=function(u,m){return new $e(u,m)};function $e(u,m){pe.call(this),this.g=new $i(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!w(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new bi(this)}S($e,pe),$e.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$e.prototype.close=function(){$s(this.g)},$e.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.v&&(p={},p.__data__=Qi(u),u=p);m.i.push(new ve(m.Ya++,u)),m.I==3&&oi(m)},$e.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,$e.Z.N.call(this)};function xo(u){Le.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}S(xo,Le);function zo(){_n.call(this),this.status=1}S(zo,_n);function bi(u){this.g=u}S(bi,Oo),bi.prototype.ra=function(){Ie(this.g,"a")},bi.prototype.qa=function(u){Ie(this.g,new xo(u))},bi.prototype.pa=function(u){Ie(this.g,new zo)},bi.prototype.oa=function(){Ie(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,$e.prototype.send=$e.prototype.o,$e.prototype.open=$e.prototype.m,$e.prototype.close=$e.prototype.close,tv=function(){return new ta},W_=function(){return Dr()},$_=he,Qf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,Gu=Pa,js.COMPLETE="complete",J_=js,fo.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",pe.prototype.listen=pe.prototype.J,Bl=fo,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,Z_=Xt}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore",Ly="4.9.3";class Ke{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");let Ds="12.7.0";const vr=new H_("@firebase/firestore");function gs(){return vr.logLevel}function rt(s,...e){if(vr.logLevel<=Lt.DEBUG){const i=e.map(md);vr.debug(`Firestore (${Ds}): ${s}`,...i)}}function Pi(s,...e){if(vr.logLevel<=Lt.ERROR){const i=e.map(md);vr.error(`Firestore (${Ds}): ${s}`,...i)}}function Ts(s,...e){if(vr.logLevel<=Lt.WARN){const i=e.map(md);vr.warn(`Firestore (${Ds}): ${s}`,...i)}}function md(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function gt(s,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,ev(s,r,i)}function ev(s,e,i){let r=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Pi(r),new Error(r)}function Pt(s,e,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,s||ev(e,o,r)}function Tt(s,e){return s}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Cs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ca{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}class nv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Ke.UNAUTHENTICATED)))}shutdown(){}}class YA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class XA{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Pt(this.o===void 0,42304);let r=this.i;const o=v=>this.i!==r?(r=this.i,i(v)):Promise.resolve();let h=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ca,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const v=h;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},y=v=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>y(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?y(v):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ca)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt(typeof r.accessToken=="string",31837,{l:r}),new nv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new Ke(e)}}class KA{constructor(e,i,r){this.P=e,this.T=i,this.I=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZA{constructor(e,i,r){this.P=e,this.T=i,this.I=r}getToken(){return Promise.resolve(new KA(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Ke.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JA{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,VA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Pt(this.o===void 0,3512);const r=h=>{h.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,rt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>r(h)))};const o=h=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>o(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(Pt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new jy(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $A(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}class gd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=$A(40);for(let h=0;h<o.length;++h)r.length<20&&o[h]<i&&(r+=e.charAt(o[h]%62))}return r}}function Nt(s,e){return s<e?-1:s>e?1:0}function Ff(s,e){const i=Math.min(s.length,e.length);for(let r=0;r<i;r++){const o=s.charAt(r),h=e.charAt(r);if(o!==h)return zf(o)===zf(h)?Nt(o,h):zf(o)?1:-1}return Nt(s.length,e.length)}const WA=55296,tS=57343;function zf(s){const e=s.charCodeAt(0);return e>=WA&&e<=tS}function As(s,e,i){return s.length===e.length&&s.every(((r,o)=>i(r,e[o])))}const By="__name__";class gi{constructor(e,i,r){i===void 0?i=0:i>e.length&&gt(637,{offset:i,range:e.length}),r===void 0?r=e.length-i:r>e.length-i&&gt(1746,{length:r,range:e.length-i}),this.segments=e,this.offset=i,this.len=r}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((r=>{i.push(r)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,r=this.limit();i<r;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const r=Math.min(e.length,i.length);for(let o=0;o<r;o++){const h=gi.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return Nt(e.length,i.length)}static compareSegments(e,i){const r=gi.isNumericId(e),o=gi.isNumericId(i);return r&&!o?-1:!r&&o?1:r&&o?gi.extractNumericId(e).compare(gi.extractNumericId(i)):Ff(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wa.fromString(e.substring(4,e.length-2))}}class Wt extends gi{construct(e,i,r){return new Wt(e,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const r of e){if(r.indexOf("//")>=0)throw new at(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((o=>o.length>0)))}return new Wt(i)}static emptyPath(){return new Wt([])}}const eS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends gi{construct(e,i,r){return new Ge(e,i,r)}static isValidIdentifier(e){return eS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===By}static keyField(){return new Ge([By])}static fromServerFormat(e){const i=[];let r="",o=0;const h=()=>{if(r.length===0)throw new at(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new at(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new at(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(r+=y,o++):(h(),o++)}if(h(),d)throw new at(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(i)}static emptyPath(){return new Ge([])}}class ft{constructor(e){this.path=e}static fromPath(e){return new ft(Wt.fromString(e))}static fromName(e){return new ft(Wt.fromString(e).popFirst(5))}static empty(){return new ft(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Wt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new Wt(e.slice()))}}function iv(s,e,i){if(!i)throw new at(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nS(s,e,i,r){if(e===!0&&r===!0)throw new at(K.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function ky(s){if(!ft.isDocumentKey(s))throw new at(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function qy(s){if(ft.isDocumentKey(s))throw new at(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function av(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function hc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":gt(12329,{type:typeof s})}function Da(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new at(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=hc(s);throw new at(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}function Ce(s,e){const i={typeString:s};return e&&(i.value=e),i}function ao(s,e){if(!av(s))throw new at(K.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in e)if(e[r]){const o=e[r].typeString,h="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const d=s[r];if(o&&typeof d!==o){i=`JSON field '${r}' must be a ${o}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${r}' field to equal '${h.value}'`;break}}if(i)throw new at(K.INVALID_ARGUMENT,i);return!0}const Py=-62135596800,Hy=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(e){return ne.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),r=Math.floor((e-1e3*i)*Hy);return new ne(i,r)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new at(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new at(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Py)throw new at(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hy}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ao(e,ne._jsonSchema))return new ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Py;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ne._jsonSchemaVersion="firestore/timestamp/1.0",ne._jsonSchema={type:Ce("string",ne._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};class _t{static fromTimestamp(e){return new _t(e)}static min(){return new _t(new ne(0,0))}static max(){return new _t(new ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zl=-1;function iS(s,e){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(r===1e9?new ne(i+1,0):new ne(i,r));return new Ia(o,ft.empty(),e)}function aS(s){return new Ia(s.readTime,s.key,Zl)}class Ia{constructor(e,i,r){this.readTime=e,this.documentKey=i,this.largestBatchId=r}static min(){return new Ia(_t.min(),ft.empty(),Zl)}static max(){return new Ia(_t.max(),ft.empty(),Zl)}}function rS(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=ft.comparator(s.documentKey,e.documentKey),i!==0?i:Nt(s.largestBatchId,e.largestBatchId))}const sS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vs(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==sS)throw s;rt("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new Z(((r,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(r,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(r,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.reject(i)}static resolve(e){return new Z(((i,r)=>{i(e)}))}static reject(e){return new Z(((i,r)=>{r(e)}))}static waitFor(e){return new Z(((i,r)=>{let o=0,h=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++h,d&&h===o&&i()}),(v=>r(v)))})),d=!0,h===o&&i()}))}static or(e){let i=Z.resolve(!1);for(const r of e)i=i.next((o=>o?Z.resolve(o):r()));return i}static forEach(e,i){const r=[];return e.forEach(((o,h)=>{r.push(i.call(this,o,h))})),this.waitFor(r)}static mapArray(e,i){return new Z(((r,o)=>{const h=e.length,d=new Array(h);let y=0;for(let v=0;v<h;v++){const _=v;i(e[_]).next((A=>{d[_]=A,++y,y===h&&r(d)}),(A=>o(A)))}}))}static doWhile(e,i){return new Z(((r,o)=>{const h=()=>{e()===!0?i().next((()=>{h()}),o):r()};h()}))}}function oS(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Is(s){return s.name==="IndexedDbTransactionError"}class fc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fc.ce=-1;const pd=-1;function dc(s){return s==null}function tc(s){return s===0&&1/s==-1/0}function uS(s){return typeof s=="number"&&Number.isInteger(s)&&!tc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const rv="";function cS(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Gy(e)),e=hS(s.get(i),e);return Gy(e)}function hS(s,e){let i=e;const r=s.length;for(let o=0;o<r;o++){const h=s.charAt(o);switch(h){case"\0":i+="";break;case rv:i+="";break;default:i+=h}}return i}function Gy(s){return s+rv+""}function Qy(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Tr(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function sv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class oe{constructor(e,i){this.comparator=e,this.root=i||He.EMPTY}insert(e,i){return new oe(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(e){let i=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return i+r.left.size;o<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,r)=>(e(i,r),!1)))}toString(){const e=[];return this.inorderTraversal(((i,r)=>(e.push(`${i}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,i,r,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?r(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class He{constructor(e,i,r,o,h){this.key=e,this.value=i,this.color=r??He.RED,this.left=o??He.EMPTY,this.right=h??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,r,o,h){return new He(e??this.key,i??this.value,r??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this;const h=r(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,r),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let r,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return He.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gt(27949);return e+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(e,i,r,o,h){return this}insert(e,i,r){return new He(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Me{constructor(e){this.comparator=e,this.data=new oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,r)=>(e(i),!1)))}forEachInRange(e,i){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((r=>{i=i.add(r)})),i}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const i=this.data.getIterator(),r=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=r.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Me(this.comparator);return i.data=e,i}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Qn{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new Qn([])}unionWith(e){let i=new Me(Ge.comparator);for(const r of this.fields)i=i.add(r);for(const r of e)i=i.add(r);return new Qn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,((i,r)=>i.isEqual(r)))}}class lv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new lv("Invalid base64 string: "+h):h}})(e);return new Qe(i)}static fromUint8Array(e){const i=(function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h})(e);return new Qe(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(s){if(Pt(!!s,39018),typeof s=="string"){let e=0;const i=fS.exec(s);if(Pt(!!i,46558,{timestamp:s}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ge(s.seconds),nanos:ge(s.nanos)}}function ge(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ma(s){return typeof s=="string"?Qe.fromBase64String(s):Qe.fromUint8Array(s)}const ov="server_timestamp",uv="__type__",cv="__previous_value__",hv="__local_write_time__";function yd(s){return(s?.mapValue?.fields||{})[uv]?.stringValue===ov}function mc(s){const e=s.mapValue.fields[cv];return yd(e)?mc(e):e}function Jl(s){const e=Na(s.mapValue.fields[hv].timestampValue);return new ne(e.seconds,e.nanos)}class dS{constructor(e,i,r,o,h,d,y,v,_,A){this.databaseId=e,this.appId=i,this.persistenceKey=r,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=v,this.useFetchStreams=_,this.isUsingEmulator=A}}const ec="(default)";class $l{constructor(e,i){this.projectId=e,this.database=i||ec}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===ec}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}const fv="__type__",mS="__max__",qu={mapValue:{}},dv="__vector__",nc="value";function Oa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?yd(s)?4:pS(s)?9007199254740991:gS(s)?10:11:gt(28295,{value:s})}function Ei(s,e){if(s===e)return!0;const i=Oa(s);if(i!==Oa(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Jl(s).isEqual(Jl(e));case 3:return(function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=Na(o.timestampValue),y=Na(h.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,h){return Ma(o.bytesValue).isEqual(Ma(h.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,h){return ge(o.geoPointValue.latitude)===ge(h.geoPointValue.latitude)&&ge(o.geoPointValue.longitude)===ge(h.geoPointValue.longitude)})(s,e);case 2:return(function(o,h){if("integerValue"in o&&"integerValue"in h)return ge(o.integerValue)===ge(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=ge(o.doubleValue),y=ge(h.doubleValue);return d===y?tc(d)===tc(y):isNaN(d)&&isNaN(y)}return!1})(s,e);case 9:return As(s.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return(function(o,h){const d=o.mapValue.fields||{},y=h.mapValue.fields||{};if(Qy(d)!==Qy(y))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(y[v]===void 0||!Ei(d[v],y[v])))return!1;return!0})(s,e);default:return gt(52216,{left:s})}}function Wl(s,e){return(s.values||[]).find((i=>Ei(i,e)))!==void 0}function Ss(s,e){if(s===e)return 0;const i=Oa(s),r=Oa(e);if(i!==r)return Nt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Nt(s.booleanValue,e.booleanValue);case 2:return(function(h,d){const y=ge(h.integerValue||h.doubleValue),v=ge(d.integerValue||d.doubleValue);return y<v?-1:y>v?1:y===v?0:isNaN(y)?isNaN(v)?0:-1:1})(s,e);case 3:return Yy(s.timestampValue,e.timestampValue);case 4:return Yy(Jl(s),Jl(e));case 5:return Ff(s.stringValue,e.stringValue);case 6:return(function(h,d){const y=Ma(h),v=Ma(d);return y.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(h,d){const y=h.split("/"),v=d.split("/");for(let _=0;_<y.length&&_<v.length;_++){const A=Nt(y[_],v[_]);if(A!==0)return A}return Nt(y.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(h,d){const y=Nt(ge(h.latitude),ge(d.latitude));return y!==0?y:Nt(ge(h.longitude),ge(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Xy(s.arrayValue,e.arrayValue);case 10:return(function(h,d){const y=h.fields||{},v=d.fields||{},_=y[nc]?.arrayValue,A=v[nc]?.arrayValue,S=Nt(_?.values?.length||0,A?.values?.length||0);return S!==0?S:Xy(_,A)})(s.mapValue,e.mapValue);case 11:return(function(h,d){if(h===qu.mapValue&&d===qu.mapValue)return 0;if(h===qu.mapValue)return 1;if(d===qu.mapValue)return-1;const y=h.fields||{},v=Object.keys(y),_=d.fields||{},A=Object.keys(_);v.sort(),A.sort();for(let S=0;S<v.length&&S<A.length;++S){const O=Ff(v[S],A[S]);if(O!==0)return O;const G=Ss(y[v[S]],_[A[S]]);if(G!==0)return G}return Nt(v.length,A.length)})(s.mapValue,e.mapValue);default:throw gt(23264,{he:i})}}function Yy(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Nt(s,e);const i=Na(s),r=Na(e),o=Nt(i.seconds,r.seconds);return o!==0?o:Nt(i.nanos,r.nanos)}function Xy(s,e){const i=s.values||[],r=e.values||[];for(let o=0;o<i.length&&o<r.length;++o){const h=Ss(i[o],r[o]);if(h)return h}return Nt(i.length,r.length)}function bs(s){return Yf(s)}function Yf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Na(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Ma(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return ft.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",o=!0;for(const h of i.values||[])o?o=!1:r+=",",r+=Yf(h);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of r)h?h=!1:o+=",",o+=`${d}:${Yf(i.fields[d])}`;return o+"}"})(s.mapValue):gt(61005,{value:s})}function Qu(s){switch(Oa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mc(s);return e?16+Qu(e):16;case 5:return 2*s.stringValue.length;case 6:return Ma(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,h)=>o+Qu(h)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Tr(r.fields,((h,d)=>{o+=h.length+Qu(d)})),o})(s.mapValue);default:throw gt(13486,{value:s})}}function Ky(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Xf(s){return!!s&&"integerValue"in s}function _d(s){return!!s&&"arrayValue"in s}function Zy(s){return!!s&&"nullValue"in s}function Jy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Fu(s){return!!s&&"mapValue"in s}function gS(s){return(s?.mapValue?.fields||{})[fv]?.stringValue===dv}function Gl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Tr(s.mapValue.fields,((i,r)=>e.mapValue.fields[i]=Gl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Gl(s.arrayValue.values[i]);return e}return{...s}}function pS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===mS}class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let r=0;r<e.length-1;++r)if(i=(i.mapValue.fields||{})[e.get(r)],!Fu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(i)}setAll(e){let i=Ge.emptyPath(),r={},o=[];e.forEach(((d,y)=>{if(!i.isImmediateParentOf(y)){const v=this.getFieldsMap(i);this.applyChanges(v,r,o),r={},o=[],i=y.popLast()}d?r[y.lastSegment()]=Gl(d):o.push(y.lastSegment())}));const h=this.getFieldsMap(i);this.applyChanges(h,r,o)}delete(e){const i=this.field(e.popLast());Fu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=i.mapValue.fields[e.get(r)];Fu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(r)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,r){Tr(i,((o,h)=>e[o]=h));for(const o of r)delete e[o]}clone(){return new Nn(Gl(this.value))}}function mv(s){const e=[];return Tr(s.fields,((i,r)=>{const o=new Ge([i]);if(Fu(r)){const h=mv(r.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)})),new Qn(e)}class Ze{constructor(e,i,r,o,h,d,y){this.key=e,this.documentType=i,this.version=r,this.readTime=o,this.createTime=h,this.data=d,this.documentState=y}static newInvalidDocument(e){return new Ze(e,0,_t.min(),_t.min(),_t.min(),Nn.empty(),0)}static newFoundDocument(e,i,r,o){return new Ze(e,1,i,_t.min(),r,o,0)}static newNoDocument(e,i){return new Ze(e,2,i,_t.min(),_t.min(),Nn.empty(),0)}static newUnknownDocument(e,i){return new Ze(e,3,i,_t.min(),_t.min(),Nn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ic{constructor(e,i){this.position=e,this.inclusive=i}}function $y(s,e,i){let r=0;for(let o=0;o<s.position.length;o++){const h=e[o],d=s.position[o];if(h.field.isKeyField()?r=ft.comparator(ft.fromName(d.referenceValue),i.key):r=Ss(d,i.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wy(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ei(s.position[i],e.position[i]))return!1;return!0}class to{constructor(e,i="asc"){this.field=e,this.dir=i}}function yS(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class gv{}class we extends gv{constructor(e,i,r){super(),this.field=e,this.op=i,this.value=r}static create(e,i,r){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,r):new vS(e,i,r):i==="array-contains"?new AS(e,r):i==="in"?new SS(e,r):i==="not-in"?new bS(e,r):i==="array-contains-any"?new RS(e,r):new we(e,i,r)}static createKeyFieldInFilter(e,i,r){return i==="in"?new ES(e,r):new TS(e,r)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ss(i,this.value)):i!==null&&Oa(this.value)===Oa(i)&&this.matchesComparison(Ss(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends gv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new Fn(e,i)}matches(e){return pv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pv(s){return s.op==="and"}function yv(s){return _S(s)&&pv(s)}function _S(s){for(const e of s.filters)if(e instanceof Fn)return!1;return!0}function Kf(s){if(s instanceof we)return s.field.canonicalString()+s.op.toString()+bs(s.value);if(yv(s))return s.filters.map((e=>Kf(e))).join(",");{const e=s.filters.map((i=>Kf(i))).join(",");return`${s.op}(${e})`}}function _v(s,e){return s instanceof we?(function(r,o){return o instanceof we&&r.op===o.op&&r.field.isEqual(o.field)&&Ei(r.value,o.value)})(s,e):s instanceof Fn?(function(r,o){return o instanceof Fn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((h,d,y)=>h&&_v(d,o.filters[y])),!0):!1})(s,e):void gt(19439)}function vv(s){return s instanceof we?(function(i){return`${i.field.canonicalString()} ${i.op} ${bs(i.value)}`})(s):s instanceof Fn?(function(i){return i.op.toString()+" {"+i.getFilters().map(vv).join(" ,")+"}"})(s):"Filter"}class vS extends we{constructor(e,i,r){super(e,i,r),this.key=ft.fromName(r.referenceValue)}matches(e){const i=ft.comparator(e.key,this.key);return this.matchesComparison(i)}}class ES extends we{constructor(e,i){super(e,"in",i),this.keys=Ev("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class TS extends we{constructor(e,i){super(e,"not-in",i),this.keys=Ev("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function Ev(s,e){return(e.arrayValue?.values||[]).map((i=>ft.fromName(i.referenceValue)))}class AS extends we{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return _d(i)&&Wl(i.arrayValue,this.value)}}class SS extends we{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Wl(this.value.arrayValue,i)}}class bS extends we{constructor(e,i){super(e,"not-in",i)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Wl(this.value.arrayValue,i)}}class RS extends we{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!_d(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>Wl(this.value.arrayValue,r)))}}class wS{constructor(e,i=null,r=[],o=[],h=null,d=null,y=null){this.path=e,this.collectionGroup=i,this.orderBy=r,this.filters=o,this.limit=h,this.startAt=d,this.endAt=y,this.Te=null}}function t_(s,e=null,i=[],r=[],o=null,h=null,d=null){return new wS(s,e,i,r,o,h,d)}function vd(s){const e=Tt(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((r=>Kf(r))).join(","),i+="|ob:",i+=e.orderBy.map((r=>(function(h){return h.field.canonicalString()+h.dir})(r))).join(","),dc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>bs(r))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>bs(r))).join(",")),e.Te=i}return e.Te}function Ed(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!yS(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!_v(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Wy(s.startAt,e.startAt)&&Wy(s.endAt,e.endAt)}function Zf(s){return ft.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Ns{constructor(e,i=null,r=[],o=[],h=null,d="F",y=null,v=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=o,this.limit=h,this.limitType=d,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CS(s,e,i,r,o,h,d,y){return new Ns(s,e,i,r,o,h,d,y)}function Td(s){return new Ns(s)}function e_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Tv(s){return s.collectionGroup!==null}function Ql(s){const e=Tt(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),i.add(h.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Me(Ge.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((_=>{_.isInequality()&&(y=y.add(_.field))}))})),y})(e).forEach((h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new to(h,r))})),i.has(Ge.keyField().canonicalString())||e.Ie.push(new to(Ge.keyField(),r))}return e.Ie}function pi(s){const e=Tt(s);return e.Ee||(e.Ee=DS(e,Ql(s))),e.Ee}function DS(s,e){if(s.limitType==="F")return t_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const h=o.dir==="desc"?"asc":"desc";return new to(o.field,h)}));const i=s.endAt?new ic(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ic(s.startAt.position,s.startAt.inclusive):null;return t_(s.path,s.collectionGroup,e,s.filters,s.limit,i,r)}}function Jf(s,e){const i=s.filters.concat([e]);return new Ns(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function $f(s,e,i){return new Ns(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function gc(s,e){return Ed(pi(s),pi(e))&&s.limitType===e.limitType}function Av(s){return`${vd(pi(s))}|lt:${s.limitType}`}function ps(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((o=>vv(o))).join(", ")}]`),dc(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((o=>bs(o))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((o=>bs(o))).join(",")),`Target(${r})`})(pi(s))}; limitType=${s.limitType})`}function pc(s,e){return e.isFoundDocument()&&(function(r,o){const h=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):ft.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)})(s,e)&&(function(r,o){for(const h of Ql(r))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const h of r.filters)if(!h.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,y,v){const _=$y(d,y,v);return d.inclusive?_<=0:_<0})(r.startAt,Ql(r),o)||r.endAt&&!(function(d,y,v){const _=$y(d,y,v);return d.inclusive?_>=0:_>0})(r.endAt,Ql(r),o))})(s,e)}function VS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Sv(s){return(e,i)=>{let r=!1;for(const o of Ql(s)){const h=IS(o,e,i);if(h!==0)return h;r=r||o.field.isKeyField()}return 0}}function IS(s,e,i){const r=s.field.isKeyField()?ft.comparator(e.key,i.key):(function(h,d,y){const v=d.data.field(h),_=y.data.field(h);return v!==null&&_!==null?Ss(v,_):gt(42886)})(s.field,e,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return gt(19790,{direction:s.dir})}}class Ar{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(const[o,h]of r)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[i]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,((i,r)=>{for(const[o,h]of r)e(o,h)}))}isEmpty(){return sv(this.inner)}size(){return this.innerSize}}const NS=new oe(ft.comparator);function Hi(){return NS}const bv=new oe(ft.comparator);function kl(...s){let e=bv;for(const i of s)e=e.insert(i.key,i);return e}function Rv(s){let e=bv;return s.forEach(((i,r)=>e=e.insert(i,r.overlayedDocument))),e}function gr(){return Fl()}function wv(){return Fl()}function Fl(){return new Ar((s=>s.toString()),((s,e)=>s.isEqual(e)))}const MS=new oe(ft.comparator),OS=new Me(ft.comparator);function Mt(...s){let e=OS;for(const i of s)e=e.add(i);return e}const xS=new Me(Nt);function zS(){return xS}function Ad(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function Cv(s){return{integerValue:""+s}}function US(s,e){return uS(e)?Cv(e):Ad(s,e)}class yc{constructor(){this._=void 0}}function LS(s,e,i){return s instanceof ac?(function(o,h){const d={fields:{[uv]:{stringValue:ov},[hv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&yd(h)&&(h=mc(h)),h&&(d.fields[cv]=h),{mapValue:d}})(i,e):s instanceof eo?Vv(s,e):s instanceof no?Iv(s,e):(function(o,h){const d=Dv(o,h),y=n_(d)+n_(o.Ae);return Xf(d)&&Xf(o.Ae)?Cv(y):Ad(o.serializer,y)})(s,e)}function jS(s,e,i){return s instanceof eo?Vv(s,e):s instanceof no?Iv(s,e):i}function Dv(s,e){return s instanceof rc?(function(r){return Xf(r)||(function(h){return!!h&&"doubleValue"in h})(r)})(e)?e:{integerValue:0}:null}class ac extends yc{}class eo extends yc{constructor(e){super(),this.elements=e}}function Vv(s,e){const i=Nv(e);for(const r of s.elements)i.some((o=>Ei(o,r)))||i.push(r);return{arrayValue:{values:i}}}class no extends yc{constructor(e){super(),this.elements=e}}function Iv(s,e){let i=Nv(e);for(const r of s.elements)i=i.filter((o=>!Ei(o,r)));return{arrayValue:{values:i}}}class rc extends yc{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function n_(s){return ge(s.integerValue||s.doubleValue)}function Nv(s){return _d(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function BS(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof eo&&o instanceof eo||r instanceof no&&o instanceof no?As(r.elements,o.elements,Ei):r instanceof rc&&o instanceof rc?Ei(r.Ae,o.Ae):r instanceof ac&&o instanceof ac})(s.transform,e.transform)}class kS{constructor(e,i){this.version=e,this.transformResults=i}}class ki{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new ki}static exists(e){return new ki(void 0,e)}static updateTime(e){return new ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _c{}function Mv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new xv(s.key,ki.none()):new ro(s.key,s.data,ki.none());{const i=s.data,r=Nn.empty();let o=new Me(Ge.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?r.delete(h):r.set(h,d),o=o.add(h)}return new Sr(s.key,r,new Qn(o.toArray()),ki.none())}}function qS(s,e,i){s instanceof ro?(function(o,h,d){const y=o.value.clone(),v=a_(o.fieldTransforms,h,d.transformResults);y.setAll(v),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,i):s instanceof Sr?(function(o,h,d){if(!Yu(o.precondition,h))return void h.convertToUnknownDocument(d.version);const y=a_(o.fieldTransforms,h,d.transformResults),v=h.data;v.setAll(Ov(o)),v.setAll(y),h.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(s,e,i):(function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function Yl(s,e,i,r){return s instanceof ro?(function(h,d,y,v){if(!Yu(h.precondition,d))return y;const _=h.value.clone(),A=r_(h.fieldTransforms,v,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(s,e,i,r):s instanceof Sr?(function(h,d,y,v){if(!Yu(h.precondition,d))return y;const _=r_(h.fieldTransforms,v,d),A=d.data;return A.setAll(Ov(h)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),y===null?null:y.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((S=>S.field)))})(s,e,i,r):(function(h,d,y){return Yu(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(s,e,i)}function PS(s,e){let i=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),h=Dv(r.transform,o||null);h!=null&&(i===null&&(i=Nn.empty()),i.set(r.field,h))}return i||null}function i_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&As(r,o,((h,d)=>BS(h,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ro extends _c{constructor(e,i,r,o=[]){super(),this.key=e,this.value=i,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Sr extends _c{constructor(e,i,r,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=r,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Ov(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);e.set(i,r)}})),e}function a_(s,e,i){const r=new Map;Pt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let o=0;o<i.length;o++){const h=s[o],d=h.transform,y=e.data.field(h.field);r.set(h.field,jS(d,y,i[o]))}return r}function r_(s,e,i){const r=new Map;for(const o of s){const h=o.transform,d=i.data.field(o.field);r.set(o.field,LS(h,d,e))}return r}class xv extends _c{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HS extends _c{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GS{constructor(e,i,r,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,i){const r=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&qS(h,e,r[o])}}applyToLocalView(e,i){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(i=Yl(r,e,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(i=Yl(r,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const r=wv();return this.mutations.forEach((o=>{const h=e.get(o.key),d=h.overlayedDocument;let y=this.applyToLocalView(d,h.mutatedFields);y=i.has(o.key)?null:y;const v=Mv(d,y);v!==null&&r.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(_t.min())})),r}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Mt())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,((i,r)=>i_(i,r)))&&As(this.baseMutations,e.baseMutations,((i,r)=>i_(i,r)))}}class Sd{constructor(e,i,r,o){this.batch=e,this.commitVersion=i,this.mutationResults=r,this.docVersions=o}static from(e,i,r){Pt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return MS})();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,r[d].version);return new Sd(e,i,r,o)}}class QS{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class FS{constructor(e,i){this.count=e,this.unchangedNames=i}}var Re,Ut;function YS(s){switch(s){case K.OK:return gt(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return gt(15467,{code:s})}}function zv(s){if(s===void 0)return Pi("GRPC error has no .code"),K.UNKNOWN;switch(s){case Re.OK:return K.OK;case Re.CANCELLED:return K.CANCELLED;case Re.UNKNOWN:return K.UNKNOWN;case Re.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Re.INTERNAL:return K.INTERNAL;case Re.UNAVAILABLE:return K.UNAVAILABLE;case Re.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Re.NOT_FOUND:return K.NOT_FOUND;case Re.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Re.ABORTED:return K.ABORTED;case Re.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Re.DATA_LOSS:return K.DATA_LOSS;default:return gt(39323,{code:s})}}(Ut=Re||(Re={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";function XS(){return new TextEncoder}const KS=new wa([4294967295,4294967295],0);function s_(s){const e=XS().encode(s),i=new K_;return i.update(e),new Uint8Array(i.digest())}function l_(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new wa([i,r],0),new wa([o,h],0)]}class bd{constructor(e,i,r){if(this.bitmap=e,this.padding=i,this.hashCount=r,i<0||i>=8)throw new ql(`Invalid padding: ${i}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(e.length===0&&i!==0)throw new ql(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=wa.fromNumber(this.ge)}ye(e,i,r){let o=e.add(i.multiply(wa.fromNumber(r)));return o.compare(KS)===1&&(o=new wa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=s_(e),[r,o]=l_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(r,o,h);if(!this.we(d))return!1}return!0}static create(e,i,r){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new bd(h,o,i);return r.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const i=s_(e),[r,o]=l_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(r,o,h);this.Se(d)}}Se(e){const i=Math.floor(e/8),r=e%8;this.bitmap[i]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vc{constructor(e,i,r,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,r){const o=new Map;return o.set(e,so.createSynthesizedTargetChangeForCurrentChange(e,i,r)),new vc(_t.min(),o,new oe(Nt),Hi(),Mt())}}class so{constructor(e,i,r,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,r){return new so(r,i,Mt(),Mt(),Mt())}}class Xu{constructor(e,i,r,o){this.be=e,this.removedTargetIds=i,this.key=r,this.De=o}}class Uv{constructor(e,i){this.targetId=e,this.Ce=i}}class Lv{constructor(e,i,r=Qe.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=r,this.cause=o}}class o_{constructor(){this.ve=0,this.Fe=u_(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mt(),i=Mt(),r=Mt();return this.Fe.forEach(((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:r=r.add(o);break;default:gt(38017,{changeType:h})}})),new so(this.Me,this.xe,e,i,r)}qe(){this.Oe=!1,this.Fe=u_()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.Je=Pu(),this.He=Pu(),this.Ye=new oe(Nt)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const r=this.nt(i);switch(e.state){case 0:this.rt(i)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(e.resumeToken));break;default:gt(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((r,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,r=e.Ce.count,o=this.ot(i);if(o){const h=o.target;if(Zf(h))if(r===0){const d=new ft(h.path);this.et(i,d,Ze.newNoDocument(d,_t.min()))}else Pt(r===1,20013,{expectedCount:r});else{const d=this._t(i);if(d!==r){const y=this.ut(e),v=y?this.ct(y,e,d):1;if(v!==0){this.it(i);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:h=0}=i;let d,y;try{d=Ma(r).toUint8Array()}catch(v){if(v instanceof lv)return Ts("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{y=new bd(d,o,h)}catch(v){return Ts(v instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return y.ge===0?null:y}ct(e,i,r){return i.Ce.count===r-this.Pt(e,i.targetId)?0:2}Pt(e,i){const r=this.Ge.getRemoteKeysForTarget(i);let o=0;return r.forEach((h=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(y)||(this.et(i,h,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((h,d)=>{const y=this.ot(d);if(y){if(h.current&&Zf(y.target)){const v=new ft(y.target.path);this.It(v).has(d)||this.Et(d,v)||this.et(d,v,Ze.newNoDocument(v,e))}h.Be&&(i.set(d,h.ke()),h.qe())}}));let r=Mt();this.He.forEach(((h,d)=>{let y=!0;d.forEachWhile((v=>{const _=this.ot(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(r=r.add(h))})),this.je.forEach(((h,d)=>d.setReadTime(e)));const o=new vc(e,i,this.Ye,this.je,r);return this.je=Hi(),this.Je=Pu(),this.He=Pu(),this.Ye=new oe(Nt),o}Xe(e,i){if(!this.rt(e))return;const r=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),r&&(this.je=this.je.insert(i,r))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new o_,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Me(Nt),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Me(Nt),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||rt("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new o_),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Pu(){return new oe(ft.comparator)}function u_(){return new oe(ft.comparator)}const JS={asc:"ASCENDING",desc:"DESCENDING"},$S={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WS={and:"AND",or:"OR"};class t2{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Wf(s,e){return s.useProto3Json||dc(e)?e:{value:e}}function sc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function e2(s,e){return sc(s,e.toTimestamp())}function yi(s){return Pt(!!s,49232),_t.fromTimestamp((function(i){const r=Na(i);return new ne(r.seconds,r.nanos)})(s))}function Rd(s,e){return td(s,e).canonicalString()}function td(s,e){const i=(function(o){return new Wt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?i:i.child(e)}function Bv(s){const e=Wt.fromString(s);return Pt(Gv(e),10190,{key:e.toString()}),e}function ed(s,e){return Rd(s.databaseId,e.path)}function Uf(s,e){const i=Bv(e);if(i.get(1)!==s.databaseId.projectId)throw new at(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new at(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new ft(qv(i))}function kv(s,e){return Rd(s.databaseId,e)}function n2(s){const e=Bv(s);return e.length===4?Wt.emptyPath():qv(e)}function nd(s){return new Wt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function qv(s){return Pt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function c_(s,e,i){return{name:ed(s,e),fields:i.value.mapValue.fields}}function i2(s,e){let i;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:gt(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=(function(_,A){return _.useProto3Json?(Pt(A===void 0||typeof A=="string",58123),Qe.fromBase64String(A||"")):(Pt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Qe.fromUint8Array(A||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(_){const A=_.code===void 0?K.UNKNOWN:zv(_.code);return new at(A,_.message||"")})(d);i=new Lv(r,o,h,y||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Uf(s,r.document.name),h=yi(r.document.updateTime),d=r.document.createTime?yi(r.document.createTime):_t.min(),y=new Nn({mapValue:{fields:r.document.fields}}),v=Ze.newFoundDocument(o,h,d,y),_=r.targetIds||[],A=r.removedTargetIds||[];i=new Xu(_,A,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Uf(s,r.document),h=r.readTime?yi(r.readTime):_t.min(),d=Ze.newNoDocument(o,h),y=r.removedTargetIds||[];i=new Xu([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Uf(s,r.document),h=r.removedTargetIds||[];i=new Xu([],h,o,null)}else{if(!("filter"in e))return gt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:h}=r,d=new FS(o,h),y=r.targetId;i=new Uv(y,d)}}return i}function a2(s,e){let i;if(e instanceof ro)i={update:c_(s,e.key,e.value)};else if(e instanceof xv)i={delete:ed(s,e.key)};else if(e instanceof Sr)i={update:c_(s,e.key,e.data),updateMask:d2(e.fieldMask)};else{if(!(e instanceof HS))return gt(16599,{Vt:e.type});i={verify:ed(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((r=>(function(h,d){const y=d.transform;if(y instanceof ac)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof eo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof no)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof rc)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw gt(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(i.currentDocument=(function(o,h){return h.updateTime!==void 0?{updateTime:e2(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:gt(27497)})(s,e.precondition)),i}function r2(s,e){return s&&s.length>0?(Pt(e!==void 0,14353),s.map((i=>(function(o,h){let d=o.updateTime?yi(o.updateTime):yi(h);return d.isEqual(_t.min())&&(d=yi(h)),new kS(d,o.transformResults||[])})(i,e)))):[]}function s2(s,e){return{documents:[kv(s,e.path)]}}function l2(s,e){const i={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=kv(s,o);const h=(function(_){if(_.length!==0)return Hv(Fn.create(_,"and"))})(e.filters);h&&(i.structuredQuery.where=h);const d=(function(_){if(_.length!==0)return _.map((A=>(function(O){return{field:ys(O.field),direction:c2(O.dir)}})(A)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const y=Wf(s,e.limit);return y!==null&&(i.structuredQuery.limit=y),e.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:i,parent:o}}function o2(s){let e=n2(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let o=null;if(r>0){Pt(r===1,65062);const A=i.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let h=[];i.where&&(h=(function(S){const O=Pv(S);return O instanceof Fn&&yv(O)?O.getFilters():[O]})(i.where));let d=[];i.orderBy&&(d=(function(S){return S.map((O=>(function($){return new to(_s($.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(O)))})(i.orderBy));let y=null;i.limit&&(y=(function(S){let O;return O=typeof S=="object"?S.value:S,dc(O)?null:O})(i.limit));let v=null;i.startAt&&(v=(function(S){const O=!!S.before,G=S.values||[];return new ic(G,O)})(i.startAt));let _=null;return i.endAt&&(_=(function(S){const O=!S.before,G=S.values||[];return new ic(G,O)})(i.endAt)),CS(e,o,d,h,y,"F",v,_)}function u2(s,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Pv(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=_s(i.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=_s(i.unaryFilter.field);return we.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=_s(i.unaryFilter.field);return we.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=_s(i.unaryFilter.field);return we.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(s):s.fieldFilter!==void 0?(function(i){return we.create(_s(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Fn.create(i.compositeFilter.filters.map((r=>Pv(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(i.compositeFilter.op))})(s):gt(30097,{filter:s})}function c2(s){return JS[s]}function h2(s){return $S[s]}function f2(s){return WS[s]}function ys(s){return{fieldPath:s.canonicalString()}}function _s(s){return Ge.fromServerFormat(s.fieldPath)}function Hv(s){return s instanceof we?(function(i){if(i.op==="=="){if(Jy(i.value))return{unaryFilter:{field:ys(i.field),op:"IS_NAN"}};if(Zy(i.value))return{unaryFilter:{field:ys(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Jy(i.value))return{unaryFilter:{field:ys(i.field),op:"IS_NOT_NAN"}};if(Zy(i.value))return{unaryFilter:{field:ys(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(i.field),op:h2(i.op),value:i.value}}})(s):s instanceof Fn?(function(i){const r=i.getFilters().map((o=>Hv(o)));return r.length===1?r[0]:{compositeFilter:{op:f2(i.op),filters:r}}})(s):gt(54877,{filter:s})}function d2(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Gv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Sa{constructor(e,i,r,o,h=_t.min(),d=_t.min(),y=Qe.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=i,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=v}withSequenceNumber(e){return new Sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class m2{constructor(e){this.yt=e}}function g2(s){const e=o2({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?$f(e,e.limit,"L"):e}class p2{constructor(){this.Cn=new y2}addToCollectionParentIndex(e,i){return this.Cn.add(i),Z.resolve()}getCollectionParents(e,i){return Z.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return Z.resolve()}deleteFieldIndex(e,i){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,i){return Z.resolve()}getDocumentsMatchingTarget(e,i){return Z.resolve(null)}getIndexType(e,i){return Z.resolve(0)}getFieldIndexes(e,i){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,i){return Z.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,i){return Z.resolve(Ia.min())}updateCollectionGroup(e,i,r){return Z.resolve()}updateIndexEntries(e,i){return Z.resolve()}}class y2{constructor(){this.index={}}add(e){const i=e.lastSegment(),r=e.popLast(),o=this.index[i]||new Me(Wt.comparator),h=!o.has(r);return this.index[i]=o.add(r),h}has(e){const i=e.lastSegment(),r=e.popLast(),o=this.index[i];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Me(Wt.comparator)).toArray()}}const h_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qv=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Qv,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Rs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rs(0)}static cr(){return new Rs(-1)}}const f_="LruGarbageCollector",_2=1048576;function d_([s,e],[i,r]){const o=Nt(s,i);return o===0?Nt(e,r):o}class v2{constructor(e){this.Ir=e,this.buffer=new Me(d_),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();d_(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class E2{constructor(e,i,r){this.garbageCollector=e,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){rt(f_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Is(i)?rt(f_,"Ignoring IndexedDB error during garbage collection: ",i):await Vs(i)}await this.Vr(3e5)}))}}class T2{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(e,i){if(i===0)return Z.resolve(fc.ce);const r=new v2(i);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,i,r){return this.mr.removeTargets(e,i,r)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(h_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h_):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let r,o,h,d,y,v,_;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,y=Date.now(),this.removeTargets(e,r,i)))).next((S=>(h=S,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(_=Date.now(),gs()<=Lt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${h} targets in `+(v-y)+`ms
	Removed ${S} documents in `+(_-v)+`ms
Total Duration: ${_-A}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:S}))))}}function A2(s,e){return new T2(s,e)}class S2{constructor(){this.changes=new Ar((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?Z.resolve(r):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class b2{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class R2{constructor(e,i,r,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,i){let r=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(r!==null&&Yl(r.mutation,o,Qn.empty(),ne.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.getLocalViewOfDocuments(e,r,Mt()).next((()=>r))))}getLocalViewOfDocuments(e,i,r=Mt()){const o=gr();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,r).next((h=>{let d=kl();return h.forEach(((y,v)=>{d=d.insert(y,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const r=gr();return this.populateOverlays(e,r,i).next((()=>this.computeViews(e,i,r,Mt())))}populateOverlays(e,i,r){const o=[];return r.forEach((h=>{i.has(h)||o.push(h)})),this.documentOverlayCache.getOverlays(e,o).next((h=>{h.forEach(((d,y)=>{i.set(d,y)}))}))}computeViews(e,i,r,o){let h=Hi();const d=Fl(),y=(function(){return Fl()})();return i.forEach(((v,_)=>{const A=r.get(_.key);o.has(_.key)&&(A===void 0||A.mutation instanceof Sr)?h=h.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),Yl(A.mutation,_,A.mutation.getFieldMask(),ne.now())):d.set(_.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,h).next((v=>(v.forEach(((_,A)=>d.set(_,A))),i.forEach(((_,A)=>y.set(_,new b2(A,d.get(_)??null)))),y)))}recalculateAndSaveOverlays(e,i){const r=Fl();let o=new oe(((d,y)=>d-y)),h=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const y of d)y.keys().forEach((v=>{const _=i.get(v);if(_===null)return;let A=r.get(v)||Qn.empty();A=y.applyToLocalView(_,A),r.set(v,A);const S=(o.get(y.batchId)||Mt()).add(v);o=o.insert(y.batchId,S)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const v=y.getNext(),_=v.key,A=v.value,S=wv();A.forEach((O=>{if(!h.has(O)){const G=Mv(i.get(O),r.get(O));G!==null&&S.set(O,G),h=h.add(O)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,S))}return Z.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,i,r,o){return(function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):Tv(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,r,o):this.getDocumentsMatchingCollectionQuery(e,i,r,o)}getNextDocuments(e,i,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,r,o).next((h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,r.largestBatchId,o-h.size):Z.resolve(gr());let y=Zl,v=h;return d.next((_=>Z.forEach(_,((A,S)=>(y<S.largestBatchId&&(y=S.largestBatchId),h.get(A)?Z.resolve():this.remoteDocumentCache.getEntry(e,A).next((O=>{v=v.insert(A,O)}))))).next((()=>this.populateOverlays(e,_,h))).next((()=>this.computeViews(e,v,_,Mt()))).next((A=>({batchId:y,changes:Rv(A)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new ft(i)).next((r=>{let o=kl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,r,o){const h=i.collectionGroup;let d=kl();return this.indexManager.getCollectionParents(e,h).next((y=>Z.forEach(y,(v=>{const _=(function(S,O){return new Ns(O,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(i,v.child(h));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next((A=>{A.forEach(((S,O)=>{d=d.insert(S,O)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,r,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,r.largestBatchId).next((d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,r,h,o)))).next((d=>{h.forEach(((v,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,Ze.newInvalidDocument(A)))}));let y=kl();return d.forEach(((v,_)=>{const A=h.get(v);A!==void 0&&Yl(A.mutation,_,Qn.empty(),ne.now()),pc(i,_)&&(y=y.insert(v,_))})),y}))}}class w2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return Z.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:yi(o.createTime)}})(i)),Z.resolve()}getNamedQuery(e,i){return Z.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:g2(o.bundledQuery),readTime:yi(o.readTime)}})(i)),Z.resolve()}}class C2{constructor(){this.overlays=new oe(ft.comparator),this.qr=new Map}getOverlay(e,i){return Z.resolve(this.overlays.get(i))}getOverlays(e,i){const r=gr();return Z.forEach(i,(o=>this.getOverlay(e,o).next((h=>{h!==null&&r.set(o,h)})))).next((()=>r))}saveOverlays(e,i,r){return r.forEach(((o,h)=>{this.St(e,i,h)})),Z.resolve()}removeOverlaysForBatchId(e,i,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,i,r){const o=gr(),h=i.length+1,d=new ft(i.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const v=y.getNext().value,_=v.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===h&&v.largestBatchId>r&&o.set(v.getKey(),v)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,i,r,o){let h=new oe(((_,A)=>_-A));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>r){let A=h.get(_.largestBatchId);A===null&&(A=gr(),h=h.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const y=gr(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((_,A)=>y.set(_,A))),!(y.size()>=o)););return Z.resolve(y)}St(e,i,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new QS(i,r));let h=this.qr.get(i);h===void 0&&(h=Mt(),this.qr.set(i,h)),this.qr.set(i,h.add(r.key))}}class D2{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,Z.resolve()}}class wd{constructor(){this.Qr=new Me(Ue.$r),this.Ur=new Me(Ue.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const r=new Ue(e,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,i){e.forEach((r=>this.addReference(r,i)))}removeReference(e,i){this.Gr(new Ue(e,i))}zr(e,i){e.forEach((r=>this.removeReference(r,i)))}jr(e){const i=new ft(new Wt([])),r=new Ue(i,e),o=new Ue(i,e+1),h=[];return this.Ur.forEachInRange([r,o],(d=>{this.Gr(d),h.push(d.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new ft(new Wt([])),r=new Ue(i,e),o=new Ue(i,e+1);let h=Mt();return this.Ur.forEachInRange([r,o],(d=>{h=h.add(d.key)})),h}containsKey(e){const i=new Ue(e,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return ft.comparator(e.key,i.key)||Nt(e.Yr,i.Yr)}static Kr(e,i){return Nt(e.Yr,i.Yr)||ft.comparator(e.key,i.key)}}class V2{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Me(Ue.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,r,o){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new GS(h,i,r,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Ue(y.key,h)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,i){return Z.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const r=i+1,o=this.ei(r),h=o<0?0:o;return Z.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?pd:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const r=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([r,o],(d=>{const y=this.Xr(d.Yr);h.push(y)})),Z.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let r=new Me(Nt);return i.forEach((o=>{const h=new Ue(o,0),d=new Ue(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],(y=>{r=r.add(y.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,i){const r=i.path,o=r.length+1;let h=r;ft.isDocumentKey(h)||(h=h.child(""));const d=new Ue(new ft(h),0);let y=new Me(Nt);return this.Zr.forEachWhile((v=>{const _=v.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(y=y.add(v.Yr)),!0)}),d),Z.resolve(this.ti(y))}ti(e){const i=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){Pt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(i.mutations,(o=>{const h=new Ue(o.key,i.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,i){const r=new Ue(i,0),o=this.Zr.firstAfterOrEqual(r);return Z.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class I2{constructor(e){this.ri=e,this.docs=(function(){return new oe(ft.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const r=i.key,o=this.docs.get(r),h=o?o.size:0,d=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const r=this.docs.get(i);return Z.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(i))}getEntries(e,i){let r=Hi();return i.forEach((o=>{const h=this.docs.get(o);r=r.insert(o,h?h.document.mutableCopy():Ze.newInvalidDocument(o))})),Z.resolve(r)}getDocumentsMatchingQuery(e,i,r,o){let h=Hi();const d=i.path,y=new ft(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(y);for(;v.hasNext();){const{key:_,value:{document:A}}=v.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||rS(aS(A),r)<=0||(o.has(A.key)||pc(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return Z.resolve(h)}getAllFromCollectionGroup(e,i,r,o){gt(9500)}ii(e,i){return Z.forEach(this.docs,(r=>i(r)))}newChangeBuffer(e){return new N2(this)}getSize(e){return Z.resolve(this.size)}}class N2 extends S2{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),Z.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}class M2{constructor(e){this.persistence=e,this.si=new Ar((i=>vd(i)),Ed),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new wd,this.targetCount=0,this.ai=Rs.ur()}forEachTarget(e,i){return this.si.forEach(((r,o)=>i(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),Z.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Rs(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,Z.resolve()}updateTargetData(e,i){return this.Pr(i),Z.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,i,r){let o=0;const h=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=i&&r.get(y.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),Z.waitFor(h).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,i){const r=this.si.get(i)||null;return Z.resolve(r)}addMatchingKeys(e,i,r){return this._i.Wr(i,r),Z.resolve()}removeMatchingKeys(e,i,r){this._i.zr(i,r);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach((d=>{h.push(o.markPotentiallyOrphaned(e,d))})),Z.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),Z.resolve()}getMatchingKeysForTargetId(e,i){const r=this._i.Hr(i);return Z.resolve(r)}containsKey(e,i){return Z.resolve(this._i.containsKey(i))}}class Fv{constructor(e,i){this.ui={},this.overlays={},this.ci=new fc(0),this.li=!1,this.li=!0,this.hi=new D2,this.referenceDelegate=e(this),this.Pi=new M2(this),this.indexManager=new p2,this.remoteDocumentCache=(function(o){return new I2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new m2(i),this.Ii=new w2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new C2,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let r=this.ui[e.toKey()];return r||(r=new V2(i,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,r){rt("MemoryPersistence","Starting transaction:",e);const o=new O2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((h=>this.referenceDelegate.di(o).next((()=>h)))).toPromise().then((h=>(o.raiseOnCommittedEvent(),h)))}Ai(e,i){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,i))))}}class O2 extends lS{constructor(e){super(),this.currentSequenceNumber=e}}class Cd{constructor(e){this.persistence=e,this.Ri=new wd,this.Vi=null}static mi(e){return new Cd(e)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(e,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),Z.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((h=>this.fi.add(h.toString())))})).next((()=>r.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const o=ft.fromPath(r);return this.gi(e,o).next((h=>{h||i.removeEntry(o,_t.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return Z.or([()=>Z.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class lc{constructor(e,i){this.persistence=e,this.pi=new Ar((r=>cS(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=A2(this,i)}static mi(e,i){return new lc(e,i)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>i.next((o=>r+o))))}wr(e){let i=0;return this.pr(e,(r=>{i++})).next((()=>i))}pr(e,i){return Z.forEach(this.pi,((r,o)=>this.br(e,r,o).next((h=>h?Z.resolve():i(o)))))}removeTargets(e,i,r){return this.persistence.getTargetCache().removeTargets(e,i,r)}removeOrphanedDocuments(e,i){let r=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,i).next((y=>{y||(r++,h.removeEntry(d,_t.min()))})))).next((()=>h.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeTarget(e,i){const r=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Qu(e.data.value)),i}br(e,i,r){return Z.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return Z.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Dd{constructor(e,i,r,o){this.targetId=e,this.fromCache=i,this.Es=r,this.ds=o}static As(e,i){let r=Mt(),o=Mt();for(const h of i.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Dd(e,i.fromCache,r,o)}}class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wT()?8:oS(bT())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,r,o){const h={result:null};return this.ys(e,i).next((d=>{h.result=d})).next((()=>{if(!h.result)return this.ws(e,i,o,r).next((d=>{h.result=d}))})).next((()=>{if(h.result)return;const d=new x2;return this.Ss(e,i,d).next((y=>{if(h.result=y,this.Vs)return this.bs(e,i,d,y.size)}))})).next((()=>h.result))}bs(e,i,r,o){return r.documentReadCount<this.fs?(gs()<=Lt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",ps(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(gs()<=Lt.DEBUG&&rt("QueryEngine","Query:",ps(i),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(gs()<=Lt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",ps(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(i))):Z.resolve())}ys(e,i){if(e_(i))return Z.resolve(null);let r=pi(i);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=$f(i,null,"F"),r=pi(i)),this.indexManager.getDocumentsMatchingTarget(e,r).next((h=>{const d=Mt(...h);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,r).next((v=>{const _=this.Ds(i,y);return this.Cs(i,_,d,v.readTime)?this.ys(e,$f(i,null,"F")):this.vs(e,_,i,v)}))))})))))}ws(e,i,r,o){return e_(i)||o.isEqual(_t.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((h=>{const d=this.Ds(i,h);return this.Cs(i,d,r,o)?Z.resolve(null):(gs()<=Lt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ps(i)),this.vs(e,d,i,iS(o,Zl)).next((y=>y)))}))}Ds(e,i){let r=new Me(Sv(e));return i.forEach(((o,h)=>{pc(e,h)&&(r=r.add(h))})),r}Cs(e,i,r,o){if(e.limit===null)return!1;if(r.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,r){return gs()<=Lt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",ps(i)),this.ps.getDocumentsMatchingQuery(e,i,Ia.min(),r)}vs(e,i,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((h=>(i.forEach((d=>{h=h.insert(d.key,d)})),h)))}}const Vd="LocalStore",U2=3e8;class L2{constructor(e,i,r,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new oe(Nt),this.xs=new Ar((h=>vd(h)),Ed),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function j2(s,e,i,r){return new L2(s,e,i,r)}async function Yv(s,e){const i=Tt(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return i.mutationQueue.getAllMutationBatches(r).next((h=>(o=h,i.Bs(e),i.mutationQueue.getAllMutationBatches(r)))).next((h=>{const d=[],y=[];let v=Mt();for(const _ of o){d.push(_.batchId);for(const A of _.mutations)v=v.add(A.key)}for(const _ of h){y.push(_.batchId);for(const A of _.mutations)v=v.add(A.key)}return i.localDocuments.getDocuments(r,v).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:y})))}))}))}function B2(s,e){const i=Tt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,v,_,A){const S=_.batch,O=S.keys();let G=Z.resolve();return O.forEach(($=>{G=G.next((()=>A.getEntry(v,$))).next((et=>{const W=_.docVersions.get($);Pt(W!==null,48541),et.version.compareTo(W)<0&&(S.applyToRemoteDocument(et,_),et.isValidDocument()&&(et.setReadTime(_.commitVersion),A.addEntry(et)))}))})),G.next((()=>y.mutationQueue.removeMutationBatch(v,S)))})(i,r,e,h).next((()=>h.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(y){let v=Mt();for(let _=0;_<y.mutationResults.length;++_)y.mutationResults[_].transformResults.length>0&&(v=v.add(y.batch.mutations[_].key));return v})(e)))).next((()=>i.localDocuments.getDocuments(r,o)))}))}function Xv(s){const e=Tt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function k2(s,e){const i=Tt(s),r=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const y=[];e.targetChanges.forEach(((A,S)=>{const O=o.get(S);if(!O)return;y.push(i.Pi.removeMatchingKeys(h,A.removedDocuments,S).next((()=>i.Pi.addMatchingKeys(h,A.addedDocuments,S))));let G=O.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(S)!==null?G=G.withResumeToken(Qe.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,r)),o=o.insert(S,G),(function(et,W,dt){return et.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-et.snapshotVersion.toMicroseconds()>=U2?!0:dt.addedDocuments.size+dt.modifiedDocuments.size+dt.removedDocuments.size>0})(O,G,A)&&y.push(i.Pi.updateTargetData(h,G))}));let v=Hi(),_=Mt();if(e.documentUpdates.forEach((A=>{e.resolvedLimboDocuments.has(A)&&y.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))})),y.push(q2(h,d,e.documentUpdates).next((A=>{v=A.ks,_=A.qs}))),!r.isEqual(_t.min())){const A=i.Pi.getLastRemoteSnapshotVersion(h).next((S=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,r)));y.push(A)}return Z.waitFor(y).next((()=>d.apply(h))).next((()=>i.localDocuments.getLocalViewOfDocuments(h,v,_))).next((()=>v))})).then((h=>(i.Ms=o,h)))}function q2(s,e,i){let r=Mt(),o=Mt();return i.forEach((h=>r=r.add(h))),e.getEntries(s,r).next((h=>{let d=Hi();return i.forEach(((y,v)=>{const _=h.get(y);v.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(y)),v.isNoDocument()&&v.version.isEqual(_t.min())?(e.removeEntry(y,v.readTime),d=d.insert(y,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),d=d.insert(y,v)):rt(Vd,"Ignoring outdated watch update for ",y,". Current version:",_.version," Watch version:",v.version)})),{ks:d,qs:o}}))}function P2(s,e){const i=Tt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=pd),i.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function H2(s,e){const i=Tt(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return i.Pi.getTargetData(r,e).next((h=>h?(o=h,Z.resolve(o)):i.Pi.allocateTargetId(r).next((d=>(o=new Sa(e,d,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=i.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(e,r.targetId)),r}))}async function id(s,e,i){const r=Tt(s),o=r.Ms.get(e),h=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",h,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Is(d))throw d;rt(Vd,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function m_(s,e,i){const r=Tt(s);let o=_t.min(),h=Mt();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,_,A){const S=Tt(v),O=S.xs.get(A);return O!==void 0?Z.resolve(S.Ms.get(O)):S.Pi.getTargetData(_,A)})(r,d,pi(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,y.targetId).next((v=>{h=v}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,i?o:_t.min(),i?h:Mt()))).next((y=>(G2(r,VS(e),y),{documents:y,Qs:h})))))}function G2(s,e,i){let r=s.Os.get(e)||_t.min();i.forEach(((o,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)})),s.Os.set(e,r)}class g_{constructor(){this.activeTargetIds=zS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q2{constructor(){this.Mo=new g_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,r){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,r){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new g_,Promise.resolve()}handleUserChange(e,i,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class F2{Oo(e){}shutdown(){}}const p_="ConnectivityMonitor";class y_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(p_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){rt(p_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hu=null;function ad(){return Hu===null?Hu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hu++,"0x"+Hu.toString(16)}const Lf="RestConnection",Y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===ec?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,i,r,o,h){const d=ad(),y=this.zo(e,i.toUriEncodedString());rt(Lf,`Sending RPC '${e}' ${d}:`,y,r);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,h);const{host:_}=new URL(y),A=fd(_);return this.Jo(e,y,v,r,A).then((S=>(rt(Lf,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw Ts(Lf,`RPC '${e}' ${d} failed with error: `,S,"url: ",y,"request:",r),S}))}Ho(e,i,r,o,h,d){return this.Go(e,i,r,o,h)}jo(e,i,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ds})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,h)=>e[h]=o)),r&&r.headers.forEach(((o,h)=>e[h]=o))}zo(e,i){const r=Y2[e];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}class K2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Xe="WebChannelConnection";class Z2 extends X2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,r,o,h){const d=ad();return new Promise(((y,v)=>{const _=new Z_;_.setWithCredentials(!0),_.listenOnce(J_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Gu.NO_ERROR:const S=_.getResponseJson();rt(Xe,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),y(S);break;case Gu.TIMEOUT:rt(Xe,`RPC '${e}' ${d} timed out`),v(new at(K.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const O=_.getStatus();if(rt(Xe,`RPC '${e}' ${d} failed with status:`,O,"response text:",_.getResponseText()),O>0){let G=_.getResponseJson();Array.isArray(G)&&(G=G[0]);const $=G?.error;if($&&$.status&&$.message){const et=(function(dt){const At=dt.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(At)>=0?At:K.UNKNOWN})($.status);v(new at(et,$.message))}else v(new at(K.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new at(K.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{rt(Xe,`RPC '${e}' ${d} completed.`)}}));const A=JSON.stringify(o);rt(Xe,`RPC '${e}' ${d} sending request:`,o),_.send(i,"POST",A,r,15)}))}T_(e,i,r){const o=ad(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=tv(),y=W_(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(v.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,i,r),v.encodeInitMessageHeaders=!0;const A=h.join("");rt(Xe,`Creating RPC '${e}' stream ${o}: ${A}`,v);const S=d.createWebChannel(A,v);this.I_(S);let O=!1,G=!1;const $=new K2({Yo:W=>{G?rt(Xe,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(O||(rt(Xe,`Opening RPC '${e}' stream ${o} transport.`),S.open(),O=!0),rt(Xe,`RPC '${e}' stream ${o} sending:`,W),S.send(W))},Zo:()=>S.close()}),et=(W,dt,At)=>{W.listen(dt,(J=>{try{At(J)}catch(ut){setTimeout((()=>{throw ut}),0)}}))};return et(S,Bl.EventType.OPEN,(()=>{G||(rt(Xe,`RPC '${e}' stream ${o} transport opened.`),$.o_())})),et(S,Bl.EventType.CLOSE,(()=>{G||(G=!0,rt(Xe,`RPC '${e}' stream ${o} transport closed`),$.a_(),this.E_(S))})),et(S,Bl.EventType.ERROR,(W=>{G||(G=!0,Ts(Xe,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),$.a_(new at(K.UNAVAILABLE,"The operation could not be completed")))})),et(S,Bl.EventType.MESSAGE,(W=>{if(!G){const dt=W.data[0];Pt(!!dt,16349);const At=dt,J=At?.error||At[0]?.error;if(J){rt(Xe,`RPC '${e}' stream ${o} received error:`,J);const ut=J.status;let vt=(function(b){const D=Re[b];if(D!==void 0)return zv(D)})(ut),pt=J.message;vt===void 0&&(vt=K.INTERNAL,pt="Unknown error status: "+ut+" with message "+J.message),G=!0,$.a_(new at(vt,pt)),S.close()}else rt(Xe,`RPC '${e}' stream ${o} received:`,dt),$.u_(dt)}})),et(y,$_.STAT_EVENT,(W=>{W.stat===Qf.PROXY?rt(Xe,`RPC '${e}' stream ${o} detected buffering proxy`):W.stat===Qf.NOPROXY&&rt(Xe,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function jf(){return typeof document<"u"?document:null}function Ec(s){return new t2(s,!0)}class Kv{constructor(e,i,r=1e3,o=1.5,h=6e4){this.Mi=e,this.timerId=i,this.d_=r,this.A_=o,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-r);o>0&&rt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const __="PersistentStream";class Zv{constructor(e,i,r,o,h,d,y,v){this.Mi=e,this.S_=r,this.b_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kv(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===K.RESOURCE_EXHAUSTED?(Pi(i.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===i&&this.G_(r,o)}),(r=>{e((()=>{const o=new at(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,i){const r=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return rt(__,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(rt(__,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class J2 extends Zv{constructor(e,i,r,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,o,d),this.serializer=h}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=i2(this.serializer,e),r=(function(h){if(!("targetChange"in h))return _t.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?_t.min():d.readTime?yi(d.readTime):_t.min()})(e);return this.listener.H_(i,r)}Y_(e){const i={};i.database=nd(this.serializer),i.addTarget=(function(h,d){let y;const v=d.target;if(y=Zf(v)?{documents:s2(h,v)}:{query:l2(h,v).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=jv(h,d.resumeToken);const _=Wf(h,d.expectedCount);_!==null&&(y.expectedCount=_)}else if(d.snapshotVersion.compareTo(_t.min())>0){y.readTime=sc(h,d.snapshotVersion.toTimestamp());const _=Wf(h,d.expectedCount);_!==null&&(y.expectedCount=_)}return y})(this.serializer,e);const r=u2(this.serializer,e);r&&(i.labels=r),this.q_(i)}Z_(e){const i={};i.database=nd(this.serializer),i.removeTarget=e,this.q_(i)}}class $2 extends Zv{constructor(e,i,r,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,o,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=r2(e.writeResults,e.commitTime),r=yi(e.commitTime);return this.listener.na(r,i)}ra(){const e={};e.database=nd(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((r=>a2(this.serializer,r)))};this.q_(i)}}class W2{}class tb extends W2{constructor(e,i,r,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new at(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Go(e,td(i,r),o,h,d))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new at(K.UNKNOWN,h.toString())}))}Ho(e,i,r,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,td(i,r),o,d,y,h))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new at(K.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class eb{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pi(i),this.aa=!1):rt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Er="RemoteStore";class nb{constructor(e,i,r,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{br(this)&&(rt(Er,"Restarting streams for network reachability change."),await(async function(v){const _=Tt(v);_.Ea.add(4),await lo(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Tc(_)})(this))}))})),this.Ra=new eb(r,o)}}async function Tc(s){if(br(s))for(const e of s.da)await e(!0)}async function lo(s){for(const e of s.da)await e(!1)}function Jv(s,e){const i=Tt(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Od(i)?Md(i):Ms(i).O_()&&Nd(i,e))}function Id(s,e){const i=Tt(s),r=Ms(i);i.Ia.delete(e),r.O_()&&$v(i,e),i.Ia.size===0&&(r.O_()?r.L_():br(i)&&i.Ra.set("Unknown"))}function Nd(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Ms(s).Y_(e)}function $v(s,e){s.Va.Ue(e),Ms(s).Z_(e)}function Md(s){s.Va=new ZS({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ms(s).start(),s.Ra.ua()}function Od(s){return br(s)&&!Ms(s).x_()&&s.Ia.size>0}function br(s){return Tt(s).Ea.size===0}function Wv(s){s.Va=void 0}async function ib(s){s.Ra.set("Online")}async function ab(s){s.Ia.forEach(((e,i)=>{Nd(s,e)}))}async function rb(s,e){Wv(s),Od(s)?(s.Ra.ha(e),Md(s)):s.Ra.set("Unknown")}async function sb(s,e,i){if(s.Ra.set("Online"),e instanceof Lv&&e.state===2&&e.cause)try{await(async function(o,h){const d=h.cause;for(const y of h.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(s,e)}catch(r){rt(Er,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oc(s,r)}else if(e instanceof Xu?s.Va.Ze(e):e instanceof Uv?s.Va.st(e):s.Va.tt(e),!i.isEqual(_t.min()))try{const r=await Xv(s.localStore);i.compareTo(r)>=0&&await(function(h,d){const y=h.Va.Tt(d);return y.targetChanges.forEach(((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const A=h.Ia.get(_);A&&h.Ia.set(_,A.withResumeToken(v.resumeToken,d))}})),y.targetMismatches.forEach(((v,_)=>{const A=h.Ia.get(v);if(!A)return;h.Ia.set(v,A.withResumeToken(Qe.EMPTY_BYTE_STRING,A.snapshotVersion)),$v(h,v);const S=new Sa(A.target,v,_,A.sequenceNumber);Nd(h,S)})),h.remoteSyncer.applyRemoteEvent(y)})(s,i)}catch(r){rt(Er,"Failed to raise snapshot:",r),await oc(s,r)}}async function oc(s,e,i){if(!Is(e))throw e;s.Ea.add(1),await lo(s),s.Ra.set("Offline"),i||(i=()=>Xv(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{rt(Er,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Tc(s)}))}function t0(s,e){return e().catch((i=>oc(s,i,e)))}async function Ac(s){const e=Tt(s),i=xa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pd;for(;lb(e);)try{const o=await P2(e.localStore,r);if(o===null){e.Ta.length===0&&i.L_();break}r=o.batchId,ob(e,o)}catch(o){await oc(e,o)}e0(e)&&n0(e)}function lb(s){return br(s)&&s.Ta.length<10}function ob(s,e){s.Ta.push(e);const i=xa(s);i.O_()&&i.X_&&i.ea(e.mutations)}function e0(s){return br(s)&&!xa(s).x_()&&s.Ta.length>0}function n0(s){xa(s).start()}async function ub(s){xa(s).ra()}async function cb(s){const e=xa(s);for(const i of s.Ta)e.ea(i.mutations)}async function hb(s,e,i){const r=s.Ta.shift(),o=Sd.from(r,e,i);await t0(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Ac(s)}async function fb(s,e){e&&xa(s).X_&&await(async function(r,o){if((function(d){return YS(d)&&d!==K.ABORTED})(o.code)){const h=r.Ta.shift();xa(r).B_(),await t0(r,(()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o))),await Ac(r)}})(s,e),e0(s)&&n0(s)}async function v_(s,e){const i=Tt(s);i.asyncQueue.verifyOperationInProgress(),rt(Er,"RemoteStore received new credentials");const r=br(i);i.Ea.add(3),await lo(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Tc(i)}async function db(s,e){const i=Tt(s);e?(i.Ea.delete(2),await Tc(i)):e||(i.Ea.add(2),await lo(i),i.Ra.set("Unknown"))}function Ms(s){return s.ma||(s.ma=(function(i,r,o){const h=Tt(i);return h.sa(),new J2(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(s.datastore,s.asyncQueue,{Xo:ib.bind(null,s),t_:ab.bind(null,s),r_:rb.bind(null,s),H_:sb.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Od(s)?Md(s):s.Ra.set("Unknown")):(await s.ma.stop(),Wv(s))}))),s.ma}function xa(s){return s.fa||(s.fa=(function(i,r,o){const h=Tt(i);return h.sa(),new $2(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:ub.bind(null,s),r_:fb.bind(null,s),ta:cb.bind(null,s),na:hb.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ac(s)):(await s.fa.stop(),s.Ta.length>0&&(rt(Er,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class xd{constructor(e,i,r,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=r,this.op=o,this.removalCallback=h,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,r,o,h){const d=Date.now()+r,y=new xd(e,i,d,o,h);return y.start(r),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zd(s,e){if(Pi("AsyncQueue",`${e}: ${s}`),Is(s))return new at(K.UNAVAILABLE,`${e}: ${s}`);throw s}class Es{static emptySet(e){return new Es(e.comparator)}constructor(e){this.comparator=e?(i,r)=>e(i,r)||ft.comparator(i.key,r.key):(i,r)=>ft.comparator(i.key,r.key),this.keyedMap=kl(),this.sortedSet=new oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,r)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Es)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=r.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const r=new Es;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=i,r}}class E_{constructor(){this.ga=new oe(ft.comparator)}track(e){const i=e.doc.key,r=this.ga.get(i);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(i,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(i):e.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):gt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,r)=>{e.push(r)})),e}}class ws{constructor(e,i,r,o,h,d,y,v,_){this.query=e,this.docs=i,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,i,r,o,h){const d=[];return i.forEach((y=>{d.push({type:0,doc:y})})),new ws(e,i,Es.emptySet(i),d,r,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,r=e.docChanges;if(i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==r[o].type||!i[o].doc.isEqual(r[o].doc))return!1;return!0}}class mb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class gb{constructor(){this.queries=T_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const o=Tt(i),h=o.queries;o.queries=T_(),h.forEach(((d,y)=>{for(const v of y.Sa)v.onError(r)}))})(this,new at(K.ABORTED,"Firestore shutting down"))}}function T_(){return new Ar((s=>Av(s)),gc)}async function i0(s,e){const i=Tt(s);let r=3;const o=e.query;let h=i.queries.get(o);h?!h.ba()&&e.Da()&&(r=2):(h=new mb,r=e.Da()?0:1);try{switch(r){case 0:h.wa=await i.onListen(o,!0);break;case 1:h.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const y=zd(d,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(y)}i.queries.set(o,h),h.Sa.push(e),e.va(i.onlineState),h.wa&&e.Fa(h.wa)&&Ud(i)}async function a0(s,e){const i=Tt(s),r=e.query;let o=3;const h=i.queries.get(r);if(h){const d=h.Sa.indexOf(e);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?o=e.Da()?0:1:!h.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function pb(s,e){const i=Tt(s);let r=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const y of d.Sa)y.Fa(o)&&(r=!0);d.wa=o}}r&&Ud(i)}function yb(s,e,i){const r=Tt(s),o=r.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);r.queries.delete(e)}function Ud(s){s.Ca.forEach((e=>{e.next()}))}var rd,A_;(A_=rd||(rd={})).Ma="default",A_.Cache="cache";class r0{constructor(e,i,r){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rd.Cache}}class s0{constructor(e){this.key=e}}class l0{constructor(e){this.key=e}}class _b{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=Sv(e),this.tu=new Es(this.eu)}get nu(){return this.Ya}ru(e,i){const r=i?i.iu:new E_,o=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,y=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((A,S)=>{const O=o.get(A),G=pc(this.query,S)?S:null,$=!!O&&this.mutatedKeys.has(O.key),et=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let W=!1;O&&G?O.data.isEqual(G.data)?$!==et&&(r.track({type:3,doc:G}),W=!0):this.su(O,G)||(r.track({type:2,doc:G}),W=!0,(v&&this.eu(G,v)>0||_&&this.eu(G,_)<0)&&(y=!0)):!O&&G?(r.track({type:0,doc:G}),W=!0):O&&!G&&(r.track({type:1,doc:O}),W=!0,(v||_)&&(y=!0)),W&&(G?(d=d.add(G),h=et?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),r.track({type:1,doc:A})}return{tu:d,iu:r,Cs:y,mutatedKeys:h}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,r,o){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((A,S)=>(function(G,$){const et=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:W})}};return et(G)-et($)})(A.type,S.type)||this.eu(A.doc,S.doc))),this.ou(r),o=o??!1;const y=i&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,_=v!==this.Za;return this.Za=v,d.length!==0||_?{snapshot:new ws(this.query,e.tu,h,d,e.mutatedKeys,v===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new E_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return e.forEach((r=>{this.Xa.has(r)||i.push(new l0(r))})),this.Xa.forEach((r=>{e.has(r)||i.push(new s0(r))})),i}cu(e){this.Ya=e.Qs,this.Xa=Mt();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return ws.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ld="SyncEngine";class vb{constructor(e,i,r){this.query=e,this.targetId=i,this.view=r}}class Eb{constructor(e){this.key=e,this.hu=!1}}class Tb{constructor(e,i,r,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=r,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ar((y=>Av(y)),gc),this.Iu=new Map,this.Eu=new Set,this.du=new oe(ft.comparator),this.Au=new Map,this.Ru=new wd,this.Vu={},this.mu=new Map,this.fu=Rs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ab(s,e,i=!0){const r=d0(s);let o;const h=r.Tu.get(e);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.lu()):o=await o0(r,e,i,!0),o}async function Sb(s,e){const i=d0(s);await o0(i,e,!0,!1)}async function o0(s,e,i,r){const o=await H2(s.localStore,pi(e)),h=o.targetId,d=s.sharedClientState.addLocalQueryTarget(h,i);let y;return r&&(y=await bb(s,e,h,d==="current",o.resumeToken)),s.isPrimaryClient&&i&&Jv(s.remoteStore,o),y}async function bb(s,e,i,r,o){s.pu=(S,O,G)=>(async function(et,W,dt,At){let J=W.view.ru(dt);J.Cs&&(J=await m_(et.localStore,W.query,!1).then((({documents:R})=>W.view.ru(R,J))));const ut=At&&At.targetChanges.get(W.targetId),vt=At&&At.targetMismatches.get(W.targetId)!=null,pt=W.view.applyChanges(J,et.isPrimaryClient,ut,vt);return b_(et,W.targetId,pt.au),pt.snapshot})(s,S,O,G);const h=await m_(s.localStore,e,!0),d=new _b(e,h.Qs),y=d.ru(h.documents),v=so.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",o),_=d.applyChanges(y,s.isPrimaryClient,v);b_(s,i,_.au);const A=new vb(e,i,d);return s.Tu.set(e,A),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),_.snapshot}async function Rb(s,e,i){const r=Tt(s),o=r.Tu.get(e),h=r.Iu.get(o.targetId);if(h.length>1)return r.Iu.set(o.targetId,h.filter((d=>!gc(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await id(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),i&&Id(r.remoteStore,o.targetId),sd(r,o.targetId)})).catch(Vs)):(sd(r,o.targetId),await id(r.localStore,o.targetId,!0))}async function wb(s,e){const i=Tt(s),r=i.Tu.get(e),o=i.Iu.get(r.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Id(i.remoteStore,r.targetId))}async function Cb(s,e,i){const r=xb(s);try{const o=await(function(d,y){const v=Tt(d),_=ne.now(),A=y.reduce(((G,$)=>G.add($.key)),Mt());let S,O;return v.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let $=Hi(),et=Mt();return v.Ns.getEntries(G,A).next((W=>{$=W,$.forEach(((dt,At)=>{At.isValidDocument()||(et=et.add(dt))}))})).next((()=>v.localDocuments.getOverlayedDocuments(G,$))).next((W=>{S=W;const dt=[];for(const At of y){const J=PS(At,S.get(At.key).overlayedDocument);J!=null&&dt.push(new Sr(At.key,J,mv(J.value.mapValue),ki.exists(!0)))}return v.mutationQueue.addMutationBatch(G,_,dt,y)})).next((W=>{O=W;const dt=W.applyToLocalDocumentSet(S,et);return v.documentOverlayCache.saveOverlays(G,W.batchId,dt)}))})).then((()=>({batchId:O.batchId,changes:Rv(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,y,v){let _=d.Vu[d.currentUser.toKey()];_||(_=new oe(Nt)),_=_.insert(y,v),d.Vu[d.currentUser.toKey()]=_})(r,o.batchId,i),await oo(r,o.changes),await Ac(r.remoteStore)}catch(o){const h=zd(o,"Failed to persist write");i.reject(h)}}async function u0(s,e){const i=Tt(s);try{const r=await k2(i.localStore,e);e.targetChanges.forEach(((o,h)=>{const d=i.Au.get(h);d&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Pt(d.hu,14607):o.removedDocuments.size>0&&(Pt(d.hu,42227),d.hu=!1))})),await oo(i,r,e)}catch(r){await Vs(r)}}function S_(s,e,i){const r=Tt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const o=[];r.Tu.forEach(((h,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const v=Tt(d);v.onlineState=y;let _=!1;v.queries.forEach(((A,S)=>{for(const O of S.Sa)O.va(y)&&(_=!0)})),_&&Ud(v)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Db(s,e,i){const r=Tt(s);r.sharedClientState.updateQueryState(e,"rejected",i);const o=r.Au.get(e),h=o&&o.key;if(h){let d=new oe(ft.comparator);d=d.insert(h,Ze.newNoDocument(h,_t.min()));const y=Mt().add(h),v=new vc(_t.min(),new Map,new oe(Nt),d,y);await u0(r,v),r.du=r.du.remove(h),r.Au.delete(e),jd(r)}else await id(r.localStore,e,!1).then((()=>sd(r,e,i))).catch(Vs)}async function Vb(s,e){const i=Tt(s),r=e.batch.batchId;try{const o=await B2(i.localStore,e);h0(i,r,null),c0(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await oo(i,o)}catch(o){await Vs(o)}}async function Ib(s,e,i){const r=Tt(s);try{const o=await(function(d,y){const v=Tt(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let A;return v.mutationQueue.lookupMutationBatch(_,y).next((S=>(Pt(S!==null,37113),A=S.keys(),v.mutationQueue.removeMutationBatch(_,S)))).next((()=>v.mutationQueue.performConsistencyCheck(_))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(_,A,y))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A))).next((()=>v.localDocuments.getDocuments(_,A)))}))})(r.localStore,e);h0(r,e,i),c0(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await oo(r,o)}catch(o){await Vs(o)}}function c0(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function h0(s,e,i){const r=Tt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function sd(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||f0(s,r)}))}function f0(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(Id(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),jd(s))}function b_(s,e,i){for(const r of i)r instanceof s0?(s.Ru.addReference(r.key,e),Nb(s,r)):r instanceof l0?(rt(Ld,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||f0(s,r.key)):gt(19791,{wu:r})}function Nb(s,e){const i=e.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(rt(Ld,"New document in limbo: "+i),s.Eu.add(r),jd(s))}function jd(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new ft(Wt.fromString(e)),r=s.fu.next();s.Au.set(r,new Eb(i)),s.du=s.du.insert(i,r),Jv(s.remoteStore,new Sa(pi(Td(i.path)),r,"TargetPurposeLimboResolution",fc.ce))}}async function oo(s,e,i){const r=Tt(s),o=[],h=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((y,v)=>{d.push(r.pu(v,e,i).then((_=>{if((_||i)&&r.isPrimaryClient){const A=_?!_.fromCache:i?.targetChanges.get(v.targetId)?.current;r.sharedClientState.updateQueryState(v.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Dd.As(v.targetId,_);h.push(A)}})))})),await Promise.all(d),r.Pu.H_(o),await(async function(v,_){const A=Tt(v);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Z.forEach(_,(O=>Z.forEach(O.Es,(G=>A.persistence.referenceDelegate.addReference(S,O.targetId,G))).next((()=>Z.forEach(O.ds,(G=>A.persistence.referenceDelegate.removeReference(S,O.targetId,G)))))))))}catch(S){if(!Is(S))throw S;rt(Vd,"Failed to update sequence numbers: "+S)}for(const S of _){const O=S.targetId;if(!S.fromCache){const G=A.Ms.get(O),$=G.snapshotVersion,et=G.withLastLimboFreeSnapshotVersion($);A.Ms=A.Ms.insert(O,et)}}})(r.localStore,h))}async function Mb(s,e){const i=Tt(s);if(!i.currentUser.isEqual(e)){rt(Ld,"User change. New user:",e.toKey());const r=await Yv(i.localStore,e);i.currentUser=e,(function(h,d){h.mu.forEach((y=>{y.forEach((v=>{v.reject(new at(K.CANCELLED,d))}))})),h.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oo(i,r.Ls)}}function Ob(s,e){const i=Tt(s),r=i.Au.get(e);if(r&&r.hu)return Mt().add(r.key);{let o=Mt();const h=i.Iu.get(e);if(!h)return o;for(const d of h){const y=i.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function d0(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=u0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ob.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Db.bind(null,e),e.Pu.H_=pb.bind(null,e.eventManager),e.Pu.yu=yb.bind(null,e.eventManager),e}function xb(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ib.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ec(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return j2(this.persistence,new z2,e.initialUser,this.serializer)}Cu(e){return new Fv(Cd.mi,this.serializer)}Du(e){return new Q2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class zb extends uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){Pt(this.persistence.referenceDelegate instanceof lc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new E2(r,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Fv((r=>lc.mi(r,i)),this.serializer)}}class ld{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mb.bind(null,this.syncEngine),await db(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gb})()}createDatastore(e){const i=Ec(e.databaseInfo.databaseId),r=(function(h){return new Z2(h)})(e.databaseInfo);return(function(h,d,y,v){return new tb(h,d,y,v)})(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return(function(r,o,h,d,y){return new nb(r,o,h,d,y)})(this.localStore,this.datastore,e.asyncQueue,(i=>S_(this.syncEngine,i,0)),(function(){return y_.v()?new y_:new F2})())}createSyncEngine(e,i){return(function(o,h,d,y,v,_,A){const S=new Tb(o,h,d,y,v,_);return A&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Tt(i);rt(Er,"RemoteStore shutting down."),r.Ea.add(5),await lo(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ld.provider={build:()=>new ld};class m0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}const za="FirestoreClient";class Ub{constructor(e,i,r,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=Ke.UNAUTHENTICATED,this.clientId=gd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,(async d=>{rt(za,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(rt(za,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=zd(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Bf(s,e){s.asyncQueue.verifyOperationInProgress(),rt(za,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Yv(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function R_(s,e){s.asyncQueue.verifyOperationInProgress();const i=await Lb(s);rt(za,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((r=>v_(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>v_(e.remoteStore,o))),s._onlineComponents=e}async function Lb(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt(za,"Using user provided OfflineComponentProvider");try{await Bf(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;Ts("Error using user provided cache. Falling back to memory cache: "+i),await Bf(s,new uc)}}else rt(za,"Using default OfflineComponentProvider"),await Bf(s,new zb(void 0));return s._offlineComponents}async function g0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt(za,"Using user provided OnlineComponentProvider"),await R_(s,s._uninitializedComponentsProvider._online)):(rt(za,"Using default OnlineComponentProvider"),await R_(s,new ld))),s._onlineComponents}function jb(s){return g0(s).then((e=>e.syncEngine))}async function od(s){const e=await g0(s),i=e.eventManager;return i.onListen=Ab.bind(null,e.syncEngine),i.onUnlisten=Rb.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Sb.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=wb.bind(null,e.syncEngine),i}function Bb(s,e,i={}){const r=new Ca;return s.asyncQueue.enqueueAndForget((async()=>(function(h,d,y,v,_){const A=new m0({next:O=>{A.Nu(),d.enqueueAndForget((()=>a0(h,S))),O.fromCache&&v.source==="server"?_.reject(new at(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(O)},error:O=>_.reject(O)}),S=new r0(y,A,{includeMetadataChanges:!0,qa:!0});return i0(h,S)})(await od(s),s.asyncQueue,e,i,r))),r.promise}function p0(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const w_=new Map;const y0="firestore.googleapis.com",C_=!0;class D_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new at(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y0,this.ssl=C_}else this.host=e.host,this.ssl=e.ssl??C_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_2)throw new at(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p0(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new at(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new at(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new at(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sc{constructor(e,i,r,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new at(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FA;switch(r.type){case"firstParty":return new ZA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=w_.get(i);r&&(rt("ComponentProvider","Removing Datastore"),w_.delete(i),r.terminate())})(this),Promise.resolve()}}function kb(s,e,i,r={}){s=Da(s,Sc);const o=fd(e),h=s._getSettings(),d={...h,emulatorOptions:s._getEmulatorOptions()},y=`${e}:${i}`;o&&(vT(`https://${y}`),ST("Firestore",!0)),h.host!==y0&&h.host!==y&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:y,ssl:o,emulatorOptions:r};if(!Ju(v,d)&&(s._setSettings(v),r.mockUserToken)){let _,A;if(typeof r.mockUserToken=="string")_=r.mockUserToken,A=Ke.MOCK_USER;else{_=ET(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new at(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Ke(S)}s._authCredentials=new YA(new nv(_,A))}}class Ua{constructor(e,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class De{constructor(e,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,r){if(ao(i,De._jsonSchema))return new De(e,r||null,new ft(Wt.fromString(i.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:Ce("string",De._jsonSchemaVersion),referencePath:Ce("string")};class Va extends Ua{constructor(e,i,r){super(e,i,Td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new ft(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function _0(s,e,...i){if(s=_r(s),iv("collection","path",e),s instanceof Sc){const r=Wt.fromString(e,...i);return qy(r),new Va(s,null,r)}{if(!(s instanceof De||s instanceof Va))throw new at(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Wt.fromString(e,...i));return qy(r),new Va(s.firestore,null,r)}}function qb(s,e,...i){if(s=_r(s),arguments.length===1&&(e=gd.newId()),iv("doc","path",e),s instanceof Sc){const r=Wt.fromString(e,...i);return ky(r),new De(s,null,new ft(r))}{if(!(s instanceof De||s instanceof Va))throw new at(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Wt.fromString(e,...i));return ky(r),new De(s.firestore,s instanceof Va?s.converter:null,new ft(r))}}const V_="AsyncQueue";class I_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kv(this,"async_queue_retry"),this._c=()=>{const r=jf();r&&rt(V_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const i=jf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=jf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;rt(V_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Pi("INTERNAL UNHANDLED ERROR: ",N_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(e,i,r){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=xd.createAndSchedule(this,e,i,r,(h=>this.hc(h)));return this.tc.push(o),o}uc(){this.nc&&gt(47125,{Pc:N_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function N_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function M_(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const o=i;for(const h of r)if(h in o&&typeof o[h]=="function")return!0;return!1})(s,["next","error","complete"])}class io extends Sc{constructor(e,i,r,o){super(e,i,r,o),this.type="firestore",this._queue=new I_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I_(e),this._firestoreClient=void 0,await e}}}function Pb(s,e){const i=typeof s=="object"?s:OA(),r=typeof s=="string"?s:ec,o=DA(i,"firestore").getImmediate({identifier:r});if(!o._initialized){const h=yT("firestore");h&&kb(o,...h)}return o}function Bd(s){if(s._terminated)throw new at(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Hb(s),s._firestoreClient}function Hb(s){const e=s._freezeSettings(),i=(function(o,h,d,y){return new dS(o,h,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,p0(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Ub(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(o){const h=o?._online.build();return{_offline:o?._offline.build(h),_online:h}})(s._componentsProvider))}class Mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mn(Qe.fromBase64String(e))}catch(i){throw new at(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Mn(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ao(e,Mn._jsonSchema))return Mn.fromBase64String(e.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:Ce("string",Mn._jsonSchemaVersion),bytes:Ce("string")};class kd{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new at(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class v0{constructor(e){this._methodName=e}}class _i{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new at(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new at(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(ao(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:Ce("string",_i._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};class vi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==o[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ao(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new vi(e.vectorValues);throw new at(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:Ce("string",vi._jsonSchemaVersion),vectorValues:Ce("object")};const Gb=/^__.*__$/;class Qb{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,i,this.fieldTransforms):new ro(e,this.data,i,this.fieldTransforms)}}function E0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:s})}}class qd{constructor(e,i,r,o,h,d){this.settings=e,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=o,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.gc(e),r}yc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(E0(this.Ac)&&Gb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Fb{constructor(e,i,r){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=r||Ec(e)}Cc(e,i,r,o=!1){return new qd({Ac:e,methodName:i,Dc:r,path:Ge.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T0(s){const e=s._freezeSettings(),i=Ec(s._databaseId);return new Fb(s._databaseId,!!e.ignoreUndefinedProperties,i)}function Yb(s,e,i,r,o,h={}){const d=s.Cc(h.merge||h.mergeFields?2:0,e,i,o);b0("Data must be an object, but it was:",d,r);const y=A0(r,d);let v,_;if(h.merge)v=new Qn(d.fieldMask),_=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const S of h.mergeFields){const O=Kb(e,S,i);if(!d.contains(O))throw new at(K.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);Jb(A,O)||A.push(O)}v=new Qn(A),_=d.fieldTransforms.filter((S=>v.covers(S.field)))}else v=null,_=d.fieldTransforms;return new Qb(new Nn(y),v,_)}function Xb(s,e,i,r=!1){return Pd(i,s.Cc(r?4:3,e))}function Pd(s,e){if(S0(s=_r(s)))return b0("Unsupported field value:",e,s),A0(s,e);if(s instanceof v0)return(function(r,o){if(!E0(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(o);h&&o.fieldTransforms.push(h)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const h=[];let d=0;for(const y of r){let v=Pd(y,o.wc(d));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),d++}return{arrayValue:{values:h}}})(s,e)}return(function(r,o){if((r=_r(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return US(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=ne.fromDate(r);return{timestampValue:sc(o.serializer,h)}}if(r instanceof ne){const h=new ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sc(o.serializer,h)}}if(r instanceof _i)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:jv(o.serializer,r._byteString)};if(r instanceof De){const h=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(h))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Rd(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof vi)return(function(d,y){return{mapValue:{fields:{[fv]:{stringValue:dv},[nc]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw y.Sc("VectorValues must only contain numeric values.");return Ad(y.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${hc(r)}`)})(s,e)}function A0(s,e){const i={};return sv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(s,((r,o)=>{const h=Pd(o,e.mc(r));h!=null&&(i[r]=h)})),{mapValue:{fields:i}}}function S0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ne||s instanceof _i||s instanceof Mn||s instanceof De||s instanceof v0||s instanceof vi)}function b0(s,e,i){if(!S0(i)||!av(i)){const r=hc(i);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Kb(s,e,i){if((e=_r(e))instanceof kd)return e._internalPath;if(typeof e=="string")return R0(s,e);throw cc("Field path arguments must be of type string or ",s,!1,void 0,i)}const Zb=new RegExp("[~\\*/\\[\\]]");function R0(s,e,i){if(e.search(Zb)>=0)throw cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new kd(...e.split("."))._internalPath}catch{throw cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function cc(s,e,i,r,o){const h=r&&!r.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;i&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(h||d)&&(v+=" (found",h&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new at(K.INVALID_ARGUMENT,y+s+v)}function Jb(s,e){return s.some((i=>i.isEqual(e)))}class w0{constructor(e,i,r,o,h){this._firestore=e,this._userDataWriter=i,this._key=r,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $b(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(bc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class $b extends w0{data(){return super.data()}}function bc(s,e){return typeof e=="string"?R0(s,e):e instanceof kd?e._internalPath:e._delegate._internalPath}function C0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new at(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hd{}class D0 extends Hd{}function V0(s,e,...i){let r=[];e instanceof Hd&&r.push(e),r=r.concat(i),(function(h){const d=h.filter((v=>v instanceof Gd)).length,y=h.filter((v=>v instanceof Rc)).length;if(d>1||d>0&&y>0)throw new at(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Rc extends D0{constructor(e,i,r){super(),this._field=e,this._op=i,this._value=r,this.type="where"}static _create(e,i,r){return new Rc(e,i,r)}_apply(e){const i=this._parse(e);return I0(e._query,i),new Ua(e.firestore,e.converter,Jf(e._query,i))}_parse(e){const i=T0(e.firestore);return(function(h,d,y,v,_,A,S){let O;if(_.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new at(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){x_(S,A);const $=[];for(const et of S)$.push(O_(v,h,et));O={arrayValue:{values:$}}}else O=O_(v,h,S)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||x_(S,A),O=Xb(y,d,S,A==="in"||A==="not-in");return we.create(_,A,O)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function Wb(s,e,i){const r=e,o=bc("where",s);return Rc._create(o,r,i)}class Gd extends Hd{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Gd(e,i)}_parse(e){const i=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:Fn.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(o,h){let d=o;const y=h.getFlattenedFilters();for(const v of y)I0(d,v),d=Jf(d,v)})(e._query,i),new Ua(e.firestore,e.converter,Jf(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qd extends D0{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new Qd(e,i)}_apply(e){const i=(function(o,h,d){if(o.startAt!==null)throw new at(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new at(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new to(h,d)})(e._query,this._field,this._direction);return new Ua(e.firestore,e.converter,(function(o,h){const d=o.explicitOrderBy.concat([h]);return new Ns(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,i))}}function tR(s,e="asc"){const i=e,r=bc("orderBy",s);return Qd._create(r,i)}function O_(s,e,i){if(typeof(i=_r(i))=="string"){if(i==="")throw new at(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tv(e)&&i.indexOf("/")!==-1)throw new at(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=e.path.child(Wt.fromString(i));if(!ft.isDocumentKey(r))throw new at(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ky(s,new ft(r))}if(i instanceof De)return Ky(s,i._key);throw new at(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hc(i)}.`)}function x_(s,e){if(!Array.isArray(s)||s.length===0)throw new at(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I0(s,e){const i=(function(o,h){for(const d of o)for(const y of d.getFlattenedFilters())if(h.indexOf(y.op)>=0)return y.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new at(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new at(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class eR{convertValue(e,i="none"){switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw gt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const r={};return Tr(e,((o,h)=>{r[o]=this.convertValue(h,i)})),r}convertVectorValue(e){const i=e.fields?.[nc].arrayValue?.values?.map((r=>ge(r.doubleValue)));return new vi(i)}convertGeoPoint(e){return new _i(ge(e.latitude),ge(e.longitude))}convertArray(e,i){return(e.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const r=mc(e);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const i=Na(e);return new ne(i.seconds,i.nanos)}convertDocumentKey(e,i){const r=Wt.fromString(e);Pt(Gv(r),9688,{name:e});const o=new $l(r.get(1),r.get(3)),h=new ft(r.popFirst(5));return o.isEqual(i)||Pi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}function nR(s,e,i){let r;return r=s?s.toFirestore(e):e,r}class Pl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pr extends w0{constructor(e,i,r,o,h,d){super(e,i,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const r=this._document.data.field(bc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=pr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",pr._jsonSchema={type:Ce("string",pr._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class Ku extends pr{data(e={}){return super.data(e)}}class yr{constructor(e,i,r,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Pl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((r=>{e.call(i,new Ku(this._firestore,this._userDataWriter,r.key,r,new Pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new at(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const v=new Ku(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Pl(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>h||y.type!==3)).map((y=>{const v=new Ku(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Pl(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,A=-1;return y.type!==0&&(_=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),A=d.indexOf(y.doc.key)),{type:iR(y.type),doc:v,oldIndex:_,newIndex:A}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],o=[];return this.docs.forEach((h=>{h._document!==null&&(i.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:s})}}yr._jsonSchemaVersion="firestore/querySnapshot/1.0",yr._jsonSchema={type:Ce("string",yr._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class Fd extends eR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,i)}}function aR(s){s=Da(s,Ua);const e=Da(s.firestore,io),i=Bd(e),r=new Fd(e);return C0(s._query),Bb(i,s._query).then((o=>new yr(e,r,s,o)))}function rR(s,e,i){s=Da(s,De);const r=Da(s.firestore,io),o=nR(s.converter,e);return lR(r,[Yb(T0(r),"setDoc",s._key,o,s.converter!==null,i).toMutation(s._key,ki.none())])}function sR(s,...e){s=_r(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||M_(e[r])||(i=e[r++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(M_(e[r])){const v=e[r];e[r]=v.next?.bind(v),e[r+1]=v.error?.bind(v),e[r+2]=v.complete?.bind(v)}let h,d,y;if(s instanceof De)d=Da(s.firestore,io),y=Td(s._key.path),h={next:v=>{e[r]&&e[r](oR(d,s,v))},error:e[r+1],complete:e[r+2]};else{const v=Da(s,Ua);d=Da(v.firestore,io),y=v._query;const _=new Fd(d);h={next:A=>{e[r]&&e[r](new yr(d,_,v,A))},error:e[r+1],complete:e[r+2]},C0(s._query)}return(function(_,A,S,O){const G=new m0(O),$=new r0(A,G,S);return _.asyncQueue.enqueueAndForget((async()=>i0(await od(_),$))),()=>{G.Nu(),_.asyncQueue.enqueueAndForget((async()=>a0(await od(_),$)))}})(Bd(d),y,o,h)}function lR(s,e){return(function(r,o){const h=new Ca;return r.asyncQueue.enqueueAndForget((async()=>Cb(await jb(r),o,h))),h.promise})(Bd(s),e)}function oR(s,e,i){const r=i.docs.get(e._key),o=new Fd(s);return new pr(s,o,e._key,r,new Pl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){Ds=o})(MA),Wu(new Xl("firestore",((r,{instanceIdentifier:o,options:h})=>{const d=r.getProvider("app").getImmediate(),y=new io(new XA(r.getProvider("auth-internal")),new JA(d,r.getProvider("app-check-internal")),(function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new at(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(_.options.projectId,A)})(d,o),d);return h={useFetchStreams:i,...h},y._setSettings(h),y}),"PUBLIC").setMultipleInstances(!0)),vs(Uy,Ly,e),vs(Uy,Ly,"esm2020")})();const uR={apiKey:"AIzaSyClukiCJsusdmwkaQHepGsILMfczgPrDhU",authDomain:"mathbook-engine.firebaseapp.com",projectId:"mathbook-engine",storageBucket:"mathbook-engine.firebasestorage.app",messagingSenderId:"469440264696",appId:"1:469440264696:web:6f91558beb97f8a2797e0d"},cR=F_(uR),ud=Pb(cR),hR=({isOpen:s,onClose:e})=>{const[i,r]=le.useState(""),[o,h]=le.useState(null),[d,y]=le.useState("idle"),[v,_]=le.useState("");if(!s)return null;const A=async G=>{const $=G.target.files?.[0];if($){i||r($.name.replace(".js","").replace(/_/g," ")),y("validating");try{const et=await $.text();await U_(et),h(et),y("valid"),_("")}catch(et){y("error"),_(et.message||"El archivo no es un simulador vlido."),h(null)}}},S=async()=>{if(o&&i){y("validating");try{const G=V0(_0(ud,"simuladores"),Wb("name","==",i)),$=await aR(G);let et="sim_"+crypto.randomUUID().slice(0,8);if(!$.empty&&(et=$.docs[0].id,!confirm(`El simulador "${i}" ya existe en la nube. Quieres actualizarlo para TODOS los usuarios?`))){y("idle");return}await rR(qb(ud,"simuladores",et),{id:et,name:i,code:o,version:"1.0",timestamp:Date.now()}),alert("Simulador guardado en la nube! Todos los usuarios lo vern al instante."),O()}catch(G){console.error(G),_("Error al conectar con la base de datos."),y("error")}}},O=()=>{r(""),h(null),y("idle"),_(""),e()};return F.jsx("div",{className:"modal-bg",style:{display:"flex"},children:F.jsxs("div",{className:"modal fade-in",style:{width:"800px",maxHeight:"90vh",overflowY:"auto"},children:[F.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[F.jsxs("h2",{children:[F.jsx(nT,{size:24})," Subir Simulador"]}),F.jsx("button",{onClick:O,style:{border:"none",background:"transparent",padding:0},children:F.jsx(aT,{size:24})})]}),F.jsxs("div",{className:"row",children:[F.jsx("label",{style:{fontWeight:"bold"},children:"Nombre para el Men:"}),F.jsx("input",{type:"text",value:i,onChange:G=>r(G.target.value),placeholder:"Ej: Permutaciones Agrupadas"})]}),F.jsxs("div",{className:"row",children:[F.jsx("label",{style:{fontWeight:"bold"},children:"Archivo JavaScript (.js):"}),F.jsx("input",{type:"file",accept:".js,text/javascript",onChange:A,style:{padding:"10px",background:"var(--bg-tertiary)",borderRadius:"var(--radius)"}})]}),F.jsxs("div",{style:{marginTop:"1rem",minHeight:"60px"},children:[d==="validating"&&F.jsx("p",{className:"loading",children:"Analizando cdigo..."}),d==="error"&&F.jsxs("div",{className:"feedback-incorrect",style:{display:"flex",gap:"10px",alignItems:"center"},children:[F.jsx($E,{size:20}),F.jsxs("div",{children:[F.jsx("strong",{children:"Error:"})," ",v]})]}),d==="valid"&&o&&F.jsxs("div",{className:"fade-in",children:[F.jsxs("div",{className:"feedback-correct",style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"1rem"},children:[F.jsx(IE,{size:20}),F.jsxs("div",{children:[F.jsx("strong",{children:"Cdigo Vlido!"})," Listo para subir."]})]}),F.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",padding:"15px",background:"var(--bg-secondary)"},children:[F.jsxs("h4",{style:{margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px",color:"var(--text-muted)"},children:[F.jsx(UE,{size:16})," Vista Previa del Simulador"]}),F.jsx(L_,{code:o,params:{}})]})]})]}),F.jsxs("div",{className:"buttons",children:[F.jsx("button",{onClick:O,children:"Cancelar"}),F.jsx("button",{id:"btnGuardar",disabled:d!=="valid"||!i,onClick:S,children:"Subir y Guardar"})]})]})})};function fR(s){const e=`
    :root { 
        --bg-primary: #ffffff; --text-primary: #1a202c; --brand-primary: #2563eb; 
        --bg-secondary: #f8fafc; --border-color: #e2e8f0;
    }
    body { font-family: system-ui, sans-serif; line-height: 1.6; color: var(--text-primary); margin: 0; background: #f1f5f9; }
    .book-container { max-width: 800px; margin: 40px auto; background: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    h1, h2 { color: var(--brand-primary); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; }
    .page-content { display: none; animation: fadeIn 0.3s ease; }
    .page-content.active { display: block; }
    .nav-buttons { display: flex; justify-content: space-between; margin-top: 40px; border-top: 1px solid #e2e8f0; padding-top: 20px; }
    button { background: var(--brand-primary); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }
    button:disabled { background: #cbd5e1; cursor: not-allowed; }
    
    /* Estilos del Simulador (Copiados de tu CSS) */
    .simulador-wrapper { margin: 20px 0; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px; background: #f8fafc; }
    .btn-sim { background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; width: 100%; text-align: left; }
    .btn-sim-rojo { background: #dc2626; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  `,i=`window.BOOK_DATA = ${JSON.stringify(s)};`;return`
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${s.meta.title}</title>
    <style>${e}</style>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>
</head>
<body>
    <div class="book-container">
        <h1 style="text-align:center">${s.meta.title}</h1>
        <hr/>
        
        <div id="book-content">
            </div>

        <div class="nav-buttons">
            <button id="btn-prev">Anterior</button>
            <span id="page-num" style="align-self:center; color:#64748b;">Pgina 1</span>
            <button id="btn-next">Siguiente</button>
        </div>
    </div>

    <script>${i}<\/script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const data = window.BOOK_DATA;
        const container = document.getElementById('book-content');
        const prevBtn = document.getElementById('btn-prev');
        const nextBtn = document.getElementById('btn-next');
        const pageNum = document.getElementById('page-num');
        
        let currentPageIdx = 0;

        // --- MOTOR DE SIMULADORES (Versin Ligera) ---
        const simulators = {};
        data.assets.simulators.forEach(sim => {
            simulators[sim.id] = sim;
        });

        function renderBlock(block) {
            if (block.type === 'text') {
                const div = document.createElement('div');
                div.className = 'text-block';
                // Convertir saltos de lnea y LaTeX bsico
                div.innerHTML = block.content
                    .replace(/\\n/g, '<br>')
                    // Un hack simple para renderizar simuladores Legacy en texto si quedaron huerfanos
                    .replace(/\\[simulador:(.*?)\\]/g, ''); 
                return div;
            }
            if (block.type === 'simulator') {
                const wrapper = document.createElement('div');
                wrapper.className = 'simulador-wrapper';
                const simAsset = simulators[block.simulatorId || block.simulatorId?.replace('legacy_', '')];
                
                if (!simAsset) {
                    wrapper.innerHTML = '<p style="color:red">Simulador no encontrado: ' + block.simulatorId + '</p>';
                    return wrapper;
                }

                // Inyeccin del cdigo JS
                // NOTA: Para exportacin real, usamos Blob URL igual que en el editor
                const blob = new Blob([simAsset.code], { type: 'text/javascript' });
                const url = URL.createObjectURL(blob);

                import(url).then(module => {
                    const sim = module.default;
                    // Detectar formato (Igual que en tu editor)
                    if (sim.init) {
                        const container = document.createElement('div');
                        wrapper.appendChild(container);
                        sim.init(container, block.simConfig || {});
                    } else if (sim.render) {
                        // Legacy Support
                        const html = sim.render(block.simConfig || {}, simAsset.name);
                        const scriptRegex = /<script>([\\s\\S]*?)<\\/script>/;
                        const match = html.match(scriptRegex);
                        const htmlOnly = html.replace(scriptRegex, '');
                        
                        const div = document.createElement('div');
                        div.innerHTML = htmlOnly;
                        wrapper.appendChild(div);

                        if (match && match[1]) {
                            const script = document.createElement('script');
                            script.textContent = match[1];
                            document.body.appendChild(script);
                        }
                    }
                }).catch(err => {
                    wrapper.innerHTML = 'Error cargando simulador: ' + err.message;
                });

                return wrapper;
            }
            return document.createElement('div');
        }

        function showPage(index) {
            container.innerHTML = '';
            const page = data.pages[index];
            
            const title = document.createElement('h2');
            title.textContent = page.title;
            container.appendChild(title);

            page.blocks.forEach(block => {
                container.appendChild(renderBlock(block));
            });

            // Actualizar controles
            pageNum.textContent = \`Pgina \${index + 1} de \${data.pages.length}\`;
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === data.pages.length - 1;
            
            // Renderizar Matemticas (MathJax) si existe
            if (window.MathJax) {
                window.MathJax.typesetPromise([container]);
            }
        }

        // Event Listeners
        prevBtn.onclick = () => { if(currentPageIdx > 0) showPage(--currentPageIdx); };
        nextBtn.onclick = () => { if(currentPageIdx < data.pages.length - 1) showPage(++currentPageIdx); };

        // Iniciar
        showPage(0);
    });
  <\/script>
</body>
</html>
  `}const dR={meta:{title:"Nuevo Libro Interactivo",author:"Anon",created:Date.now(),theme:"light"},assets:{simulators:[]},pages:[]};function mR(){const[s,e]=le.useState(dR),[i,r]=le.useState([]),[o,h]=le.useState(null),[d,y]=le.useState(!1),[v,_]=le.useState(!1);le.useEffect(()=>{document.body.setAttribute("data-theme",v?"dark":"light")},[v]),le.useEffect(()=>{const J=V0(_0(ud,"simuladores"),tR("timestamp","desc")),ut=sR(J,vt=>{const pt=vt.docs.map(R=>({id:R.id,...R.data()}));e(R=>({...R,assets:{...R.assets,simulators:pt}})),console.log("Simuladores sincronizados desde Firebase:",pt)});return()=>ut()},[]);const A=()=>{r(J=>{const ut=[...J,s];return ut.length>20&&ut.shift(),ut})},S=()=>{if(i.length===0)return;const J=i[i.length-1];r(ut=>ut.slice(0,-1)),e(J),J.pages.length>0&&(!o||!J.pages.find(ut=>ut.id===o))&&h(J.pages[0].id)},O=(J="seccion")=>{A();const ut={id:crypto.randomUUID(),type:J,title:J==="capitulo"?"Nuevo Captulo":"Nueva Seccin",blocks:[]};e(vt=>({...vt,pages:[...vt.pages,ut]})),h(ut.id)},G=J=>{e(ut=>({...ut,pages:ut.pages.map(vt=>vt.id===J.id?J:vt)}))},$=J=>{switch(J){case"capitulo":return{fontWeight:"bold",borderLeft:"4px solid var(--brand-primary)",paddingLeft:"8px"};case"subseccion":return{paddingLeft:"30px",fontSize:"0.9em",borderLeft:"1px solid var(--border-color)"};case"portada":return{fontStyle:"italic",color:"var(--brand-accent)"};default:return{paddingLeft:"15px"}}},et=(J,ut)=>{e(vt=>{const pt=vt.assets.simulators.findIndex(b=>b.name===J);let R=[...vt.assets.simulators];if(pt>=0)console.log(`Actualizando simulador existente: ${J}`),R[pt]={...R[pt],code:ut,timestamp:Date.now()},alert(`Simulador "${J}" actualizado correctamente! Todas las pginas ahora usan la nueva versin.`);else{console.log(`Creando nuevo simulador: ${J}`);const b={id:"sim_"+crypto.randomUUID().slice(0,8),name:J,code:ut,version:"1.0",timestamp:Date.now()};R.push(b),alert(`Simulador "${J}" aadido a la librera!`)}return{...vt,assets:{...vt.assets,simulators:R}}})},W=()=>{const J="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),ut=document.createElement("a");ut.setAttribute("href",J),ut.setAttribute("download",s.meta.title+".json"),document.body.appendChild(ut),ut.click(),ut.remove()},dt=J=>{const ut=J.target.files?.[0];if(!ut)return;const vt=new FileReader;vt.onload=pt=>{try{const R=JSON.parse(pt.target?.result);if(R.meta&&R.pages&&!Array.isArray(R)){e(R),h(R.pages[0]?.id||null),alert("Proyecto cargado correctamente.");return}if(Array.isArray(R)){console.log("Detectado formato Legacy. Convirtiendo...");const b=R.map(M=>{const V=[],z=M.contenido||"",w=/\[simulador:([a-zA-Z0-9_]+)\]/g;let Yt=0,se;for(;(se=w.exec(z))!==null;){const ct=z.slice(Yt,se.index).trim();ct&&V.push({id:crypto.randomUUID(),type:"text",content:ct});const Ot=se[1];V.push({id:crypto.randomUUID(),type:"simulator",content:"",simulatorId:"legacy_"+Ot,simConfig:{}}),Yt=w.lastIndex}const P=z.slice(Yt).trim();P&&V.push({id:crypto.randomUUID(),type:"text",content:P});let nt="seccion";return M.tipo==="capitulo"&&(nt="capitulo"),M.tipo==="portada"&&(nt="portada"),{id:M.id||crypto.randomUUID(),type:nt,title:M.titulo||"Sin Ttulo",blocks:V.length>0?V:[{id:crypto.randomUUID(),type:"text",content:""}]}}),D={meta:{title:"Proyecto Importado",author:"Usuario",created:Date.now(),theme:"light"},assets:{simulators:[]},pages:b};e(D),h(b[0]?.id||null),alert(`Proyecto antiguo convertido exitosamente.

IMPORTANTE: Recuerda subir los archivos .js de los simuladores usando el botn '+ Importar Simulador' para que funcionen.`)}else alert("Formato de archivo no reconocido.")}catch(R){console.error(R),alert("Error al leer el archivo JSON.")}},vt.readAsText(ut),J.target.value=""},At=()=>{const J=fR(s),ut=new Blob([J],{type:"text/html"}),vt=URL.createObjectURL(ut),pt=document.createElement("a");pt.href=vt,pt.download=`${s.meta.title.replace(/\s+/g,"_")}_offline.html`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(vt)};return F.jsxs("div",{className:"app-container",children:[F.jsxs("header",{children:[F.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:F.jsx("h1",{children:s.meta.title})}),F.jsx("div",{className:"sep"}),F.jsxs("a",{href:"/ayuda.html",target:"_blank",className:"button-lookalike",title:"Ver Ayuda",style:{textDecoration:"none",color:"inherit"},children:[F.jsx(ME,{size:18,style:{marginRight:5}})," Ayuda"]}),F.jsxs("button",{onClick:S,disabled:i.length===0,title:"Deshacer ltimo cambio",children:[F.jsx(tT,{size:18})," Deshacer"]}),F.jsx("div",{className:"sep",style:{flex:0,width:"1px",height:"20px",margin:"0 10px"}}),F.jsx("button",{onClick:()=>_(!v),children:v?F.jsx(XE,{size:18}):F.jsx(GE,{size:18})}),F.jsxs("label",{htmlFor:"load-project-input",className:"button-lookalike",children:[F.jsx(kE,{size:18,style:{marginRight:5}})," Cargar"]}),F.jsx("input",{id:"load-project-input",type:"file",accept:".json",onChange:dt,style:{display:"none"}}),F.jsxs("button",{id:"btnGuardar",onClick:W,style:{display:"flex",alignItems:"center",gap:"5px"},children:[F.jsx(FE,{size:18})," Guardar"]}),F.jsxs("button",{id:"btnDescargar",onClick:At,style:{display:"flex",alignItems:"center",gap:"5px"},children:[F.jsx(xE,{size:18})," Exportar"]})]}),F.jsxs("div",{className:"layout",children:[F.jsxs("aside",{className:"toc",children:[F.jsx("h2",{children:"Contenido"}),F.jsxs("div",{className:"toolbar",style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[F.jsx("button",{onClick:()=>O("capitulo"),style:{flex:1,fontSize:"0.8rem"},children:"+ Cap"}),F.jsx("button",{onClick:()=>O("seccion"),style:{flex:1,fontSize:"0.8rem"},children:"+ Sec"}),F.jsx("button",{onClick:()=>y(!0),style:{width:"100%",marginTop:"5px",backgroundColor:"var(--brand-success)",color:"white",borderColor:"var(--brand-success)"},children:"+ Simulador"})]}),F.jsx("ul",{style:{marginTop:"1rem"},children:s.pages.map(J=>F.jsx("li",{className:J.id===o?"selected":"",style:$(J.type),onClick:()=>h(J.id),children:J.type==="capitulo"?J.title.toUpperCase():J.title},J.id))})]}),F.jsx("main",{className:"main",children:o?(()=>{const J=s.pages.find(ut=>ut.id===o);return J?F.jsx(sT,{page:J,availableSimulators:s.assets.simulators,onUpdatePage:G}):F.jsx("p",{className:"error",children:"Pgina no encontrada."})})():s.pages.length===0?F.jsxs("div",{className:"empty-state",children:[F.jsx("h3",{children:"Bienvenido!"}),F.jsx("p",{children:"Comienza aadiendo un Captulo."})]}):F.jsx("div",{className:"info",children:"Selecciona una pgina para editar."})})]}),F.jsx(hR,{isOpen:d,onClose:()=>y(!1),onSave:et})]})}const N0=document.createElement("style");N0.innerText=`
  .button-lookalike {
    font-family: var(--font-sans);
    font-size: 0.9rem;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
    color: var(--text-primary);
    cursor: pointer;
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    font-weight: 600;
    transition: all var(--transition-fast);
  }
  .button-lookalike:hover {
    background: var(--bg-secondary);
    border-color: var(--brand-primary);
  }
`;document.head.appendChild(N0);vE.createRoot(document.getElementById("root")).render(F.jsx(hE.StrictMode,{children:F.jsx(mR,{})}));
